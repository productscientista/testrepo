{"version":3,"sources":["angular-wakanda.min.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","wakanda_client_1","WakandaClient","browser_http_client_1","catalog_base_service_1","CatalogBaseService","collection_base_service_1","CollectionBaseService","dataclass_base_service_1","DataClassBaseService","directory_base_service_1","DirectoryBaseService","entity_base_service_1","EntityBaseService","media_base_service_1","MediaBaseService","HttpClient","Function","bind","$export","P","global","core","hide","redefine","ctx","PROTOTYPE","type","name","source","key","own","out","exp","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","IS_BIND","B","target","expProto","undefined","U","W","R","window","Math","self","__g","version","__e","dP","createDesc","object","value","f","anObject","IE8_DOM_DEFINE","toPrimitive","Object","defineProperty","O","Attributes","e","TypeError","isObject","it","get","a","exec","document","is","createElement","fn","val","toString","valueOf","bitmap","enumerable","configurable","writable","has","SRC","TO_STRING","$toString","TPL","split","inspectSource","safe","isFunction","join","String","prototype","hasOwnProperty","px","random","concat","aFunction","that","length","b","apply","arguments","invoke","arraySlice","slice","factories","construct","len","args","n","i","partArgs","bound","un","Array","from","$at","iterated","_t","_i","point","index","done","toInteger","defined","pos","s","l","charCodeAt","charAt","ceil","floor","isNaN","LIBRARY","Iterators","$iterCreate","setToStringTag","getPrototypeOf","ITERATOR","BUGGY","keys","FF_ITERATOR","KEYS","VALUES","returnThis","Base","NAME","Constructor","next","DEFAULT","IS_SET","FORCED","methods","IteratorPrototype","getMethod","kind","proto","TAG","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","entries","values","create","descriptor","dPs","enumBugKeys","IE_PROTO","Empty","createDict","iframeDocument","iframe","lt","gt","style","display","appendChild","src","contentWindow","open","write","close","Properties","result","getKeys","defineProperties","$keys","toIObject","arrayIndexOf","names","push","IObject","cof","propertyIsEnumerable","toLength","toIndex","IS_INCLUDES","$this","el","fromIndex","min","max","shared","uid","SHARED","store","documentElement","def","tag","stat","Symbol","USE_SYMBOL","$exports","toObject","ObjectProto","constructor","isArrayIter","createProperty","getIterFn","iter","arrayLike","step","iterator","C","aLen","mapfn","mapping","iterFn","ret","ArrayProto","$defineProperty","classof","getIteratorMethod","ARG","tryGet","T","callee","SAFE_CLOSING","riter","skipClosing","arr","isArray","arg","Map","test","$iterators","wks","TO_STRING_TAG","ArrayValues","collections","Collection","addToUnscopables","_k","Arguments","UNSCOPABLES","strong","entry","getEntry","v","set","redefineAll","anInstance","forOf","$iterDefine","setSpecies","DESCRIPTORS","fastKey","SIZE","_f","k","getConstructor","wrapper","IS_MAP","ADDER","iterable","_l","clear","data","r","delete","prev","forEach","callbackfn","setStrong","forbiddenField","BREAK","RETURN","SPECIES","KEY","META","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","w","getWeak","onFreeze","meta","NEED","fails","$iterDetect","inheritIfRequired","common","IS_WEAK","fixMethod","instance","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","BUGGY_ZERO","$instance","setPrototypeOf","check","buggy","__proto__","pIE","gOPD","getOwnPropertyDescriptor","toJSON","Promise","Internal","GenericPromiseCapability","Wrapper","speciesConstructor","task","microtask","PROMISE","process","$Promise","isNode","empty","USE_NATIVE","promise","resolve","FakePromise","PromiseRejectionEvent","then","sameConstructor","isThenable","newPromiseCapability","PromiseCapability","reject","$$resolve","$$reject","perform","error","notify","isReject","_n","chain","_c","_v","ok","_s","run","reaction","handler","fail","domain","_h","onHandleUnhandled","enter","exit","onUnhandled","abrupt","console","isUnhandled","emit","onunhandledrejection","reason","_a","onrejectionhandled","$reject","_d","_w","$resolve","executor","err","onFulfilled","onRejected","catch","capability","x","all","remaining","$index","alreadyCalled","race","D","defer","channel","port","html","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","counter","queue","ONREADYSTATECHANGE","listener","event","nextTick","port2","port1","onmessage","postMessage","addEventListener","importScripts","removeChild","setTimeout","macrotask","Observer","MutationObserver","WebKitMutationObserver","head","last","flush","parent","toggle","node","createTextNode","observe","characterData","CustomEvent","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","Event","catalog_business_1","directory_business_1","entity_1","collection_1","packageOptions","host","catalog","_httpClient","apiPrefix","directoryBusiness","wakJSC","directory","login","username","password","duration","logout","currentUser","currentUserBelongsTo","group","helper","isEntity","isCollection","getCatalog","dataClasses","catalogBusiness","__extends","d","__","abstract_business_1","catalog_service_1","catalog_1","dataclass_1","dataclass_business_1","CatalogBusiness","_super","obj","service","needDataClass","dcName","seenDataClasses","indexOf","_this","dataClassDBOArray","dcArray","dataClassDBOArray_1","dcDBO","attributes","_loop_1","attr","AttributeRelated","readOnly","simpleDate","Attribute","entityType_1","some","_dataClass","collectionName","attrCollection","AttributeCollection","entityType","Error","_b","entity","collection","dataClass","method","applyTo","DataClass","dataClassBusiness","dataURI","_decorateDataClass","_e","AbstractBusiness","abstract_service_1","CatalogService","httpClient","AbstractService","strDataclasses","strCatalog","uri","res","rawObj","JSON","parse","body","Catalog","dataClasses_1","dc","entity_business_1","dataclass_service_1","collection_business_1","media_business_1","media_1","const_1","method_adapter_1","util_1","_dataClassBusinessMap","DataClassBusiness","find","query","_addUserDefinedMethods","callMethod","methodName","parameters","MethodAdapter","transform","options","opt","filter","pageSize","start","orderBy","_presentationEntityFromDbo","dbo","initialSelect","select","DEFAULT_PAGE_SIZE","_presentationCollectionFromDbo","pojo","entityToAttach","prop","_createEntity","deferred","business","_decorateEntity","_populateEntityDataFromDbo","_flashEntityValues","_createCollection","collectionUri","_decorateCollection","_createMedia","isImage","attributeName","media","_decorateMedia","_stamp","__STAMP","dboAttribute","__deferred","wakParseSimpleDate","Date","__KEY","__ENTITYSET","__ENTITIES","_count","__COUNT","_first","__FIRST","_sent","__SENT","_pageSize","dboEntity","entities","entity_service_1","EntityBusiness","save","fetch","recompute","objAttr","_key","stringify","wakToStringSimpleDate","_oldEntityValues","fresherEntity","_refreshEntity","prepareDataForSave","expand","_getExpandString","entityDbo","entityIsNew","oldData","_deferred","EntityService","entityKey","expandStr","post","__entityModel","removeRestInfoFromEntity","Util","handleOptions","emMethod","params_1","elt","isInteger","replace","Entity","dcBusinessMap","Media","stringDate","date","UTC","parseInt","wakSimpleDate","getUTCDate","getUTCMonth","getUTCFullYear","DataClassService","optString","_sanitizeOptionParams","map","element","toISOString","collection_service_1","CollectionBusiness","nextPage","prevPage","more","collectionDBO","fresherCollection","_refreshCollection","CollectionService","isEntitySet","isEntitySetUri","DEFAULT_SESSION_DURATION","media_service_1","MediaBusiness","mediaBusiness","upload","file","MediaService","dataClassName","mimeType","entityStamp","_buildUri","binary","directory_service_1","DirectoryBusiness","durationTime","DirectoryService","ID","main","description","typings","browser","repository","scripts","webpack-watch","webpack-build","webpack-build:ci","webpack-build:prod","test:karma:single","test:karma:full","test:node:single","test:node:full","test-single","test-server:start","test-server:stop","test-server:record","test-server:init","codecov","tsc","serve","author","license","devDependencies","babel-core","babel-loader","babel-polyfill","babel-preset-es2015","body-parser","chai","chalk","codecov.io","concurrently","connect","connect-prism","eslint","eslint-loader","express","grunt","gulp","gulp-connect","http-proxy-middleware","isparta","isparta-loader","json-loader","karma","karma-chai","karma-coverage","karma-mocha","karma-phantomjs-launcher","karma-verbose-reporter","mocha","path","phantomjs","serve-static","ts-loader","tslint","tslint-loader","typescript","webpack","dependencies","core-js","request","http_client_1","http_response_1","AureliaHttpClient","BrowserHttpClient","client","_getWithoutInterceptor","responseGet","createRequest","prefix","asGet","withCredentials","send","_httpResponseAdaptor","asPost","withContent","responsePost","statusCode","headers","response","_getRequestInterceptors","_postRequestInterceptors","_getResponseInterceptors","_postResponseInterceptors","interceptor","requestUri","registerRequestInterceptor","callback","interceptorType","_interceptorTypeToArray","t","registerResponseInterceptor","_isValidInterceptorType","toLowerCase","validTypes","HttpResponse","_httpRequestMessage","HttpRequestMessage","_httpResponseMessage","HttpResponseMessage","_jsonpRequestMessage","JSONPRequestMessage","_headers","Headers","_requestBuilder","RequestBuilder","_classCallCheck","trackRequestStart","processor","pendingRequests","isRequesting","trackRequestEnd","splice","dispatchEvent","_createClass","props","protoProps","staticProps","requestTransformers","requestProcessorFactories","createHttpRequestMessageProcessor","createJSONPRequestMessageProcessor","builder","transformers","withUri","message","ii","createProcessor","abort","cancel","asDelete","asHead","callbackParameterName","asJsonp","asOptions","content","asPut","asPatch","xhr","setRequestHeader","headerStr","headerPairs","headerPair","substring","add","useJsonp","addHelper","baseUri","responseType","timeout","reviver","replacer","progressCallback","trimDots","ary","part","relativeToFile","normalizedBaseParts","fileParts","trim","path1","path2","url1","url2","url3","urlPrefix","pop","_typeof","class2type","buildQueryString","traditional","encodeURIComponent","_buildQueryString","r20","rbracket","_requestMessageProcessor","RequestMessageProcessor","XMLHttpRequest","_transformers","timeoutTransformer","credentialsTransformer","progressTransformer","responseTypeTransformer","headerTransformer","contentTransformer","buildFullUri","qs","_aureliaPath","fullUri","xhrType","XHRType","onload","isSuccess","ontimeout","status","statusText","onerror","onabort","requestMessage","getAllResponseHeaders","_content","callbackParameterNameTransformer","onprogress","configureXHR","FormData","Blob","ArrayBufferView","Document","JSONPXHR","callbackName","round","script","wakanda","angular","constant","datastoreFactory","directoryFactory","transformFactory","wakandaFactory","init","getDatastore","getDataStore","$login","$loginByPassword","$logout","$currentUser","$currentUserBelongsTo","$transform","$objectToEntity","toEntity","$objectToCollection","toCollection","provider","wakandaClient","catalogName","hostname","$get","getHostname","getCatalogName","setHostname","_hostname","setCatalogName","_catalogName","$injector","$q","rootScopeSafeApply","_decorate","ngCollection","ngDataClass","$_collection","$fetch","$nextPage","$prevPage","$toJSON","$more","addUserDefinedMethods","emptyNgCollection","addEntities","$promise","array","$_dataClass","$_catalog","entityFactory","createNgEntity","$_entity","collectionFactory","createNgCollection","ngEntity","isNgCollection","NgDataClass","$name","$collectionName","relatedToSet","isNgEntity","jscEntity","warn","$query","targetDataClass","attributeInfo","attrName","attributeMap","getCollectionMethods","getMethods","getEntityMethods","getDataClassMethods","dcFactory","$find","$create","$all","$attr","$entityMethods","$collectionMethods","$dataClassMethods","createNgDataClass","dataclassFactory","hashCatalogName","dsFactory","ds","_dsMap","catalogStr","cachedCatalog","_ds","groupName","mediaFactory","NgEntity","defineEntityProperty","defineCollectionProperty","defineScalarProperty","defineMediaProperty","stamp","isNew","isDeferred","$_relatedAttributes","remove","relatedNgEntity","ngMedia","createNgMedia","$save","$remove","$key","$stamp","$isNew","$isDeferred","$recompute","$wakanda","user","NgMedia","$_media","$upload","$rootScope","$timeout","phase","$$phase","$apply"],"mappings":"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","file":"angular-wakanda.min.js","sourcesContent":["//angular-wakanda.js - v1.3.0 - 2016-10-13\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WakandaClient\"] = factory();\n\telse\n\t\troot[\"WakandaClient\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t__webpack_require__(2);\n\t__webpack_require__(24);\n\t__webpack_require__(58);\n\t__webpack_require__(61);\n\t__webpack_require__(82);\n\t__webpack_require__(87);\n\tvar wakanda_client_1 = __webpack_require__(88);\n\texports.WakandaClient = wakanda_client_1.default;\n\tvar browser_http_client_1 = __webpack_require__(119);\n\tvar catalog_base_service_1 = __webpack_require__(93);\n\texports.CatalogBaseService = catalog_base_service_1.CatalogBaseService;\n\tvar collection_base_service_1 = __webpack_require__(109);\n\texports.CollectionBaseService = collection_base_service_1.CollectionBaseService;\n\tvar dataclass_base_service_1 = __webpack_require__(106);\n\texports.DataClassBaseService = dataclass_base_service_1.DataClassBaseService;\n\tvar directory_base_service_1 = __webpack_require__(117);\n\texports.DirectoryBaseService = directory_base_service_1.DirectoryBaseService;\n\tvar entity_base_service_1 = __webpack_require__(99);\n\texports.EntityBaseService = entity_base_service_1.EntityBaseService;\n\tvar media_base_service_1 = __webpack_require__(113);\n\texports.MediaBaseService = media_base_service_1.MediaBaseService;\n\twakanda_client_1.default.HttpClient = browser_http_client_1.default;\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(3);\n\tmodule.exports = __webpack_require__(6).Function.bind;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.2.3.2 / 15.3.4.5 Function.prototype.bind(thisArg, args...)\n\tvar $export = __webpack_require__(4);\n\t\n\t$export($export.P, 'Function', {bind: __webpack_require__(22)});\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global    = __webpack_require__(5)\n\t  , core      = __webpack_require__(6)\n\t  , hide      = __webpack_require__(7)\n\t  , redefine  = __webpack_require__(17)\n\t  , ctx       = __webpack_require__(20)\n\t  , PROTOTYPE = 'prototype';\n\t\n\tvar $export = function(type, name, source){\n\t  var IS_FORCED = type & $export.F\n\t    , IS_GLOBAL = type & $export.G\n\t    , IS_STATIC = type & $export.S\n\t    , IS_PROTO  = type & $export.P\n\t    , IS_BIND   = type & $export.B\n\t    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE]\n\t    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n\t    , expProto  = exports[PROTOTYPE] || (exports[PROTOTYPE] = {})\n\t    , key, own, out, exp;\n\t  if(IS_GLOBAL)source = name;\n\t  for(key in source){\n\t    // contains in native\n\t    own = !IS_FORCED && target && target[key] !== undefined;\n\t    // export native or passed\n\t    out = (own ? target : source)[key];\n\t    // bind timers to global for call from export context\n\t    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n\t    // extend global\n\t    if(target)redefine(target, key, out, type & $export.U);\n\t    // export\n\t    if(exports[key] != out)hide(exports, key, exp);\n\t    if(IS_PROTO && expProto[key] != out)expProto[key] = out;\n\t  }\n\t};\n\tglobal.core = core;\n\t// type bitmap\n\t$export.F = 1;   // forced\n\t$export.G = 2;   // global\n\t$export.S = 4;   // static\n\t$export.P = 8;   // proto\n\t$export.B = 16;  // bind\n\t$export.W = 32;  // wrap\n\t$export.U = 64;  // safe\n\t$export.R = 128; // real proto method for `library` \n\tmodule.exports = $export;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n\tvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n\t  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\tif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tvar core = module.exports = {version: '2.4.0'};\n\tif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar dP         = __webpack_require__(8)\n\t  , createDesc = __webpack_require__(16);\n\tmodule.exports = __webpack_require__(12) ? function(object, key, value){\n\t  return dP.f(object, key, createDesc(1, value));\n\t} : function(object, key, value){\n\t  object[key] = value;\n\t  return object;\n\t};\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar anObject       = __webpack_require__(9)\n\t  , IE8_DOM_DEFINE = __webpack_require__(11)\n\t  , toPrimitive    = __webpack_require__(15)\n\t  , dP             = Object.defineProperty;\n\t\n\texports.f = __webpack_require__(12) ? Object.defineProperty : function defineProperty(O, P, Attributes){\n\t  anObject(O);\n\t  P = toPrimitive(P, true);\n\t  anObject(Attributes);\n\t  if(IE8_DOM_DEFINE)try {\n\t    return dP(O, P, Attributes);\n\t  } catch(e){ /* empty */ }\n\t  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n\t  if('value' in Attributes)O[P] = Attributes.value;\n\t  return O;\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(10);\n\tmodule.exports = function(it){\n\t  if(!isObject(it))throw TypeError(it + ' is not an object!');\n\t  return it;\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  return typeof it === 'object' ? it !== null : typeof it === 'function';\n\t};\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = !__webpack_require__(12) && !__webpack_require__(13)(function(){\n\t  return Object.defineProperty(__webpack_require__(14)('div'), 'a', {get: function(){ return 7; }}).a != 7;\n\t});\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Thank's IE8 for his funny defineProperty\n\tmodule.exports = !__webpack_require__(13)(function(){\n\t  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n\t});\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(exec){\n\t  try {\n\t    return !!exec();\n\t  } catch(e){\n\t    return true;\n\t  }\n\t};\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(10)\n\t  , document = __webpack_require__(5).document\n\t  // in old IE typeof document.createElement is 'object'\n\t  , is = isObject(document) && isObject(document.createElement);\n\tmodule.exports = function(it){\n\t  return is ? document.createElement(it) : {};\n\t};\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.1 ToPrimitive(input [, PreferredType])\n\tvar isObject = __webpack_require__(10);\n\t// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n\t// and the second argument - flag - preferred type is a string\n\tmodule.exports = function(it, S){\n\t  if(!isObject(it))return it;\n\t  var fn, val;\n\t  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  throw TypeError(\"Can't convert object to primitive value\");\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(bitmap, value){\n\t  return {\n\t    enumerable  : !(bitmap & 1),\n\t    configurable: !(bitmap & 2),\n\t    writable    : !(bitmap & 4),\n\t    value       : value\n\t  };\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global    = __webpack_require__(5)\n\t  , hide      = __webpack_require__(7)\n\t  , has       = __webpack_require__(18)\n\t  , SRC       = __webpack_require__(19)('src')\n\t  , TO_STRING = 'toString'\n\t  , $toString = Function[TO_STRING]\n\t  , TPL       = ('' + $toString).split(TO_STRING);\n\t\n\t__webpack_require__(6).inspectSource = function(it){\n\t  return $toString.call(it);\n\t};\n\t\n\t(module.exports = function(O, key, val, safe){\n\t  var isFunction = typeof val == 'function';\n\t  if(isFunction)has(val, 'name') || hide(val, 'name', key);\n\t  if(O[key] === val)return;\n\t  if(isFunction)has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n\t  if(O === global){\n\t    O[key] = val;\n\t  } else {\n\t    if(!safe){\n\t      delete O[key];\n\t      hide(O, key, val);\n\t    } else {\n\t      if(O[key])O[key] = val;\n\t      else hide(O, key, val);\n\t    }\n\t  }\n\t// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n\t})(Function.prototype, TO_STRING, function toString(){\n\t  return typeof this == 'function' && this[SRC] || $toString.call(this);\n\t});\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tvar hasOwnProperty = {}.hasOwnProperty;\n\tmodule.exports = function(it, key){\n\t  return hasOwnProperty.call(it, key);\n\t};\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tvar id = 0\n\t  , px = Math.random();\n\tmodule.exports = function(key){\n\t  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n\t};\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// optional / simple context binding\n\tvar aFunction = __webpack_require__(21);\n\tmodule.exports = function(fn, that, length){\n\t  aFunction(fn);\n\t  if(that === undefined)return fn;\n\t  switch(length){\n\t    case 1: return function(a){\n\t      return fn.call(that, a);\n\t    };\n\t    case 2: return function(a, b){\n\t      return fn.call(that, a, b);\n\t    };\n\t    case 3: return function(a, b, c){\n\t      return fn.call(that, a, b, c);\n\t    };\n\t  }\n\t  return function(/* ...args */){\n\t    return fn.apply(that, arguments);\n\t  };\n\t};\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n\t  return it;\n\t};\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar aFunction  = __webpack_require__(21)\n\t  , isObject   = __webpack_require__(10)\n\t  , invoke     = __webpack_require__(23)\n\t  , arraySlice = [].slice\n\t  , factories  = {};\n\t\n\tvar construct = function(F, len, args){\n\t  if(!(len in factories)){\n\t    for(var n = [], i = 0; i < len; i++)n[i] = 'a[' + i + ']';\n\t    factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');\n\t  } return factories[len](F, args);\n\t};\n\t\n\tmodule.exports = Function.bind || function bind(that /*, args... */){\n\t  var fn       = aFunction(this)\n\t    , partArgs = arraySlice.call(arguments, 1);\n\t  var bound = function(/* args... */){\n\t    var args = partArgs.concat(arraySlice.call(arguments));\n\t    return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);\n\t  };\n\t  if(isObject(fn.prototype))bound.prototype = fn.prototype;\n\t  return bound;\n\t};\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\t// fast apply, http://jsperf.lnkit.com/fast-apply/5\n\tmodule.exports = function(fn, args, that){\n\t  var un = that === undefined;\n\t  switch(args.length){\n\t    case 0: return un ? fn()\n\t                      : fn.call(that);\n\t    case 1: return un ? fn(args[0])\n\t                      : fn.call(that, args[0]);\n\t    case 2: return un ? fn(args[0], args[1])\n\t                      : fn.call(that, args[0], args[1]);\n\t    case 3: return un ? fn(args[0], args[1], args[2])\n\t                      : fn.call(that, args[0], args[1], args[2]);\n\t    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n\t                      : fn.call(that, args[0], args[1], args[2], args[3]);\n\t  } return              fn.apply(that, args);\n\t};\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(25);\n\t__webpack_require__(51);\n\tmodule.exports = __webpack_require__(6).Array.from;\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar $at  = __webpack_require__(26)(true);\n\t\n\t// 21.1.3.27 String.prototype[@@iterator]()\n\t__webpack_require__(29)(String, 'String', function(iterated){\n\t  this._t = String(iterated); // target\n\t  this._i = 0;                // next index\n\t// 21.1.5.2.1 %StringIteratorPrototype%.next()\n\t}, function(){\n\t  var O     = this._t\n\t    , index = this._i\n\t    , point;\n\t  if(index >= O.length)return {value: undefined, done: true};\n\t  point = $at(O, index);\n\t  this._i += point.length;\n\t  return {value: point, done: false};\n\t});\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar toInteger = __webpack_require__(27)\n\t  , defined   = __webpack_require__(28);\n\t// true  -> String#at\n\t// false -> String#codePointAt\n\tmodule.exports = function(TO_STRING){\n\t  return function(that, pos){\n\t    var s = String(defined(that))\n\t      , i = toInteger(pos)\n\t      , l = s.length\n\t      , a, b;\n\t    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n\t    a = s.charCodeAt(i);\n\t    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n\t      ? TO_STRING ? s.charAt(i) : a\n\t      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n\t  };\n\t};\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\t// 7.1.4 ToInteger\n\tvar ceil  = Math.ceil\n\t  , floor = Math.floor;\n\tmodule.exports = function(it){\n\t  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n\t};\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\n\t// 7.2.1 RequireObjectCoercible(argument)\n\tmodule.exports = function(it){\n\t  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n\t  return it;\n\t};\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar LIBRARY        = __webpack_require__(30)\n\t  , $export        = __webpack_require__(4)\n\t  , redefine       = __webpack_require__(17)\n\t  , hide           = __webpack_require__(7)\n\t  , has            = __webpack_require__(18)\n\t  , Iterators      = __webpack_require__(31)\n\t  , $iterCreate    = __webpack_require__(32)\n\t  , setToStringTag = __webpack_require__(47)\n\t  , getPrototypeOf = __webpack_require__(49)\n\t  , ITERATOR       = __webpack_require__(48)('iterator')\n\t  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n\t  , FF_ITERATOR    = '@@iterator'\n\t  , KEYS           = 'keys'\n\t  , VALUES         = 'values';\n\t\n\tvar returnThis = function(){ return this; };\n\t\n\tmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n\t  $iterCreate(Constructor, NAME, next);\n\t  var getMethod = function(kind){\n\t    if(!BUGGY && kind in proto)return proto[kind];\n\t    switch(kind){\n\t      case KEYS: return function keys(){ return new Constructor(this, kind); };\n\t      case VALUES: return function values(){ return new Constructor(this, kind); };\n\t    } return function entries(){ return new Constructor(this, kind); };\n\t  };\n\t  var TAG        = NAME + ' Iterator'\n\t    , DEF_VALUES = DEFAULT == VALUES\n\t    , VALUES_BUG = false\n\t    , proto      = Base.prototype\n\t    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n\t    , $default   = $native || getMethod(DEFAULT)\n\t    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n\t    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n\t    , methods, key, IteratorPrototype;\n\t  // Fix native\n\t  if($anyNative){\n\t    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n\t    if(IteratorPrototype !== Object.prototype){\n\t      // Set @@toStringTag to native iterators\n\t      setToStringTag(IteratorPrototype, TAG, true);\n\t      // fix for some old engines\n\t      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n\t    }\n\t  }\n\t  // fix Array#{values, @@iterator}.name in V8 / FF\n\t  if(DEF_VALUES && $native && $native.name !== VALUES){\n\t    VALUES_BUG = true;\n\t    $default = function values(){ return $native.call(this); };\n\t  }\n\t  // Define iterator\n\t  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n\t    hide(proto, ITERATOR, $default);\n\t  }\n\t  // Plug for library\n\t  Iterators[NAME] = $default;\n\t  Iterators[TAG]  = returnThis;\n\t  if(DEFAULT){\n\t    methods = {\n\t      values:  DEF_VALUES ? $default : getMethod(VALUES),\n\t      keys:    IS_SET     ? $default : getMethod(KEYS),\n\t      entries: $entries\n\t    };\n\t    if(FORCED)for(key in methods){\n\t      if(!(key in proto))redefine(proto, key, methods[key]);\n\t    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n\t  }\n\t  return methods;\n\t};\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\tmodule.exports = false;\n\n/***/ },\n/* 31 */\n/***/ function(module, exports) {\n\n\tmodule.exports = {};\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar create         = __webpack_require__(33)\n\t  , descriptor     = __webpack_require__(16)\n\t  , setToStringTag = __webpack_require__(47)\n\t  , IteratorPrototype = {};\n\t\n\t// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n\t__webpack_require__(7)(IteratorPrototype, __webpack_require__(48)('iterator'), function(){ return this; });\n\t\n\tmodule.exports = function(Constructor, NAME, next){\n\t  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n\t  setToStringTag(Constructor, NAME + ' Iterator');\n\t};\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n\tvar anObject    = __webpack_require__(9)\n\t  , dPs         = __webpack_require__(34)\n\t  , enumBugKeys = __webpack_require__(45)\n\t  , IE_PROTO    = __webpack_require__(43)('IE_PROTO')\n\t  , Empty       = function(){ /* empty */ }\n\t  , PROTOTYPE   = 'prototype';\n\t\n\t// Create object with fake `null` prototype: use iframe Object with cleared prototype\n\tvar createDict = function(){\n\t  // Thrash, waste and sodomy: IE GC bug\n\t  var iframe = __webpack_require__(14)('iframe')\n\t    , i      = enumBugKeys.length\n\t    , lt     = '<'\n\t    , gt     = '>'\n\t    , iframeDocument;\n\t  iframe.style.display = 'none';\n\t  __webpack_require__(46).appendChild(iframe);\n\t  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n\t  // createDict = iframe.contentWindow.Object;\n\t  // html.removeChild(iframe);\n\t  iframeDocument = iframe.contentWindow.document;\n\t  iframeDocument.open();\n\t  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n\t  iframeDocument.close();\n\t  createDict = iframeDocument.F;\n\t  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n\t  return createDict();\n\t};\n\t\n\tmodule.exports = Object.create || function create(O, Properties){\n\t  var result;\n\t  if(O !== null){\n\t    Empty[PROTOTYPE] = anObject(O);\n\t    result = new Empty;\n\t    Empty[PROTOTYPE] = null;\n\t    // add \"__proto__\" for Object.getPrototypeOf polyfill\n\t    result[IE_PROTO] = O;\n\t  } else result = createDict();\n\t  return Properties === undefined ? result : dPs(result, Properties);\n\t};\n\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar dP       = __webpack_require__(8)\n\t  , anObject = __webpack_require__(9)\n\t  , getKeys  = __webpack_require__(35);\n\t\n\tmodule.exports = __webpack_require__(12) ? Object.defineProperties : function defineProperties(O, Properties){\n\t  anObject(O);\n\t  var keys   = getKeys(Properties)\n\t    , length = keys.length\n\t    , i = 0\n\t    , P;\n\t  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n\t  return O;\n\t};\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.14 / 15.2.3.14 Object.keys(O)\n\tvar $keys       = __webpack_require__(36)\n\t  , enumBugKeys = __webpack_require__(45);\n\t\n\tmodule.exports = Object.keys || function keys(O){\n\t  return $keys(O, enumBugKeys);\n\t};\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar has          = __webpack_require__(18)\n\t  , toIObject    = __webpack_require__(37)\n\t  , arrayIndexOf = __webpack_require__(40)(false)\n\t  , IE_PROTO     = __webpack_require__(43)('IE_PROTO');\n\t\n\tmodule.exports = function(object, names){\n\t  var O      = toIObject(object)\n\t    , i      = 0\n\t    , result = []\n\t    , key;\n\t  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n\t  // Don't enum bug & hidden keys\n\t  while(names.length > i)if(has(O, key = names[i++])){\n\t    ~arrayIndexOf(result, key) || result.push(key);\n\t  }\n\t  return result;\n\t};\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// to indexed object, toObject with fallback for non-array-like ES3 strings\n\tvar IObject = __webpack_require__(38)\n\t  , defined = __webpack_require__(28);\n\tmodule.exports = function(it){\n\t  return IObject(defined(it));\n\t};\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// fallback for non-array-like ES3 and non-enumerable old V8 strings\n\tvar cof = __webpack_require__(39);\n\tmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n\t  return cof(it) == 'String' ? it.split('') : Object(it);\n\t};\n\n/***/ },\n/* 39 */\n/***/ function(module, exports) {\n\n\tvar toString = {}.toString;\n\t\n\tmodule.exports = function(it){\n\t  return toString.call(it).slice(8, -1);\n\t};\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// false -> Array#indexOf\n\t// true  -> Array#includes\n\tvar toIObject = __webpack_require__(37)\n\t  , toLength  = __webpack_require__(41)\n\t  , toIndex   = __webpack_require__(42);\n\tmodule.exports = function(IS_INCLUDES){\n\t  return function($this, el, fromIndex){\n\t    var O      = toIObject($this)\n\t      , length = toLength(O.length)\n\t      , index  = toIndex(fromIndex, length)\n\t      , value;\n\t    // Array#includes uses SameValueZero equality algorithm\n\t    if(IS_INCLUDES && el != el)while(length > index){\n\t      value = O[index++];\n\t      if(value != value)return true;\n\t    // Array#toIndex ignores holes, Array#includes - not\n\t    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n\t      if(O[index] === el)return IS_INCLUDES || index || 0;\n\t    } return !IS_INCLUDES && -1;\n\t  };\n\t};\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.15 ToLength\n\tvar toInteger = __webpack_require__(27)\n\t  , min       = Math.min;\n\tmodule.exports = function(it){\n\t  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n\t};\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar toInteger = __webpack_require__(27)\n\t  , max       = Math.max\n\t  , min       = Math.min;\n\tmodule.exports = function(index, length){\n\t  index = toInteger(index);\n\t  return index < 0 ? max(index + length, 0) : min(index, length);\n\t};\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar shared = __webpack_require__(44)('keys')\n\t  , uid    = __webpack_require__(19);\n\tmodule.exports = function(key){\n\t  return shared[key] || (shared[key] = uid(key));\n\t};\n\n/***/ },\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global = __webpack_require__(5)\n\t  , SHARED = '__core-js_shared__'\n\t  , store  = global[SHARED] || (global[SHARED] = {});\n\tmodule.exports = function(key){\n\t  return store[key] || (store[key] = {});\n\t};\n\n/***/ },\n/* 45 */\n/***/ function(module, exports) {\n\n\t// IE 8- don't enum bug keys\n\tmodule.exports = (\n\t  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n\t).split(',');\n\n/***/ },\n/* 46 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(5).document && document.documentElement;\n\n/***/ },\n/* 47 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar def = __webpack_require__(8).f\n\t  , has = __webpack_require__(18)\n\t  , TAG = __webpack_require__(48)('toStringTag');\n\t\n\tmodule.exports = function(it, tag, stat){\n\t  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n\t};\n\n/***/ },\n/* 48 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar store      = __webpack_require__(44)('wks')\n\t  , uid        = __webpack_require__(19)\n\t  , Symbol     = __webpack_require__(5).Symbol\n\t  , USE_SYMBOL = typeof Symbol == 'function';\n\t\n\tvar $exports = module.exports = function(name){\n\t  return store[name] || (store[name] =\n\t    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n\t};\n\t\n\t$exports.store = store;\n\n/***/ },\n/* 49 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\n\tvar has         = __webpack_require__(18)\n\t  , toObject    = __webpack_require__(50)\n\t  , IE_PROTO    = __webpack_require__(43)('IE_PROTO')\n\t  , ObjectProto = Object.prototype;\n\t\n\tmodule.exports = Object.getPrototypeOf || function(O){\n\t  O = toObject(O);\n\t  if(has(O, IE_PROTO))return O[IE_PROTO];\n\t  if(typeof O.constructor == 'function' && O instanceof O.constructor){\n\t    return O.constructor.prototype;\n\t  } return O instanceof Object ? ObjectProto : null;\n\t};\n\n/***/ },\n/* 50 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.13 ToObject(argument)\n\tvar defined = __webpack_require__(28);\n\tmodule.exports = function(it){\n\t  return Object(defined(it));\n\t};\n\n/***/ },\n/* 51 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar ctx            = __webpack_require__(20)\n\t  , $export        = __webpack_require__(4)\n\t  , toObject       = __webpack_require__(50)\n\t  , call           = __webpack_require__(52)\n\t  , isArrayIter    = __webpack_require__(53)\n\t  , toLength       = __webpack_require__(41)\n\t  , createProperty = __webpack_require__(54)\n\t  , getIterFn      = __webpack_require__(55);\n\t\n\t$export($export.S + $export.F * !__webpack_require__(57)(function(iter){ Array.from(iter); }), 'Array', {\n\t  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n\t  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n\t    var O       = toObject(arrayLike)\n\t      , C       = typeof this == 'function' ? this : Array\n\t      , aLen    = arguments.length\n\t      , mapfn   = aLen > 1 ? arguments[1] : undefined\n\t      , mapping = mapfn !== undefined\n\t      , index   = 0\n\t      , iterFn  = getIterFn(O)\n\t      , length, result, step, iterator;\n\t    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n\t    // if object isn't iterable or it's array with default iterator - use simple case\n\t    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n\t      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n\t        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n\t      }\n\t    } else {\n\t      length = toLength(O.length);\n\t      for(result = new C(length); length > index; index++){\n\t        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n\t      }\n\t    }\n\t    result.length = index;\n\t    return result;\n\t  }\n\t});\n\n\n/***/ },\n/* 52 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// call something on iterator step with safe closing on error\n\tvar anObject = __webpack_require__(9);\n\tmodule.exports = function(iterator, fn, value, entries){\n\t  try {\n\t    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n\t  // 7.4.6 IteratorClose(iterator, completion)\n\t  } catch(e){\n\t    var ret = iterator['return'];\n\t    if(ret !== undefined)anObject(ret.call(iterator));\n\t    throw e;\n\t  }\n\t};\n\n/***/ },\n/* 53 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// check on default Array iterator\n\tvar Iterators  = __webpack_require__(31)\n\t  , ITERATOR   = __webpack_require__(48)('iterator')\n\t  , ArrayProto = Array.prototype;\n\t\n\tmodule.exports = function(it){\n\t  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n\t};\n\n/***/ },\n/* 54 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar $defineProperty = __webpack_require__(8)\n\t  , createDesc      = __webpack_require__(16);\n\t\n\tmodule.exports = function(object, index, value){\n\t  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\n\t  else object[index] = value;\n\t};\n\n/***/ },\n/* 55 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar classof   = __webpack_require__(56)\n\t  , ITERATOR  = __webpack_require__(48)('iterator')\n\t  , Iterators = __webpack_require__(31);\n\tmodule.exports = __webpack_require__(6).getIteratorMethod = function(it){\n\t  if(it != undefined)return it[ITERATOR]\n\t    || it['@@iterator']\n\t    || Iterators[classof(it)];\n\t};\n\n/***/ },\n/* 56 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// getting tag from 19.1.3.6 Object.prototype.toString()\n\tvar cof = __webpack_require__(39)\n\t  , TAG = __webpack_require__(48)('toStringTag')\n\t  // ES3 wrong here\n\t  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\t\n\t// fallback for IE11 Script Access Denied error\n\tvar tryGet = function(it, key){\n\t  try {\n\t    return it[key];\n\t  } catch(e){ /* empty */ }\n\t};\n\t\n\tmodule.exports = function(it){\n\t  var O, T, B;\n\t  return it === undefined ? 'Undefined' : it === null ? 'Null'\n\t    // @@toStringTag case\n\t    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n\t    // builtinTag case\n\t    : ARG ? cof(O)\n\t    // ES3 arguments fallback\n\t    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n\t};\n\n/***/ },\n/* 57 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ITERATOR     = __webpack_require__(48)('iterator')\n\t  , SAFE_CLOSING = false;\n\t\n\ttry {\n\t  var riter = [7][ITERATOR]();\n\t  riter['return'] = function(){ SAFE_CLOSING = true; };\n\t  Array.from(riter, function(){ throw 2; });\n\t} catch(e){ /* empty */ }\n\t\n\tmodule.exports = function(exec, skipClosing){\n\t  if(!skipClosing && !SAFE_CLOSING)return false;\n\t  var safe = false;\n\t  try {\n\t    var arr  = [7]\n\t      , iter = arr[ITERATOR]();\n\t    iter.next = function(){ return {done: safe = true}; };\n\t    arr[ITERATOR] = function(){ return iter; };\n\t    exec(arr);\n\t  } catch(e){ /* empty */ }\n\t  return safe;\n\t};\n\n/***/ },\n/* 58 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(59);\n\tmodule.exports = __webpack_require__(6).Array.isArray;\n\n/***/ },\n/* 59 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)\n\tvar $export = __webpack_require__(4);\n\t\n\t$export($export.S, 'Array', {isArray: __webpack_require__(60)});\n\n/***/ },\n/* 60 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.2.2 IsArray(argument)\n\tvar cof = __webpack_require__(39);\n\tmodule.exports = Array.isArray || function isArray(arg){\n\t  return cof(arg) == 'Array';\n\t};\n\n/***/ },\n/* 61 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(62);\n\t__webpack_require__(25);\n\t__webpack_require__(63);\n\t__webpack_require__(67);\n\t__webpack_require__(79);\n\tmodule.exports = __webpack_require__(6).Map;\n\n/***/ },\n/* 62 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t// 19.1.3.6 Object.prototype.toString()\n\tvar classof = __webpack_require__(56)\n\t  , test    = {};\n\ttest[__webpack_require__(48)('toStringTag')] = 'z';\n\tif(test + '' != '[object z]'){\n\t  __webpack_require__(17)(Object.prototype, 'toString', function toString(){\n\t    return '[object ' + classof(this) + ']';\n\t  }, true);\n\t}\n\n/***/ },\n/* 63 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $iterators    = __webpack_require__(64)\n\t  , redefine      = __webpack_require__(17)\n\t  , global        = __webpack_require__(5)\n\t  , hide          = __webpack_require__(7)\n\t  , Iterators     = __webpack_require__(31)\n\t  , wks           = __webpack_require__(48)\n\t  , ITERATOR      = wks('iterator')\n\t  , TO_STRING_TAG = wks('toStringTag')\n\t  , ArrayValues   = Iterators.Array;\n\t\n\tfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n\t  var NAME       = collections[i]\n\t    , Collection = global[NAME]\n\t    , proto      = Collection && Collection.prototype\n\t    , key;\n\t  if(proto){\n\t    if(!proto[ITERATOR])hide(proto, ITERATOR, ArrayValues);\n\t    if(!proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n\t    Iterators[NAME] = ArrayValues;\n\t    for(key in $iterators)if(!proto[key])redefine(proto, key, $iterators[key], true);\n\t  }\n\t}\n\n/***/ },\n/* 64 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar addToUnscopables = __webpack_require__(65)\n\t  , step             = __webpack_require__(66)\n\t  , Iterators        = __webpack_require__(31)\n\t  , toIObject        = __webpack_require__(37);\n\t\n\t// 22.1.3.4 Array.prototype.entries()\n\t// 22.1.3.13 Array.prototype.keys()\n\t// 22.1.3.29 Array.prototype.values()\n\t// 22.1.3.30 Array.prototype[@@iterator]()\n\tmodule.exports = __webpack_require__(29)(Array, 'Array', function(iterated, kind){\n\t  this._t = toIObject(iterated); // target\n\t  this._i = 0;                   // next index\n\t  this._k = kind;                // kind\n\t// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n\t}, function(){\n\t  var O     = this._t\n\t    , kind  = this._k\n\t    , index = this._i++;\n\t  if(!O || index >= O.length){\n\t    this._t = undefined;\n\t    return step(1);\n\t  }\n\t  if(kind == 'keys'  )return step(0, index);\n\t  if(kind == 'values')return step(0, O[index]);\n\t  return step(0, [index, O[index]]);\n\t}, 'values');\n\t\n\t// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\n\tIterators.Arguments = Iterators.Array;\n\t\n\taddToUnscopables('keys');\n\taddToUnscopables('values');\n\taddToUnscopables('entries');\n\n/***/ },\n/* 65 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 22.1.3.31 Array.prototype[@@unscopables]\n\tvar UNSCOPABLES = __webpack_require__(48)('unscopables')\n\t  , ArrayProto  = Array.prototype;\n\tif(ArrayProto[UNSCOPABLES] == undefined)__webpack_require__(7)(ArrayProto, UNSCOPABLES, {});\n\tmodule.exports = function(key){\n\t  ArrayProto[UNSCOPABLES][key] = true;\n\t};\n\n/***/ },\n/* 66 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(done, value){\n\t  return {value: value, done: !!done};\n\t};\n\n/***/ },\n/* 67 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar strong = __webpack_require__(68);\n\t\n\t// 23.1 Map Objects\n\tmodule.exports = __webpack_require__(74)('Map', function(get){\n\t  return function Map(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n\t}, {\n\t  // 23.1.3.6 Map.prototype.get(key)\n\t  get: function get(key){\n\t    var entry = strong.getEntry(this, key);\n\t    return entry && entry.v;\n\t  },\n\t  // 23.1.3.9 Map.prototype.set(key, value)\n\t  set: function set(key, value){\n\t    return strong.def(this, key === 0 ? 0 : key, value);\n\t  }\n\t}, strong, true);\n\n/***/ },\n/* 68 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar dP          = __webpack_require__(8).f\n\t  , create      = __webpack_require__(33)\n\t  , redefineAll = __webpack_require__(69)\n\t  , ctx         = __webpack_require__(20)\n\t  , anInstance  = __webpack_require__(70)\n\t  , defined     = __webpack_require__(28)\n\t  , forOf       = __webpack_require__(71)\n\t  , $iterDefine = __webpack_require__(29)\n\t  , step        = __webpack_require__(66)\n\t  , setSpecies  = __webpack_require__(72)\n\t  , DESCRIPTORS = __webpack_require__(12)\n\t  , fastKey     = __webpack_require__(73).fastKey\n\t  , SIZE        = DESCRIPTORS ? '_s' : 'size';\n\t\n\tvar getEntry = function(that, key){\n\t  // fast case\n\t  var index = fastKey(key), entry;\n\t  if(index !== 'F')return that._i[index];\n\t  // frozen object case\n\t  for(entry = that._f; entry; entry = entry.n){\n\t    if(entry.k == key)return entry;\n\t  }\n\t};\n\t\n\tmodule.exports = {\n\t  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n\t    var C = wrapper(function(that, iterable){\n\t      anInstance(that, C, NAME, '_i');\n\t      that._i = create(null); // index\n\t      that._f = undefined;    // first entry\n\t      that._l = undefined;    // last entry\n\t      that[SIZE] = 0;         // size\n\t      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n\t    });\n\t    redefineAll(C.prototype, {\n\t      // 23.1.3.1 Map.prototype.clear()\n\t      // 23.2.3.2 Set.prototype.clear()\n\t      clear: function clear(){\n\t        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n\t          entry.r = true;\n\t          if(entry.p)entry.p = entry.p.n = undefined;\n\t          delete data[entry.i];\n\t        }\n\t        that._f = that._l = undefined;\n\t        that[SIZE] = 0;\n\t      },\n\t      // 23.1.3.3 Map.prototype.delete(key)\n\t      // 23.2.3.4 Set.prototype.delete(value)\n\t      'delete': function(key){\n\t        var that  = this\n\t          , entry = getEntry(that, key);\n\t        if(entry){\n\t          var next = entry.n\n\t            , prev = entry.p;\n\t          delete that._i[entry.i];\n\t          entry.r = true;\n\t          if(prev)prev.n = next;\n\t          if(next)next.p = prev;\n\t          if(that._f == entry)that._f = next;\n\t          if(that._l == entry)that._l = prev;\n\t          that[SIZE]--;\n\t        } return !!entry;\n\t      },\n\t      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n\t      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n\t      forEach: function forEach(callbackfn /*, that = undefined */){\n\t        anInstance(this, C, 'forEach');\n\t        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n\t          , entry;\n\t        while(entry = entry ? entry.n : this._f){\n\t          f(entry.v, entry.k, this);\n\t          // revert to the last existing entry\n\t          while(entry && entry.r)entry = entry.p;\n\t        }\n\t      },\n\t      // 23.1.3.7 Map.prototype.has(key)\n\t      // 23.2.3.7 Set.prototype.has(value)\n\t      has: function has(key){\n\t        return !!getEntry(this, key);\n\t      }\n\t    });\n\t    if(DESCRIPTORS)dP(C.prototype, 'size', {\n\t      get: function(){\n\t        return defined(this[SIZE]);\n\t      }\n\t    });\n\t    return C;\n\t  },\n\t  def: function(that, key, value){\n\t    var entry = getEntry(that, key)\n\t      , prev, index;\n\t    // change existing entry\n\t    if(entry){\n\t      entry.v = value;\n\t    // create new entry\n\t    } else {\n\t      that._l = entry = {\n\t        i: index = fastKey(key, true), // <- index\n\t        k: key,                        // <- key\n\t        v: value,                      // <- value\n\t        p: prev = that._l,             // <- previous entry\n\t        n: undefined,                  // <- next entry\n\t        r: false                       // <- removed\n\t      };\n\t      if(!that._f)that._f = entry;\n\t      if(prev)prev.n = entry;\n\t      that[SIZE]++;\n\t      // add to index\n\t      if(index !== 'F')that._i[index] = entry;\n\t    } return that;\n\t  },\n\t  getEntry: getEntry,\n\t  setStrong: function(C, NAME, IS_MAP){\n\t    // add .keys, .values, .entries, [@@iterator]\n\t    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n\t    $iterDefine(C, NAME, function(iterated, kind){\n\t      this._t = iterated;  // target\n\t      this._k = kind;      // kind\n\t      this._l = undefined; // previous\n\t    }, function(){\n\t      var that  = this\n\t        , kind  = that._k\n\t        , entry = that._l;\n\t      // revert to the last existing entry\n\t      while(entry && entry.r)entry = entry.p;\n\t      // get next entry\n\t      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n\t        // or finish the iteration\n\t        that._t = undefined;\n\t        return step(1);\n\t      }\n\t      // return step by kind\n\t      if(kind == 'keys'  )return step(0, entry.k);\n\t      if(kind == 'values')return step(0, entry.v);\n\t      return step(0, [entry.k, entry.v]);\n\t    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\t\n\t    // add [@@species], 23.1.2.2, 23.2.2.2\n\t    setSpecies(NAME);\n\t  }\n\t};\n\n/***/ },\n/* 69 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar redefine = __webpack_require__(17);\n\tmodule.exports = function(target, src, safe){\n\t  for(var key in src)redefine(target, key, src[key], safe);\n\t  return target;\n\t};\n\n/***/ },\n/* 70 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it, Constructor, name, forbiddenField){\n\t  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n\t    throw TypeError(name + ': incorrect invocation!');\n\t  } return it;\n\t};\n\n/***/ },\n/* 71 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ctx         = __webpack_require__(20)\n\t  , call        = __webpack_require__(52)\n\t  , isArrayIter = __webpack_require__(53)\n\t  , anObject    = __webpack_require__(9)\n\t  , toLength    = __webpack_require__(41)\n\t  , getIterFn   = __webpack_require__(55)\n\t  , BREAK       = {}\n\t  , RETURN      = {};\n\tvar exports = module.exports = function(iterable, entries, fn, that, ITERATOR){\n\t  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n\t    , f      = ctx(fn, that, entries ? 2 : 1)\n\t    , index  = 0\n\t    , length, step, iterator, result;\n\t  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n\t  // fast case for arrays with default iterator\n\t  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n\t    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n\t    if(result === BREAK || result === RETURN)return result;\n\t  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n\t    result = call(iterator, f, step.value, entries);\n\t    if(result === BREAK || result === RETURN)return result;\n\t  }\n\t};\n\texports.BREAK  = BREAK;\n\texports.RETURN = RETURN;\n\n/***/ },\n/* 72 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar global      = __webpack_require__(5)\n\t  , dP          = __webpack_require__(8)\n\t  , DESCRIPTORS = __webpack_require__(12)\n\t  , SPECIES     = __webpack_require__(48)('species');\n\t\n\tmodule.exports = function(KEY){\n\t  var C = global[KEY];\n\t  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n\t    configurable: true,\n\t    get: function(){ return this; }\n\t  });\n\t};\n\n/***/ },\n/* 73 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar META     = __webpack_require__(19)('meta')\n\t  , isObject = __webpack_require__(10)\n\t  , has      = __webpack_require__(18)\n\t  , setDesc  = __webpack_require__(8).f\n\t  , id       = 0;\n\tvar isExtensible = Object.isExtensible || function(){\n\t  return true;\n\t};\n\tvar FREEZE = !__webpack_require__(13)(function(){\n\t  return isExtensible(Object.preventExtensions({}));\n\t});\n\tvar setMeta = function(it){\n\t  setDesc(it, META, {value: {\n\t    i: 'O' + ++id, // object ID\n\t    w: {}          // weak collections IDs\n\t  }});\n\t};\n\tvar fastKey = function(it, create){\n\t  // return primitive with prefix\n\t  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n\t  if(!has(it, META)){\n\t    // can't set metadata to uncaught frozen object\n\t    if(!isExtensible(it))return 'F';\n\t    // not necessary to add metadata\n\t    if(!create)return 'E';\n\t    // add missing metadata\n\t    setMeta(it);\n\t  // return object ID\n\t  } return it[META].i;\n\t};\n\tvar getWeak = function(it, create){\n\t  if(!has(it, META)){\n\t    // can't set metadata to uncaught frozen object\n\t    if(!isExtensible(it))return true;\n\t    // not necessary to add metadata\n\t    if(!create)return false;\n\t    // add missing metadata\n\t    setMeta(it);\n\t  // return hash weak collections IDs\n\t  } return it[META].w;\n\t};\n\t// add metadata on freeze-family methods calling\n\tvar onFreeze = function(it){\n\t  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n\t  return it;\n\t};\n\tvar meta = module.exports = {\n\t  KEY:      META,\n\t  NEED:     false,\n\t  fastKey:  fastKey,\n\t  getWeak:  getWeak,\n\t  onFreeze: onFreeze\n\t};\n\n/***/ },\n/* 74 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar global            = __webpack_require__(5)\n\t  , $export           = __webpack_require__(4)\n\t  , redefine          = __webpack_require__(17)\n\t  , redefineAll       = __webpack_require__(69)\n\t  , meta              = __webpack_require__(73)\n\t  , forOf             = __webpack_require__(71)\n\t  , anInstance        = __webpack_require__(70)\n\t  , isObject          = __webpack_require__(10)\n\t  , fails             = __webpack_require__(13)\n\t  , $iterDetect       = __webpack_require__(57)\n\t  , setToStringTag    = __webpack_require__(47)\n\t  , inheritIfRequired = __webpack_require__(75);\n\t\n\tmodule.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){\n\t  var Base  = global[NAME]\n\t    , C     = Base\n\t    , ADDER = IS_MAP ? 'set' : 'add'\n\t    , proto = C && C.prototype\n\t    , O     = {};\n\t  var fixMethod = function(KEY){\n\t    var fn = proto[KEY];\n\t    redefine(proto, KEY,\n\t      KEY == 'delete' ? function(a){\n\t        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n\t      } : KEY == 'has' ? function has(a){\n\t        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n\t      } : KEY == 'get' ? function get(a){\n\t        return IS_WEAK && !isObject(a) ? undefined : fn.call(this, a === 0 ? 0 : a);\n\t      } : KEY == 'add' ? function add(a){ fn.call(this, a === 0 ? 0 : a); return this; }\n\t        : function set(a, b){ fn.call(this, a === 0 ? 0 : a, b); return this; }\n\t    );\n\t  };\n\t  if(typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){\n\t    new C().entries().next();\n\t  }))){\n\t    // create collection constructor\n\t    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n\t    redefineAll(C.prototype, methods);\n\t    meta.NEED = true;\n\t  } else {\n\t    var instance             = new C\n\t      // early implementations not supports chaining\n\t      , HASNT_CHAINING       = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance\n\t      // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false\n\t      , THROWS_ON_PRIMITIVES = fails(function(){ instance.has(1); })\n\t      // most early implementations doesn't supports iterables, most modern - not close it correctly\n\t      , ACCEPT_ITERABLES     = $iterDetect(function(iter){ new C(iter); }) // eslint-disable-line no-new\n\t      // for early implementations -0 and +0 not the same\n\t      , BUGGY_ZERO = !IS_WEAK && fails(function(){\n\t        // V8 ~ Chromium 42- fails only with 5+ elements\n\t        var $instance = new C()\n\t          , index     = 5;\n\t        while(index--)$instance[ADDER](index, index);\n\t        return !$instance.has(-0);\n\t      });\n\t    if(!ACCEPT_ITERABLES){ \n\t      C = wrapper(function(target, iterable){\n\t        anInstance(target, C, NAME);\n\t        var that = inheritIfRequired(new Base, target, C);\n\t        if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n\t        return that;\n\t      });\n\t      C.prototype = proto;\n\t      proto.constructor = C;\n\t    }\n\t    if(THROWS_ON_PRIMITIVES || BUGGY_ZERO){\n\t      fixMethod('delete');\n\t      fixMethod('has');\n\t      IS_MAP && fixMethod('get');\n\t    }\n\t    if(BUGGY_ZERO || HASNT_CHAINING)fixMethod(ADDER);\n\t    // weak collections should not contains .clear method\n\t    if(IS_WEAK && proto.clear)delete proto.clear;\n\t  }\n\t\n\t  setToStringTag(C, NAME);\n\t\n\t  O[NAME] = C;\n\t  $export($export.G + $export.W + $export.F * (C != Base), O);\n\t\n\t  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);\n\t\n\t  return C;\n\t};\n\n/***/ },\n/* 75 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject       = __webpack_require__(10)\n\t  , setPrototypeOf = __webpack_require__(76).set;\n\tmodule.exports = function(that, target, C){\n\t  var P, S = target.constructor;\n\t  if(S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf){\n\t    setPrototypeOf(that, P);\n\t  } return that;\n\t};\n\n/***/ },\n/* 76 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Works with __proto__ only. Old v8 can't work with null proto objects.\n\t/* eslint-disable no-proto */\n\tvar isObject = __webpack_require__(10)\n\t  , anObject = __webpack_require__(9);\n\tvar check = function(O, proto){\n\t  anObject(O);\n\t  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n\t};\n\tmodule.exports = {\n\t  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n\t    function(test, buggy, set){\n\t      try {\n\t        set = __webpack_require__(20)(Function.call, __webpack_require__(77).f(Object.prototype, '__proto__').set, 2);\n\t        set(test, []);\n\t        buggy = !(test instanceof Array);\n\t      } catch(e){ buggy = true; }\n\t      return function setPrototypeOf(O, proto){\n\t        check(O, proto);\n\t        if(buggy)O.__proto__ = proto;\n\t        else set(O, proto);\n\t        return O;\n\t      };\n\t    }({}, false) : undefined),\n\t  check: check\n\t};\n\n/***/ },\n/* 77 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar pIE            = __webpack_require__(78)\n\t  , createDesc     = __webpack_require__(16)\n\t  , toIObject      = __webpack_require__(37)\n\t  , toPrimitive    = __webpack_require__(15)\n\t  , has            = __webpack_require__(18)\n\t  , IE8_DOM_DEFINE = __webpack_require__(11)\n\t  , gOPD           = Object.getOwnPropertyDescriptor;\n\t\n\texports.f = __webpack_require__(12) ? gOPD : function getOwnPropertyDescriptor(O, P){\n\t  O = toIObject(O);\n\t  P = toPrimitive(P, true);\n\t  if(IE8_DOM_DEFINE)try {\n\t    return gOPD(O, P);\n\t  } catch(e){ /* empty */ }\n\t  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\n\t};\n\n/***/ },\n/* 78 */\n/***/ function(module, exports) {\n\n\texports.f = {}.propertyIsEnumerable;\n\n/***/ },\n/* 79 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// https://github.com/DavidBruant/Map-Set.prototype.toJSON\n\tvar $export  = __webpack_require__(4);\n\t\n\t$export($export.P + $export.R, 'Map', {toJSON: __webpack_require__(80)('Map')});\n\n/***/ },\n/* 80 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// https://github.com/DavidBruant/Map-Set.prototype.toJSON\n\tvar classof = __webpack_require__(56)\n\t  , from    = __webpack_require__(81);\n\tmodule.exports = function(NAME){\n\t  return function toJSON(){\n\t    if(classof(this) != NAME)throw TypeError(NAME + \"#toJSON isn't generic\");\n\t    return from(this);\n\t  };\n\t};\n\n/***/ },\n/* 81 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar forOf = __webpack_require__(71);\n\t\n\tmodule.exports = function(iter, ITERATOR){\n\t  var result = [];\n\t  forOf(iter, false, result.push, result, ITERATOR);\n\t  return result;\n\t};\n\n\n/***/ },\n/* 82 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(62);\n\t__webpack_require__(25);\n\t__webpack_require__(63);\n\t__webpack_require__(83);\n\tmodule.exports = __webpack_require__(6).Promise;\n\n/***/ },\n/* 83 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar LIBRARY            = __webpack_require__(30)\n\t  , global             = __webpack_require__(5)\n\t  , ctx                = __webpack_require__(20)\n\t  , classof            = __webpack_require__(56)\n\t  , $export            = __webpack_require__(4)\n\t  , isObject           = __webpack_require__(10)\n\t  , aFunction          = __webpack_require__(21)\n\t  , anInstance         = __webpack_require__(70)\n\t  , forOf              = __webpack_require__(71)\n\t  , speciesConstructor = __webpack_require__(84)\n\t  , task               = __webpack_require__(85).set\n\t  , microtask          = __webpack_require__(86)()\n\t  , PROMISE            = 'Promise'\n\t  , TypeError          = global.TypeError\n\t  , process            = global.process\n\t  , $Promise           = global[PROMISE]\n\t  , process            = global.process\n\t  , isNode             = classof(process) == 'process'\n\t  , empty              = function(){ /* empty */ }\n\t  , Internal, GenericPromiseCapability, Wrapper;\n\t\n\tvar USE_NATIVE = !!function(){\n\t  try {\n\t    // correct subclassing with @@species support\n\t    var promise     = $Promise.resolve(1)\n\t      , FakePromise = (promise.constructor = {})[__webpack_require__(48)('species')] = function(exec){ exec(empty, empty); };\n\t    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n\t    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n\t  } catch(e){ /* empty */ }\n\t}();\n\t\n\t// helpers\n\tvar sameConstructor = function(a, b){\n\t  // with library wrapper special case\n\t  return a === b || a === $Promise && b === Wrapper;\n\t};\n\tvar isThenable = function(it){\n\t  var then;\n\t  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n\t};\n\tvar newPromiseCapability = function(C){\n\t  return sameConstructor($Promise, C)\n\t    ? new PromiseCapability(C)\n\t    : new GenericPromiseCapability(C);\n\t};\n\tvar PromiseCapability = GenericPromiseCapability = function(C){\n\t  var resolve, reject;\n\t  this.promise = new C(function($$resolve, $$reject){\n\t    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n\t    resolve = $$resolve;\n\t    reject  = $$reject;\n\t  });\n\t  this.resolve = aFunction(resolve);\n\t  this.reject  = aFunction(reject);\n\t};\n\tvar perform = function(exec){\n\t  try {\n\t    exec();\n\t  } catch(e){\n\t    return {error: e};\n\t  }\n\t};\n\tvar notify = function(promise, isReject){\n\t  if(promise._n)return;\n\t  promise._n = true;\n\t  var chain = promise._c;\n\t  microtask(function(){\n\t    var value = promise._v\n\t      , ok    = promise._s == 1\n\t      , i     = 0;\n\t    var run = function(reaction){\n\t      var handler = ok ? reaction.ok : reaction.fail\n\t        , resolve = reaction.resolve\n\t        , reject  = reaction.reject\n\t        , domain  = reaction.domain\n\t        , result, then;\n\t      try {\n\t        if(handler){\n\t          if(!ok){\n\t            if(promise._h == 2)onHandleUnhandled(promise);\n\t            promise._h = 1;\n\t          }\n\t          if(handler === true)result = value;\n\t          else {\n\t            if(domain)domain.enter();\n\t            result = handler(value);\n\t            if(domain)domain.exit();\n\t          }\n\t          if(result === reaction.promise){\n\t            reject(TypeError('Promise-chain cycle'));\n\t          } else if(then = isThenable(result)){\n\t            then.call(result, resolve, reject);\n\t          } else resolve(result);\n\t        } else reject(value);\n\t      } catch(e){\n\t        reject(e);\n\t      }\n\t    };\n\t    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n\t    promise._c = [];\n\t    promise._n = false;\n\t    if(isReject && !promise._h)onUnhandled(promise);\n\t  });\n\t};\n\tvar onUnhandled = function(promise){\n\t  task.call(global, function(){\n\t    var value = promise._v\n\t      , abrupt, handler, console;\n\t    if(isUnhandled(promise)){\n\t      abrupt = perform(function(){\n\t        if(isNode){\n\t          process.emit('unhandledRejection', value, promise);\n\t        } else if(handler = global.onunhandledrejection){\n\t          handler({promise: promise, reason: value});\n\t        } else if((console = global.console) && console.error){\n\t          console.error('Unhandled promise rejection', value);\n\t        }\n\t      });\n\t      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n\t      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n\t    } promise._a = undefined;\n\t    if(abrupt)throw abrupt.error;\n\t  });\n\t};\n\tvar isUnhandled = function(promise){\n\t  if(promise._h == 1)return false;\n\t  var chain = promise._a || promise._c\n\t    , i     = 0\n\t    , reaction;\n\t  while(chain.length > i){\n\t    reaction = chain[i++];\n\t    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n\t  } return true;\n\t};\n\tvar onHandleUnhandled = function(promise){\n\t  task.call(global, function(){\n\t    var handler;\n\t    if(isNode){\n\t      process.emit('rejectionHandled', promise);\n\t    } else if(handler = global.onrejectionhandled){\n\t      handler({promise: promise, reason: promise._v});\n\t    }\n\t  });\n\t};\n\tvar $reject = function(value){\n\t  var promise = this;\n\t  if(promise._d)return;\n\t  promise._d = true;\n\t  promise = promise._w || promise; // unwrap\n\t  promise._v = value;\n\t  promise._s = 2;\n\t  if(!promise._a)promise._a = promise._c.slice();\n\t  notify(promise, true);\n\t};\n\tvar $resolve = function(value){\n\t  var promise = this\n\t    , then;\n\t  if(promise._d)return;\n\t  promise._d = true;\n\t  promise = promise._w || promise; // unwrap\n\t  try {\n\t    if(promise === value)throw TypeError(\"Promise can't be resolved itself\");\n\t    if(then = isThenable(value)){\n\t      microtask(function(){\n\t        var wrapper = {_w: promise, _d: false}; // wrap\n\t        try {\n\t          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n\t        } catch(e){\n\t          $reject.call(wrapper, e);\n\t        }\n\t      });\n\t    } else {\n\t      promise._v = value;\n\t      promise._s = 1;\n\t      notify(promise, false);\n\t    }\n\t  } catch(e){\n\t    $reject.call({_w: promise, _d: false}, e); // wrap\n\t  }\n\t};\n\t\n\t// constructor polyfill\n\tif(!USE_NATIVE){\n\t  // 25.4.3.1 Promise(executor)\n\t  $Promise = function Promise(executor){\n\t    anInstance(this, $Promise, PROMISE, '_h');\n\t    aFunction(executor);\n\t    Internal.call(this);\n\t    try {\n\t      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n\t    } catch(err){\n\t      $reject.call(this, err);\n\t    }\n\t  };\n\t  Internal = function Promise(executor){\n\t    this._c = [];             // <- awaiting reactions\n\t    this._a = undefined;      // <- checked in isUnhandled reactions\n\t    this._s = 0;              // <- state\n\t    this._d = false;          // <- done\n\t    this._v = undefined;      // <- value\n\t    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n\t    this._n = false;          // <- notify\n\t  };\n\t  Internal.prototype = __webpack_require__(69)($Promise.prototype, {\n\t    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n\t    then: function then(onFulfilled, onRejected){\n\t      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));\n\t      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;\n\t      reaction.fail   = typeof onRejected == 'function' && onRejected;\n\t      reaction.domain = isNode ? process.domain : undefined;\n\t      this._c.push(reaction);\n\t      if(this._a)this._a.push(reaction);\n\t      if(this._s)notify(this, false);\n\t      return reaction.promise;\n\t    },\n\t    // 25.4.5.1 Promise.prototype.catch(onRejected)\n\t    'catch': function(onRejected){\n\t      return this.then(undefined, onRejected);\n\t    }\n\t  });\n\t  PromiseCapability = function(){\n\t    var promise  = new Internal;\n\t    this.promise = promise;\n\t    this.resolve = ctx($resolve, promise, 1);\n\t    this.reject  = ctx($reject, promise, 1);\n\t  };\n\t}\n\t\n\t$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});\n\t__webpack_require__(47)($Promise, PROMISE);\n\t__webpack_require__(72)(PROMISE);\n\tWrapper = __webpack_require__(6)[PROMISE];\n\t\n\t// statics\n\t$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n\t  // 25.4.4.5 Promise.reject(r)\n\t  reject: function reject(r){\n\t    var capability = newPromiseCapability(this)\n\t      , $$reject   = capability.reject;\n\t    $$reject(r);\n\t    return capability.promise;\n\t  }\n\t});\n\t$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n\t  // 25.4.4.6 Promise.resolve(x)\n\t  resolve: function resolve(x){\n\t    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n\t    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;\n\t    var capability = newPromiseCapability(this)\n\t      , $$resolve  = capability.resolve;\n\t    $$resolve(x);\n\t    return capability.promise;\n\t  }\n\t});\n\t$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(57)(function(iter){\n\t  $Promise.all(iter)['catch'](empty);\n\t})), PROMISE, {\n\t  // 25.4.4.1 Promise.all(iterable)\n\t  all: function all(iterable){\n\t    var C          = this\n\t      , capability = newPromiseCapability(C)\n\t      , resolve    = capability.resolve\n\t      , reject     = capability.reject;\n\t    var abrupt = perform(function(){\n\t      var values    = []\n\t        , index     = 0\n\t        , remaining = 1;\n\t      forOf(iterable, false, function(promise){\n\t        var $index        = index++\n\t          , alreadyCalled = false;\n\t        values.push(undefined);\n\t        remaining++;\n\t        C.resolve(promise).then(function(value){\n\t          if(alreadyCalled)return;\n\t          alreadyCalled  = true;\n\t          values[$index] = value;\n\t          --remaining || resolve(values);\n\t        }, reject);\n\t      });\n\t      --remaining || resolve(values);\n\t    });\n\t    if(abrupt)reject(abrupt.error);\n\t    return capability.promise;\n\t  },\n\t  // 25.4.4.4 Promise.race(iterable)\n\t  race: function race(iterable){\n\t    var C          = this\n\t      , capability = newPromiseCapability(C)\n\t      , reject     = capability.reject;\n\t    var abrupt = perform(function(){\n\t      forOf(iterable, false, function(promise){\n\t        C.resolve(promise).then(capability.resolve, reject);\n\t      });\n\t    });\n\t    if(abrupt)reject(abrupt.error);\n\t    return capability.promise;\n\t  }\n\t});\n\n/***/ },\n/* 84 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.3.20 SpeciesConstructor(O, defaultConstructor)\n\tvar anObject  = __webpack_require__(9)\n\t  , aFunction = __webpack_require__(21)\n\t  , SPECIES   = __webpack_require__(48)('species');\n\tmodule.exports = function(O, D){\n\t  var C = anObject(O).constructor, S;\n\t  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n\t};\n\n/***/ },\n/* 85 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ctx                = __webpack_require__(20)\n\t  , invoke             = __webpack_require__(23)\n\t  , html               = __webpack_require__(46)\n\t  , cel                = __webpack_require__(14)\n\t  , global             = __webpack_require__(5)\n\t  , process            = global.process\n\t  , setTask            = global.setImmediate\n\t  , clearTask          = global.clearImmediate\n\t  , MessageChannel     = global.MessageChannel\n\t  , counter            = 0\n\t  , queue              = {}\n\t  , ONREADYSTATECHANGE = 'onreadystatechange'\n\t  , defer, channel, port;\n\tvar run = function(){\n\t  var id = +this;\n\t  if(queue.hasOwnProperty(id)){\n\t    var fn = queue[id];\n\t    delete queue[id];\n\t    fn();\n\t  }\n\t};\n\tvar listener = function(event){\n\t  run.call(event.data);\n\t};\n\t// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\n\tif(!setTask || !clearTask){\n\t  setTask = function setImmediate(fn){\n\t    var args = [], i = 1;\n\t    while(arguments.length > i)args.push(arguments[i++]);\n\t    queue[++counter] = function(){\n\t      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n\t    };\n\t    defer(counter);\n\t    return counter;\n\t  };\n\t  clearTask = function clearImmediate(id){\n\t    delete queue[id];\n\t  };\n\t  // Node.js 0.8-\n\t  if(__webpack_require__(39)(process) == 'process'){\n\t    defer = function(id){\n\t      process.nextTick(ctx(run, id, 1));\n\t    };\n\t  // Browsers with MessageChannel, includes WebWorkers\n\t  } else if(MessageChannel){\n\t    channel = new MessageChannel;\n\t    port    = channel.port2;\n\t    channel.port1.onmessage = listener;\n\t    defer = ctx(port.postMessage, port, 1);\n\t  // Browsers with postMessage, skip WebWorkers\n\t  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n\t  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n\t    defer = function(id){\n\t      global.postMessage(id + '', '*');\n\t    };\n\t    global.addEventListener('message', listener, false);\n\t  // IE8-\n\t  } else if(ONREADYSTATECHANGE in cel('script')){\n\t    defer = function(id){\n\t      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n\t        html.removeChild(this);\n\t        run.call(id);\n\t      };\n\t    };\n\t  // Rest old browsers\n\t  } else {\n\t    defer = function(id){\n\t      setTimeout(ctx(run, id, 1), 0);\n\t    };\n\t  }\n\t}\n\tmodule.exports = {\n\t  set:   setTask,\n\t  clear: clearTask\n\t};\n\n/***/ },\n/* 86 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global    = __webpack_require__(5)\n\t  , macrotask = __webpack_require__(85).set\n\t  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n\t  , process   = global.process\n\t  , Promise   = global.Promise\n\t  , isNode    = __webpack_require__(39)(process) == 'process';\n\t\n\tmodule.exports = function(){\n\t  var head, last, notify;\n\t\n\t  var flush = function(){\n\t    var parent, fn;\n\t    if(isNode && (parent = process.domain))parent.exit();\n\t    while(head){\n\t      fn   = head.fn;\n\t      head = head.next;\n\t      try {\n\t        fn();\n\t      } catch(e){\n\t        if(head)notify();\n\t        else last = undefined;\n\t        throw e;\n\t      }\n\t    } last = undefined;\n\t    if(parent)parent.enter();\n\t  };\n\t\n\t  // Node.js\n\t  if(isNode){\n\t    notify = function(){\n\t      process.nextTick(flush);\n\t    };\n\t  // browsers with MutationObserver\n\t  } else if(Observer){\n\t    var toggle = true\n\t      , node   = document.createTextNode('');\n\t    new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n\t    notify = function(){\n\t      node.data = toggle = !toggle;\n\t    };\n\t  // environments with maybe non-completely correct, but existent Promise\n\t  } else if(Promise && Promise.resolve){\n\t    var promise = Promise.resolve();\n\t    notify = function(){\n\t      promise.then(flush);\n\t    };\n\t  // for other environments - macrotask based on:\n\t  // - setImmediate\n\t  // - MessageChannel\n\t  // - window.postMessag\n\t  // - onreadystatechange\n\t  // - setTimeout\n\t  } else {\n\t    notify = function(){\n\t      // strange IE + webpack dev server bug - use .call(global)\n\t      macrotask.call(global, flush);\n\t    };\n\t  }\n\t\n\t  return function(fn){\n\t    var task = {fn: fn, next: undefined};\n\t    if(last)last.next = task;\n\t    if(!head){\n\t      head = task;\n\t      notify();\n\t    } last = task;\n\t  };\n\t};\n\n/***/ },\n/* 87 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\t// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n\t(function () {\n\t\n\t  if (typeof window.CustomEvent === \"function\") return false;\n\t\n\t  function CustomEvent(event, params) {\n\t    params = params || { bubbles: false, cancelable: false, detail: undefined };\n\t    var evt = document.createEvent('CustomEvent');\n\t    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\t    return evt;\n\t  }\n\t\n\t  CustomEvent.prototype = window.Event.prototype;\n\t\n\t  window.CustomEvent = CustomEvent;\n\t})();\n\n/***/ },\n/* 88 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar catalog_business_1 = __webpack_require__(89);\n\tvar directory_business_1 = __webpack_require__(115);\n\tvar entity_1 = __webpack_require__(101);\n\tvar collection_1 = __webpack_require__(114);\n\tvar packageOptions = __webpack_require__(118);\n\tvar WakandaClient = (function () {\n\t    function WakandaClient(params) {\n\t        var host = typeof (params) === 'object' ? params.host : undefined;\n\t        var catalog = typeof (params) === 'object' ? params.catalog : undefined;\n\t        this._httpClient = new WakandaClient.HttpClient({\n\t            apiPrefix: (host || '')\n\t        });\n\t        this.catalog = catalog;\n\t        var directoryBusiness = new directory_business_1.default({\n\t            wakJSC: this\n\t        });\n\t        this.directory = {\n\t            login: function (username, password, duration) {\n\t                return directoryBusiness.login(username, password, duration);\n\t            },\n\t            logout: function () {\n\t                return directoryBusiness.logout();\n\t            },\n\t            currentUser: function () {\n\t                return directoryBusiness.currentUser();\n\t            },\n\t            currentUserBelongsTo: function (group) {\n\t                return directoryBusiness.currentUserBelongsTo(group);\n\t            }\n\t        };\n\t        this.helper = {\n\t            isEntity: function (object) {\n\t                return object instanceof entity_1.default;\n\t            },\n\t            isCollection: function (object) {\n\t                return object instanceof collection_1.default;\n\t            }\n\t        };\n\t    }\n\t    WakandaClient.prototype.getCatalog = function (dataClasses) {\n\t        var catalogBusiness = new catalog_business_1.default({\n\t            wakJSC: this\n\t        });\n\t        return catalogBusiness.get(dataClasses);\n\t    };\n\t    WakandaClient.prototype.version = function () {\n\t        return packageOptions.version;\n\t    };\n\t    return WakandaClient;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = WakandaClient;\n\n\n/***/ },\n/* 89 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar abstract_business_1 = __webpack_require__(90);\n\tvar catalog_service_1 = __webpack_require__(91);\n\tvar catalog_1 = __webpack_require__(94);\n\tvar dataclass_1 = __webpack_require__(95);\n\tvar dataclass_business_1 = __webpack_require__(96);\n\tvar CatalogBusiness = (function (_super) {\n\t    __extends(CatalogBusiness, _super);\n\t    function CatalogBusiness(obj) {\n\t        _super.call(this, obj);\n\t        this.service = new catalog_service_1.default({\n\t            wakJSC: this.wakJSC\n\t        });\n\t    }\n\t    CatalogBusiness.prototype.needDataClass = function (dcName) {\n\t        if (this.seenDataClasses.indexOf(dcName) === -1) {\n\t            this.seenDataClasses.push(dcName);\n\t        }\n\t    };\n\t    CatalogBusiness.prototype.get = function (dataClasses) {\n\t        var _this = this;\n\t        this.seenDataClasses = [];\n\t        return this.service.get(dataClasses).then(function (dataClassDBOArray) {\n\t            var dcArray = [];\n\t            for (var _i = 0, dataClassDBOArray_1 = dataClassDBOArray; _i < dataClassDBOArray_1.length; _i++) {\n\t                var dcDBO = dataClassDBOArray_1[_i];\n\t                var attributes = [];\n\t                var _loop_1 = function(attr) {\n\t                    switch (attr.kind) {\n\t                        case 'relatedEntity':\n\t                            attributes.push(new dataclass_1.AttributeRelated({\n\t                                name: attr.name,\n\t                                type: attr.type,\n\t                                kind: attr.kind\n\t                            }));\n\t                            _this.needDataClass(attr.type);\n\t                            break;\n\t                        case 'storage':\n\t                        case 'calculated':\n\t                        case 'alias':\n\t                            var readOnly = attr.readOnly || (attr.type === 'image' || attr.type === 'blob');\n\t                            var simpleDate = attr.simpleDate !== undefined ? attr.simpleDate : undefined;\n\t                            attributes.push(new dataclass_1.Attribute({\n\t                                name: attr.name,\n\t                                type: attr.type,\n\t                                readOnly: readOnly,\n\t                                kind: attr.kind,\n\t                                simpleDate: simpleDate\n\t                            }));\n\t                            break;\n\t                        case 'relatedEntities':\n\t                            var entityType_1;\n\t                            dataClassDBOArray.some(function (_dataClass) {\n\t                                if (_dataClass.collectionName === attr.type) {\n\t                                    entityType_1 = _dataClass.name;\n\t                                    return true;\n\t                                }\n\t                            });\n\t                            var attrCollection = new dataclass_1.AttributeCollection({\n\t                                name: attr.name,\n\t                                type: attr.type,\n\t                                kind: attr.kind,\n\t                                entityType: entityType_1\n\t                            });\n\t                            attributes.push(attrCollection);\n\t                            _this.needDataClass(attrCollection.entityType);\n\t                            break;\n\t                        default:\n\t                            throw new Error('[WakandaClient] Unhandled ' + attr.kind + ' attribute type');\n\t                    }\n\t                };\n\t                for (var _a = 0, _b = dcDBO.attributes; _a < _b.length; _a++) {\n\t                    var attr = _b[_a];\n\t                    _loop_1(attr);\n\t                }\n\t                var methods = {\n\t                    entity: [],\n\t                    collection: [],\n\t                    dataClass: []\n\t                };\n\t                for (var _c = 0, _d = dcDBO.methods; _c < _d.length; _c++) {\n\t                    var method = _d[_c];\n\t                    switch (method.applyTo) {\n\t                        case 'entity':\n\t                            methods.entity.push(method.name);\n\t                            break;\n\t                        case 'entityCollection':\n\t                            methods.collection.push(method.name);\n\t                            break;\n\t                        case 'dataClass':\n\t                            methods.dataClass.push(method.name);\n\t                            break;\n\t                        default:\n\t                            throw new Error('[WakandaClient] Unrecognized ' + method.applyTo + ' method type');\n\t                    }\n\t                }\n\t                var dataClass = new dataclass_1.DataClass({\n\t                    name: dcDBO.name,\n\t                    collectionName: dcDBO.collectionName,\n\t                    attributes: attributes,\n\t                    methods: methods\n\t                });\n\t                //Binding framework methods to the dataclass\n\t                var dataClassBusiness = new dataclass_business_1.default({\n\t                    wakJSC: _this.wakJSC,\n\t                    dataClass: dataClass,\n\t                    methods: methods,\n\t                    dataURI: dcDBO.dataURI\n\t                });\n\t                dataClassBusiness._decorateDataClass();\n\t                dcArray.push(dataClass);\n\t            }\n\t            var catalog = new catalog_1.default({\n\t                dataClasses: dcArray\n\t            });\n\t            //Check if we have all needed dataClasses on the catalog\n\t            for (var _e = 0, _f = _this.seenDataClasses; _e < _f.length; _e++) {\n\t                var dcName = _f[_e];\n\t                if (!catalog[dcName]) {\n\t                    throw new Error('Needed ' + dcName + ' dataClass is not present on catalog');\n\t                }\n\t            }\n\t            return catalog;\n\t        });\n\t    };\n\t    return CatalogBusiness;\n\t}(abstract_business_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = CatalogBusiness;\n\n\n/***/ },\n/* 90 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar AbstractBusiness = (function () {\n\t    function AbstractBusiness(_a) {\n\t        var wakJSC = _a.wakJSC;\n\t        this.wakJSC = wakJSC;\n\t    }\n\t    return AbstractBusiness;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = AbstractBusiness;\n\n\n/***/ },\n/* 91 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar abstract_service_1 = __webpack_require__(92);\n\tvar catalog_base_service_1 = __webpack_require__(93);\n\tvar CatalogService = (function (_super) {\n\t    __extends(CatalogService, _super);\n\t    function CatalogService() {\n\t        _super.apply(this, arguments);\n\t    }\n\t    CatalogService.prototype.get = function (dataClasses) {\n\t        return catalog_base_service_1.CatalogBaseService.get({\n\t            httpClient: this.httpClient,\n\t            dataClasses: dataClasses,\n\t            catalog: this.wakJSC.catalog\n\t        });\n\t    };\n\t    return CatalogService;\n\t}(abstract_service_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = CatalogService;\n\n\n/***/ },\n/* 92 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar AbstractService = (function () {\n\t    function AbstractService(_a) {\n\t        var wakJSC = _a.wakJSC;\n\t        this.wakJSC = wakJSC;\n\t        this.httpClient = wakJSC._httpClient;\n\t    }\n\t    return AbstractService;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = AbstractService;\n\n\n/***/ },\n/* 93 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar CatalogBaseService = (function () {\n\t    function CatalogBaseService() {\n\t    }\n\t    CatalogBaseService.get = function (_a) {\n\t        var httpClient = _a.httpClient, dataClasses = _a.dataClasses, catalog = _a.catalog;\n\t        var strDataclasses = '/';\n\t        if (Array.isArray(dataClasses)) {\n\t            strDataclasses += dataClasses.join();\n\t        }\n\t        else if (typeof dataClasses === 'undefined') {\n\t            strDataclasses += '$all';\n\t        }\n\t        else {\n\t            throw new Error('Catalog.get: first parameter should be an array');\n\t        }\n\t        var strCatalog = catalog ? '/' + catalog : '';\n\t        return httpClient.get({ uri: '/rest/$catalog' + strCatalog + strDataclasses })\n\t            .then(function (res) {\n\t            var catalog = [];\n\t            var rawObj = JSON.parse(res.body);\n\t            if (rawObj.dataClasses) {\n\t                for (var _i = 0, _a = rawObj.dataClasses; _i < _a.length; _i++) {\n\t                    var d = _a[_i];\n\t                    var attributes = [];\n\t                    if (d.attributes) {\n\t                        for (var _b = 0, _c = d.attributes; _b < _c.length; _b++) {\n\t                            var attr = _c[_b];\n\t                            attributes.push({\n\t                                name: attr.name,\n\t                                kind: attr.kind,\n\t                                type: attr.type,\n\t                                readOnly: attr.readOnly,\n\t                                simpleDate: attr.simpleDate === undefined ? undefined : attr.simpleDate\n\t                            });\n\t                        }\n\t                    }\n\t                    var methods = [];\n\t                    if (d.methods) {\n\t                        for (var _d = 0, _e = d.methods; _d < _e.length; _d++) {\n\t                            var m = _e[_d];\n\t                            methods.push({\n\t                                name: m.name,\n\t                                applyTo: m.applyTo\n\t                            });\n\t                        }\n\t                    }\n\t                    catalog.push({\n\t                        name: d.name,\n\t                        collectionName: d.collectionName,\n\t                        attributes: attributes,\n\t                        methods: methods,\n\t                        dataURI: d.dataURI\n\t                    });\n\t                }\n\t            }\n\t            return catalog;\n\t        });\n\t    };\n\t    return CatalogBaseService;\n\t}());\n\texports.CatalogBaseService = CatalogBaseService;\n\n\n/***/ },\n/* 94 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar Catalog = (function () {\n\t    function Catalog(_a) {\n\t        var dataClasses = _a.dataClasses;\n\t        for (var _i = 0, dataClasses_1 = dataClasses; _i < dataClasses_1.length; _i++) {\n\t            var dc = dataClasses_1[_i];\n\t            this[dc.name] = dc;\n\t        }\n\t    }\n\t    return Catalog;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Catalog;\n\n\n/***/ },\n/* 95 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar DataClass = (function () {\n\t    function DataClass(_a) {\n\t        var name = _a.name, collectionName = _a.collectionName, attributes = _a.attributes, methods = _a.methods;\n\t        this.name = name;\n\t        this.collectionName = collectionName;\n\t        this.attributes = attributes;\n\t        this.methods = methods;\n\t    }\n\t    return DataClass;\n\t}());\n\texports.DataClass = DataClass;\n\tvar Attribute = (function () {\n\t    function Attribute(_a) {\n\t        var name = _a.name, type = _a.type, readOnly = _a.readOnly, kind = _a.kind, simpleDate = _a.simpleDate;\n\t        this.name = name;\n\t        this.type = type;\n\t        this.readOnly = readOnly === true;\n\t        this.kind = kind;\n\t        this.simpleDate = simpleDate;\n\t    }\n\t    return Attribute;\n\t}());\n\texports.Attribute = Attribute;\n\tvar AttributeRelated = (function (_super) {\n\t    __extends(AttributeRelated, _super);\n\t    function AttributeRelated() {\n\t        _super.apply(this, arguments);\n\t    }\n\t    return AttributeRelated;\n\t}(Attribute));\n\texports.AttributeRelated = AttributeRelated;\n\tvar AttributeCollection = (function (_super) {\n\t    __extends(AttributeCollection, _super);\n\t    function AttributeCollection(_a) {\n\t        var name = _a.name, type = _a.type, readOnly = _a.readOnly, kind = _a.kind, entityType = _a.entityType;\n\t        _super.call(this, { name: name, type: type, readOnly: readOnly, kind: kind });\n\t        this.entityType = entityType;\n\t    }\n\t    return AttributeCollection;\n\t}(Attribute));\n\texports.AttributeCollection = AttributeCollection;\n\n\n/***/ },\n/* 96 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar abstract_business_1 = __webpack_require__(90);\n\tvar entity_business_1 = __webpack_require__(97);\n\tvar dataclass_service_1 = __webpack_require__(105);\n\tvar collection_business_1 = __webpack_require__(107);\n\tvar media_business_1 = __webpack_require__(111);\n\tvar entity_1 = __webpack_require__(101);\n\tvar collection_1 = __webpack_require__(114);\n\tvar dataclass_1 = __webpack_require__(95);\n\tvar media_1 = __webpack_require__(103);\n\tvar const_1 = __webpack_require__(110);\n\tvar method_adapter_1 = __webpack_require__(102);\n\tvar util_1 = __webpack_require__(104);\n\t//This map stores all DataClassBusiness instances of existing dataClasses\n\tvar _dataClassBusinessMap = new Map();\n\tvar DataClassBusiness = (function (_super) {\n\t    __extends(DataClassBusiness, _super);\n\t    function DataClassBusiness(_a) {\n\t        var wakJSC = _a.wakJSC, dataClass = _a.dataClass, methods = _a.methods, dataURI = _a.dataURI;\n\t        _super.call(this, { wakJSC: wakJSC });\n\t        this.dataClass = dataClass;\n\t        this.methods = methods;\n\t        this.service = new dataclass_service_1.default({\n\t            wakJSC: this.wakJSC,\n\t            dataClassBusiness: this\n\t        });\n\t        this.dataURI = dataURI;\n\t        _dataClassBusinessMap.set(dataClass.name, this);\n\t        this._dataClassBusinessMap = _dataClassBusinessMap;\n\t    }\n\t    DataClassBusiness.prototype._decorateDataClass = function () {\n\t        //Do not forget to bind(this) to have \"this\" pointing on business instance\n\t        //instead of given dataclass instance\n\t        this.dataClass.find = this.find.bind(this);\n\t        this.dataClass.query = this.query.bind(this);\n\t        this.dataClass.create = this.create.bind(this);\n\t        this._addUserDefinedMethods();\n\t    };\n\t    DataClassBusiness.prototype._addUserDefinedMethods = function () {\n\t        var _this = this;\n\t        var self = this;\n\t        this.methods.dataClass.forEach(function (method) {\n\t            //Voluntary don't use fat arrow notation to use arguments object without a bug\n\t            _this.dataClass[method] = function () {\n\t                var params = Array.from(arguments);\n\t                return self.callMethod(method, params);\n\t            };\n\t        });\n\t    };\n\t    DataClassBusiness.prototype.callMethod = function (methodName, parameters) {\n\t        var _this = this;\n\t        return this.service.callMethod(methodName, parameters)\n\t            .then(function (obj) {\n\t            return method_adapter_1.MethodAdapter.transform(obj, _this._dataClassBusinessMap);\n\t        });\n\t    };\n\t    DataClassBusiness.prototype.find = function (id, options) {\n\t        var _this = this;\n\t        var opt = options || {};\n\t        if (opt.filter !== undefined || opt.params !== undefined || opt.pageSize !== undefined ||\n\t            opt.start !== undefined || opt.orderBy !== undefined) {\n\t            throw new Error('Dataclass.find: options filter, params, pageSize, start and orderBy are not allowed');\n\t        }\n\t        return this.service.find(id, opt).then(function (entity) {\n\t            return _this._presentationEntityFromDbo({\n\t                dbo: entity\n\t            });\n\t        });\n\t    };\n\t    DataClassBusiness.prototype.query = function (options) {\n\t        var _this = this;\n\t        var opt = options || {};\n\t        var initialSelect = opt.select;\n\t        if (opt.method && opt.method.length > 0) {\n\t            throw new Error('Dataclass.query: option method is not allowed');\n\t        }\n\t        if (!opt.pageSize) {\n\t            opt.pageSize = const_1.default.DEFAULT_PAGE_SIZE;\n\t        }\n\t        return this.service.query(opt).then(function (collection) {\n\t            return _this._presentationCollectionFromDbo({\n\t                dbo: collection,\n\t                pageSize: opt.pageSize,\n\t                initialSelect: initialSelect\n\t            });\n\t        });\n\t    };\n\t    DataClassBusiness.prototype.create = function (pojo) {\n\t        var entityToAttach = {};\n\t        if (pojo) {\n\t            for (var prop in pojo) {\n\t                if (pojo[prop] instanceof entity_1.default) {\n\t                    entityToAttach[prop] = pojo[prop];\n\t                    delete pojo[prop];\n\t                }\n\t            }\n\t        }\n\t        var entity = this._presentationEntityFromDbo({\n\t            dbo: pojo || {}\n\t        });\n\t        for (var prop in entityToAttach) {\n\t            if (Object.prototype.hasOwnProperty.call(entityToAttach, prop)) {\n\t                entity[prop] = entityToAttach[prop];\n\t            }\n\t        }\n\t        return entity;\n\t    };\n\t    DataClassBusiness.prototype._createEntity = function (_a) {\n\t        var key = _a.key, deferred = _a.deferred, dbo = _a.dbo;\n\t        var entity = new entity_1.default({\n\t            key: key,\n\t            deferred: deferred,\n\t            dataClass: this.dataClass\n\t        });\n\t        var business = new entity_business_1.default({\n\t            wakJSC: this.wakJSC,\n\t            dataClass: this.dataClass,\n\t            entity: entity,\n\t            dataClassBusiness: this\n\t        });\n\t        business._decorateEntity();\n\t        if (!deferred) {\n\t            this._populateEntityDataFromDbo({\n\t                dbo: dbo,\n\t                entity: entity\n\t            });\n\t            business._flashEntityValues();\n\t        }\n\t        return entity;\n\t    };\n\t    DataClassBusiness.prototype._createCollection = function (_a) {\n\t        var uri = _a.uri, deferred = _a.deferred, pageSize = _a.pageSize, initialSelect = _a.initialSelect;\n\t        var collection = new collection_1.default({\n\t            deferred: deferred,\n\t            dataClass: this.dataClass\n\t        });\n\t        var business = new collection_business_1.default({\n\t            wakJSC: this.wakJSC,\n\t            dataClass: this.dataClass,\n\t            dataClassBusiness: this,\n\t            collection: collection,\n\t            collectionUri: uri,\n\t            pageSize: pageSize,\n\t            initialSelect: initialSelect\n\t        });\n\t        business._decorateCollection();\n\t        return collection;\n\t    };\n\t    DataClassBusiness.prototype._createMedia = function (_a) {\n\t        var uri = _a.uri, isImage = _a.isImage, attributeName = _a.attributeName, entity = _a.entity;\n\t        var media = new media_1.default({ uri: uri });\n\t        var business = new media_business_1.default({\n\t            wakJSC: this.wakJSC,\n\t            media: media,\n\t            dataClassBusiness: this,\n\t            isImage: isImage,\n\t            attributeName: attributeName,\n\t            entity: entity\n\t        });\n\t        business._decorateMedia();\n\t        return media;\n\t    };\n\t    DataClassBusiness.prototype._populateEntityDataFromDbo = function (_a) {\n\t        var dbo = _a.dbo, entity = _a.entity;\n\t        entity._stamp = dbo.__STAMP;\n\t        for (var _i = 0, _b = this.dataClass.attributes; _i < _b.length; _i++) {\n\t            var attr = _b[_i];\n\t            var dboAttribute = dbo[attr.name];\n\t            if (dboAttribute !== null && dboAttribute !== undefined) {\n\t                if (attr instanceof dataclass_1.AttributeRelated) {\n\t                    //Kind of recursive call with a potententialy different instance of\n\t                    //DataClassBusiness\n\t                    var business = _dataClassBusinessMap.get(attr.type);\n\t                    entity[attr.name] = business._presentationEntityFromDbo({\n\t                        dbo: dboAttribute\n\t                    });\n\t                }\n\t                else if (attr instanceof dataclass_1.AttributeCollection) {\n\t                    var business = _dataClassBusinessMap.get(attr.entityType);\n\t                    entity[attr.name] = business._presentationCollectionFromDbo({\n\t                        dbo: dboAttribute\n\t                    });\n\t                }\n\t                else if (attr.type === 'image' || attr.type === 'blob') {\n\t                    var uri = void 0;\n\t                    if (dboAttribute && dboAttribute.__deferred && dboAttribute.__deferred.uri) {\n\t                        uri = dboAttribute.__deferred.uri;\n\t                    }\n\t                    else {\n\t                        uri = null;\n\t                    }\n\t                    entity[attr.name] = this._createMedia({\n\t                        uri: uri,\n\t                        isImage: attr.type === 'image',\n\t                        attributeName: attr.name,\n\t                        entity: entity\n\t                    });\n\t                }\n\t                else if (attr.type === 'date') {\n\t                    if (!dboAttribute) {\n\t                        entity[attr.name] = null;\n\t                    }\n\t                    else {\n\t                        entity[attr.name] = attr.simpleDate ? util_1.default.wakParseSimpleDate(dboAttribute) : new Date(dboAttribute);\n\t                    }\n\t                }\n\t                else {\n\t                    entity[attr.name] = dboAttribute;\n\t                }\n\t            }\n\t            else {\n\t                //Even if the property is null, we need a media for this kind of attributes\n\t                //to handle the upload part\n\t                if (attr.type === 'image' || attr.type === 'blob') {\n\t                    entity[attr.name] = this._createMedia({\n\t                        uri: null,\n\t                        isImage: attr.type === 'image',\n\t                        attributeName: attr.name,\n\t                        entity: entity\n\t                    });\n\t                }\n\t                else {\n\t                    entity[attr.name] = null;\n\t                }\n\t            }\n\t        }\n\t        return entity;\n\t    };\n\t    DataClassBusiness.prototype._presentationEntityFromDbo = function (_a) {\n\t        var dbo = _a.dbo;\n\t        var entity;\n\t        if (!dbo) {\n\t            entity = null;\n\t        }\n\t        if (dbo.__deferred) {\n\t            entity = this._createEntity({\n\t                key: dbo.__deferred.__KEY,\n\t                deferred: true\n\t            });\n\t        }\n\t        else {\n\t            entity = this._createEntity({\n\t                key: dbo.__KEY,\n\t                dbo: dbo\n\t            });\n\t        }\n\t        return entity;\n\t    };\n\t    DataClassBusiness.prototype._presentationCollectionFromDbo = function (_a) {\n\t        var dbo = _a.dbo, pageSize = _a.pageSize, initialSelect = _a.initialSelect;\n\t        var collection;\n\t        if (!dbo) {\n\t            collection = null;\n\t        }\n\t        else if (dbo.__deferred) {\n\t            collection = this._createCollection({\n\t                deferred: true,\n\t                uri: dbo.__deferred.uri\n\t            });\n\t        }\n\t        else {\n\t            collection = this._createCollection({\n\t                uri: dbo.__ENTITYSET,\n\t                pageSize: pageSize || dbo.__ENTITIES.length,\n\t                initialSelect: initialSelect\n\t            });\n\t            collection._count = dbo.__COUNT;\n\t            collection._first = dbo.__FIRST;\n\t            collection._sent = dbo.__SENT;\n\t            collection._pageSize = pageSize;\n\t            for (var _i = 0, _b = dbo.__ENTITIES; _i < _b.length; _i++) {\n\t                var dboEntity = _b[_i];\n\t                collection.entities.push(this._presentationEntityFromDbo({\n\t                    dbo: dboEntity\n\t                }));\n\t            }\n\t        }\n\t        return collection;\n\t    };\n\t    return DataClassBusiness;\n\t}(abstract_business_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = DataClassBusiness;\n\n\n/***/ },\n/* 97 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar abstract_business_1 = __webpack_require__(90);\n\tvar entity_service_1 = __webpack_require__(98);\n\tvar dataclass_1 = __webpack_require__(95);\n\tvar entity_1 = __webpack_require__(101);\n\tvar method_adapter_1 = __webpack_require__(102);\n\tvar media_1 = __webpack_require__(103);\n\tvar util_1 = __webpack_require__(104);\n\tvar EntityBusiness = (function (_super) {\n\t    __extends(EntityBusiness, _super);\n\t    function EntityBusiness(_a) {\n\t        var wakJSC = _a.wakJSC, entity = _a.entity, dataClass = _a.dataClass, dataClassBusiness = _a.dataClassBusiness;\n\t        _super.call(this, { wakJSC: wakJSC });\n\t        this.entity = entity;\n\t        this.dataClass = dataClass;\n\t        this.dataClassBusiness = dataClassBusiness;\n\t        this.service = new entity_service_1.default({\n\t            wakJSC: wakJSC,\n\t            entity: entity,\n\t            dataClassBusiness: dataClassBusiness\n\t        });\n\t    }\n\t    EntityBusiness.prototype._decorateEntity = function () {\n\t        this.entity.save = this.save.bind(this);\n\t        this.entity.delete = this.delete.bind(this);\n\t        this.entity.fetch = this.fetch.bind(this);\n\t        this.entity.recompute = this.recompute.bind(this);\n\t        this._addUserDefinedMethods();\n\t    };\n\t    EntityBusiness.prototype._flashEntityValues = function () {\n\t        var data = {};\n\t        var entity = this.entity;\n\t        for (var _i = 0, _a = this.dataClass.attributes; _i < _a.length; _i++) {\n\t            var attr = _a[_i];\n\t            var objAttr = entity[attr.name];\n\t            if (attr instanceof dataclass_1.AttributeCollection) {\n\t                continue;\n\t            }\n\t            if (attr instanceof dataclass_1.AttributeRelated) {\n\t                data[attr.name] = objAttr ? objAttr._key : null;\n\t            }\n\t            else {\n\t                switch (attr.type) {\n\t                    case 'image':\n\t                    case 'blob':\n\t                        data[attr.name] = { uri: objAttr.uri };\n\t                        break;\n\t                    case 'object':\n\t                        data[attr.name] = JSON.stringify(objAttr);\n\t                        break;\n\t                    case 'date':\n\t                        if (!objAttr) {\n\t                            data[attr.name] = null;\n\t                        }\n\t                        else {\n\t                            data[attr.name] = attr.simpleDate ? util_1.default.wakToStringSimpleDate(objAttr) : objAttr.toJSON();\n\t                        }\n\t                        break;\n\t                    default:\n\t                        data[attr.name] = objAttr;\n\t                }\n\t            }\n\t        }\n\t        this._oldEntityValues = data;\n\t    };\n\t    EntityBusiness.prototype._addUserDefinedMethods = function () {\n\t        var _this = this;\n\t        var self = this;\n\t        this.dataClassBusiness.methods.entity.forEach(function (method) {\n\t            //Voluntary don't use fat arrow notation to use arguments object without a bug\n\t            _this.entity[method] = function () {\n\t                var params = Array.from(arguments);\n\t                return self.callMethod(method, params);\n\t            };\n\t        });\n\t    };\n\t    EntityBusiness.prototype.fetch = function (options) {\n\t        var _this = this;\n\t        var opt = options || {};\n\t        if (opt.filter !== undefined || opt.params !== undefined || opt.pageSize !== undefined ||\n\t            opt.start !== undefined || opt.orderBy !== undefined) {\n\t            throw new Error('Entity.fetch: options filter, params, pageSize, start and orderBy are not allowed');\n\t        }\n\t        return this.dataClassBusiness.find(this.entity._key, options).then(function (fresherEntity) {\n\t            _this._refreshEntity({ fresherEntity: fresherEntity });\n\t            _this._flashEntityValues();\n\t            return _this.entity;\n\t        });\n\t    };\n\t    EntityBusiness.prototype.callMethod = function (methodName, parameters) {\n\t        var _this = this;\n\t        if (!this.entity._key) {\n\t            throw new Error('Entity.' + methodName + ': can not be called on an unsaved entity');\n\t        }\n\t        return this.service.callMethod(methodName, parameters)\n\t            .then(function (obj) {\n\t            return method_adapter_1.MethodAdapter.transform(obj, _this.dataClassBusiness._dataClassBusinessMap);\n\t        });\n\t    };\n\t    EntityBusiness.prototype.delete = function () {\n\t        var _this = this;\n\t        if (!this.entity._key) {\n\t            throw new Error('Entity.delete: can not delete unsaved entity');\n\t        }\n\t        return this.service.delete().then(function () {\n\t            _this.entity = null;\n\t        });\n\t    };\n\t    EntityBusiness.prototype.save = function () {\n\t        var _this = this;\n\t        var data = this.prepareDataForSave();\n\t        //If first-level related entities were already expanded, we will save the\n\t        //entity and ask the server to expand theses attributes on its response\n\t        //So, the user keeps its entities expanded\n\t        var expand = this._getExpandString();\n\t        return this.service.save(data, expand).then(function (entityDbo) {\n\t            var fresherEntity = _this.dataClassBusiness._presentationEntityFromDbo({\n\t                dbo: entityDbo\n\t            });\n\t            _this._refreshEntity({ fresherEntity: fresherEntity });\n\t            _this._flashEntityValues();\n\t            return _this.entity;\n\t        });\n\t    };\n\t    EntityBusiness.prototype.recompute = function () {\n\t        var _this = this;\n\t        var data = this.prepareDataForSave();\n\t        return this.service.recompute(data)\n\t            .then(function (dbo) {\n\t            var fresherEntity = _this.dataClassBusiness._presentationEntityFromDbo({\n\t                dbo: dbo\n\t            });\n\t            _this._refreshEntity({ fresherEntity: fresherEntity });\n\t            return _this.entity;\n\t        });\n\t    };\n\t    EntityBusiness.prototype.prepareDataForSave = function () {\n\t        var data = {};\n\t        var entityIsNew = false;\n\t        if (this.entity._key && this.entity._stamp) {\n\t            data.__KEY = this.entity._key;\n\t            data.__STAMP = this.entity._stamp;\n\t        }\n\t        else {\n\t            entityIsNew = true;\n\t        }\n\t        for (var _i = 0, _a = this.dataClass.attributes; _i < _a.length; _i++) {\n\t            var attr = _a[_i];\n\t            var objAttr = this.entity[attr.name];\n\t            if (objAttr === undefined) {\n\t                objAttr = null;\n\t            }\n\t            if (attr instanceof dataclass_1.AttributeRelated) {\n\t                data[attr.name] = objAttr ? objAttr._key : null;\n\t            }\n\t            else if (attr.readOnly) {\n\t                continue;\n\t            }\n\t            else if (attr.type === 'date') {\n\t                if (!objAttr) {\n\t                    data[attr.name] = objAttr;\n\t                }\n\t                else {\n\t                    data[attr.name] = attr.simpleDate ? util_1.default.wakToStringSimpleDate(objAttr) : objAttr.toJSON();\n\t                }\n\t            }\n\t            else if (!(attr instanceof dataclass_1.AttributeCollection)) {\n\t                //Don't send null value for a newly created attribute (to don't override value eventually set on init event)\n\t                //except for ID (which is null), because if an empty object is send, save is ignored\n\t                if (!entityIsNew || objAttr !== null || attr.name === 'ID') {\n\t                    data[attr.name] = objAttr;\n\t                }\n\t            }\n\t        }\n\t        if (!entityIsNew) {\n\t            var oldData = this._oldEntityValues || {};\n\t            for (var _b = 0, _c = this.dataClass.attributes; _b < _c.length; _b++) {\n\t                var attr = _c[_b];\n\t                if (data[attr.name] === undefined || attr.name === 'ID') {\n\t                    continue;\n\t                }\n\t                switch (attr.type) {\n\t                    case 'image':\n\t                    case 'blob':\n\t                        if (data[attr.name].uri === oldData[attr.name].uri) {\n\t                            delete data[attr.name];\n\t                        }\n\t                        break;\n\t                    case 'object':\n\t                        if (JSON.stringify(data[attr.name]) === oldData[attr.name]) {\n\t                            delete data[attr.name];\n\t                        }\n\t                        break;\n\t                    default:\n\t                        if (data[attr.name] === oldData[attr.name]) {\n\t                            delete data[attr.name];\n\t                        }\n\t                }\n\t            }\n\t        }\n\t        return data;\n\t    };\n\t    EntityBusiness.prototype._refreshEntity = function (_a) {\n\t        var fresherEntity = _a.fresherEntity;\n\t        for (var prop in fresherEntity) {\n\t            if (fresherEntity.hasOwnProperty(prop) && (typeof fresherEntity[prop] !== 'function')) {\n\t                if (fresherEntity[prop] instanceof media_1.default) {\n\t                    this.entity[prop].uri = fresherEntity[prop].uri;\n\t                }\n\t                else {\n\t                    this.entity[prop] = fresherEntity[prop];\n\t                }\n\t            }\n\t        }\n\t    };\n\t    EntityBusiness.prototype._getExpandString = function () {\n\t        var expand = '';\n\t        for (var _i = 0, _a = this.dataClass.attributes; _i < _a.length; _i++) {\n\t            var attr = _a[_i];\n\t            if (attr instanceof dataclass_1.AttributeRelated || attr instanceof dataclass_1.AttributeCollection) {\n\t                if (this.entity[attr.name] instanceof entity_1.default && !this.entity[attr.name]._deferred) {\n\t                    expand += attr.name + ',';\n\t                }\n\t            }\n\t        }\n\t        return expand.length > 0 ? expand.slice(0, -1) : null;\n\t    };\n\t    return EntityBusiness;\n\t}(abstract_business_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = EntityBusiness;\n\n\n/***/ },\n/* 98 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar abstract_service_1 = __webpack_require__(92);\n\tvar entity_base_service_1 = __webpack_require__(99);\n\tvar EntityService = (function (_super) {\n\t    __extends(EntityService, _super);\n\t    function EntityService(_a) {\n\t        var wakJSC = _a.wakJSC, entity = _a.entity, dataClassBusiness = _a.dataClassBusiness;\n\t        _super.call(this, { wakJSC: wakJSC });\n\t        this.entity = entity;\n\t        this.dataClassBusiness = dataClassBusiness;\n\t    }\n\t    EntityService.prototype.save = function (data, expand) {\n\t        return entity_base_service_1.EntityBaseService.save({\n\t            httpClient: this.httpClient,\n\t            dataURI: this.dataClassBusiness.dataURI,\n\t            expand: expand,\n\t            data: data\n\t        });\n\t    };\n\t    EntityService.prototype.recompute = function (data) {\n\t        return entity_base_service_1.EntityBaseService.recompute({\n\t            httpClient: this.httpClient,\n\t            dataURI: this.dataClassBusiness.dataURI,\n\t            data: data\n\t        });\n\t    };\n\t    EntityService.prototype.callMethod = function (methodName, parameters) {\n\t        return entity_base_service_1.EntityBaseService.callMethod({\n\t            httpClient: this.httpClient,\n\t            dataURI: this.dataClassBusiness.dataURI,\n\t            methodName: methodName,\n\t            parameters: parameters,\n\t            entityKey: this.entity._key\n\t        });\n\t    };\n\t    EntityService.prototype.delete = function () {\n\t        return entity_base_service_1.EntityBaseService.delete({\n\t            httpClient: this.httpClient,\n\t            dataURI: this.dataClassBusiness.dataURI,\n\t            entityKey: this.entity._key\n\t        });\n\t    };\n\t    return EntityService;\n\t}(abstract_service_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = EntityService;\n\n\n/***/ },\n/* 99 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar util_1 = __webpack_require__(100);\n\tvar EntityBaseService = (function () {\n\t    function EntityBaseService() {\n\t    }\n\t    EntityBaseService.save = function (_a) {\n\t        var httpClient = _a.httpClient, data = _a.data, expand = _a.expand, dataURI = _a.dataURI;\n\t        var expandStr = '';\n\t        if (expand) {\n\t            expandStr = '&$expand=' + expand;\n\t        }\n\t        return httpClient.post({\n\t            uri: dataURI + '?$method=update' + expandStr,\n\t            data: data\n\t        }).then(function (res) {\n\t            var entity = JSON.parse(res.body);\n\t            delete entity.__entityModel;\n\t            util_1.default.removeRestInfoFromEntity(entity);\n\t            return entity;\n\t        });\n\t    };\n\t    EntityBaseService.recompute = function (_a) {\n\t        var httpClient = _a.httpClient, dataURI = _a.dataURI, data = _a.data;\n\t        return httpClient.post({\n\t            uri: dataURI + '?$method=update&$refresh=true',\n\t            data: data\n\t        }).then(function (res) {\n\t            var dbo = JSON.parse(res.body);\n\t            delete dbo.__entityModel;\n\t            util_1.default.removeRestInfoFromEntity(dbo);\n\t            return dbo;\n\t        });\n\t    };\n\t    EntityBaseService.callMethod = function (_a) {\n\t        var httpClient = _a.httpClient, dataURI = _a.dataURI, methodName = _a.methodName, parameters = _a.parameters, entityKey = _a.entityKey;\n\t        return httpClient.post({\n\t            uri: dataURI + '(' + entityKey + ')/' + methodName,\n\t            data: parameters\n\t        }).then(function (res) {\n\t            var obj = JSON.parse(res.body);\n\t            return obj.result || obj || null;\n\t        });\n\t    };\n\t    EntityBaseService.delete = function (_a) {\n\t        var httpClient = _a.httpClient, dataURI = _a.dataURI, entityKey = _a.entityKey;\n\t        return httpClient.post({\n\t            uri: dataURI + '(' + entityKey + ')?$method=delete'\n\t        }).then(function (res) {\n\t            var obj = JSON.parse(res.body);\n\t            if (!(obj && obj.ok === true)) {\n\t                return Promise.reject(new Error());\n\t            }\n\t            else {\n\t                return true;\n\t            }\n\t        });\n\t    };\n\t    return EntityBaseService;\n\t}());\n\texports.EntityBaseService = EntityBaseService;\n\n\n/***/ },\n/* 100 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar Util = (function () {\n\t    function Util() {\n\t    }\n\t    Util.handleOptions = function (options) {\n\t        if (!options) {\n\t            return '';\n\t        }\n\t        var select = options.select, filter = options.filter, params = options.params, pageSize = options.pageSize, start = options.start, orderBy = options.orderBy, method = options.method, emMethod = options.emMethod;\n\t        var ret = '?';\n\t        if (select) {\n\t            ret += '&$expand=' + select;\n\t        }\n\t        if (filter) {\n\t            ret += '&$filter=\\\"' + filter + '\\\"';\n\t        }\n\t        if (orderBy) {\n\t            ret += '&$orderby=' + orderBy;\n\t        }\n\t        if (params) {\n\t            if (!Array.isArray(params)) {\n\t                throw new Error('params option must be an array');\n\t            }\n\t            if (params.length > 0) {\n\t                var p = '[';\n\t                for (var _i = 0, params_1 = params; _i < params_1.length; _i++) {\n\t                    var elt = params_1[_i];\n\t                    if (typeof elt === 'string') {\n\t                        p += '\\\"' + elt + '\\\",';\n\t                    }\n\t                    else {\n\t                        p += elt + ',';\n\t                    }\n\t                }\n\t                p = p.slice(0, -1);\n\t                p += ']';\n\t                ret += '&$params=\\'' + p + '\\'';\n\t            }\n\t        }\n\t        if (pageSize) {\n\t            if (!this.isInteger(pageSize)) {\n\t                throw new Error('pageSize option must be an integer');\n\t            }\n\t            ret += '&$limit=' + pageSize;\n\t        }\n\t        if (start) {\n\t            if (!this.isInteger(start)) {\n\t                throw new Error('start option must be an integer');\n\t            }\n\t            ret += '&$skip=' + start;\n\t        }\n\t        if (method) {\n\t            ret += '&$method=' + method;\n\t        }\n\t        if (emMethod) {\n\t            ret += '&$emMethod=' + emMethod;\n\t        }\n\t        if (ret.length > 1 && ret[1] === '&') {\n\t            ret = ret.replace('?&', '?');\n\t        }\n\t        return ret === '?' ? '' : ret;\n\t    };\n\t    Util.isInteger = function (n) {\n\t        return typeof n === 'number' && !isNaN(n) && (n % 1) === 0;\n\t    };\n\t    Util.removeRestInfoFromEntity = function (entity) {\n\t        for (var prop in entity) {\n\t            if (Object.prototype.hasOwnProperty.call(entity, prop)) {\n\t                var p = entity[prop];\n\t                if (p && p.__deferred && p.__deferred.__KEY) {\n\t                    delete p.__deferred.uri;\n\t                }\n\t            }\n\t        }\n\t    };\n\t    return Util;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Util;\n\n\n/***/ },\n/* 101 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar Entity = (function () {\n\t    function Entity(_a) {\n\t        var entityKey = _a.key, deferred = _a.deferred, dataClass = _a.dataClass;\n\t        this._key = entityKey;\n\t        this._deferred = deferred === true;\n\t        Object.defineProperty(this, '_dataClass', {\n\t            enumerable: false,\n\t            configurable: false,\n\t            writable: false,\n\t            value: dataClass\n\t        });\n\t    }\n\t    return Entity;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Entity;\n\n\n/***/ },\n/* 102 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar MethodAdapter = (function () {\n\t    function MethodAdapter() {\n\t    }\n\t    MethodAdapter.transform = function (object, dcBusinessMap) {\n\t        if (object && object.__entityModel) {\n\t            var business = dcBusinessMap.get(object.__entityModel);\n\t            if (business) {\n\t                //Returned object is a collection\n\t                if (typeof object.__COUNT !== 'undefined' &&\n\t                    typeof object.__ENTITIES !== 'undefined' &&\n\t                    typeof object.__FIRST !== 'undefined' &&\n\t                    typeof object.__SENT !== 'undefined') {\n\t                    return business._presentationCollectionFromDbo({\n\t                        dbo: object\n\t                    });\n\t                }\n\t                else if (object.__KEY && object.__STAMP) {\n\t                    return business._presentationEntityFromDbo({\n\t                        dbo: object\n\t                    });\n\t                }\n\t            }\n\t        }\n\t        return object;\n\t    };\n\t    return MethodAdapter;\n\t}());\n\texports.MethodAdapter = MethodAdapter;\n\n\n/***/ },\n/* 103 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar Media = (function () {\n\t    function Media(_a) {\n\t        var uri = _a.uri;\n\t        this.uri = uri;\n\t    }\n\t    return Media;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Media;\n\n\n/***/ },\n/* 104 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar Util = (function () {\n\t    function Util() {\n\t    }\n\t    Util.wakParseSimpleDate = function (stringDate) {\n\t        // In wakanda, simple date is a date with only year, month and hour\n\t        // in this format : DD!MM!YYYY\n\t        if (!stringDate) {\n\t            return null;\n\t        }\n\t        var arr = stringDate.split('!');\n\t        if (arr.length !== 3) {\n\t            // return null or throw an error, simple date format is ko\n\t            return null;\n\t        }\n\t        var date = new Date(Date.UTC(parseInt(arr[2]), parseInt(arr[1]) - 1, parseInt(arr[0])));\n\t        return date;\n\t    };\n\t    Util.wakToStringSimpleDate = function (date) {\n\t        var wakSimpleDate;\n\t        if (!(date instanceof Date)) {\n\t            return null;\n\t        }\n\t        wakSimpleDate = date.getUTCDate() + '!' + (date.getUTCMonth() + 1) + '!' + date.getUTCFullYear();\n\t        return wakSimpleDate;\n\t    };\n\t    return Util;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Util;\n\n\n/***/ },\n/* 105 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar abstract_service_1 = __webpack_require__(92);\n\tvar dataclass_base_service_1 = __webpack_require__(106);\n\tvar DataClassService = (function (_super) {\n\t    __extends(DataClassService, _super);\n\t    function DataClassService(_a) {\n\t        var wakJSC = _a.wakJSC, dataClassBusiness = _a.dataClassBusiness;\n\t        _super.call(this, { wakJSC: wakJSC });\n\t        this.dataClassBusiness = dataClassBusiness;\n\t    }\n\t    DataClassService.prototype.find = function (id, options) {\n\t        return dataclass_base_service_1.DataClassBaseService.find({\n\t            httpClient: this.httpClient,\n\t            key: id,\n\t            options: options,\n\t            dataURI: this.dataClassBusiness.dataURI\n\t        });\n\t    };\n\t    DataClassService.prototype.query = function (options) {\n\t        return dataclass_base_service_1.DataClassBaseService.query({\n\t            httpClient: this.httpClient,\n\t            options: options,\n\t            dataURI: this.dataClassBusiness.dataURI\n\t        });\n\t    };\n\t    DataClassService.prototype.callMethod = function (methodName, parameters) {\n\t        return dataclass_base_service_1.DataClassBaseService.callMethod({\n\t            httpClient: this.httpClient,\n\t            dataURI: this.dataClassBusiness.dataURI,\n\t            methodName: methodName,\n\t            parameters: parameters\n\t        });\n\t    };\n\t    return DataClassService;\n\t}(abstract_service_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = DataClassService;\n\n\n/***/ },\n/* 106 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar util_1 = __webpack_require__(100);\n\tvar DataClassBaseService = (function () {\n\t    function DataClassBaseService() {\n\t    }\n\t    DataClassBaseService.find = function (_a) {\n\t        var httpClient = _a.httpClient, key = _a.key, options = _a.options, dataURI = _a.dataURI;\n\t        if (typeof key !== 'string' && typeof key !== 'number') {\n\t            throw new Error('DataClass.find: Invalid id type');\n\t        }\n\t        var optString = util_1.default.handleOptions(options);\n\t        return httpClient.get({\n\t            uri: dataURI + '(' + key + ')' + optString\n\t        })\n\t            .then(function (res) {\n\t            var entity = JSON.parse(res.body);\n\t            delete entity.__entityModel;\n\t            util_1.default.removeRestInfoFromEntity(entity);\n\t            return entity;\n\t        });\n\t    };\n\t    DataClassBaseService.query = function (_a) {\n\t        var httpClient = _a.httpClient, options = _a.options, dataURI = _a.dataURI;\n\t        options.method = 'entityset';\n\t        if (Array.isArray(options.params)) {\n\t            options.params = this._sanitizeOptionParams(options.params);\n\t        }\n\t        var optString = util_1.default.handleOptions(options);\n\t        return httpClient.get({\n\t            uri: dataURI + optString\n\t        }).then(function (res) {\n\t            var collection = JSON.parse(res.body);\n\t            delete collection.__entityModel;\n\t            for (var _i = 0, _a = collection.__ENTITIES; _i < _a.length; _i++) {\n\t                var entity = _a[_i];\n\t                util_1.default.removeRestInfoFromEntity(entity);\n\t            }\n\t            return collection;\n\t        });\n\t    };\n\t    DataClassBaseService.callMethod = function (_a) {\n\t        var httpClient = _a.httpClient, methodName = _a.methodName, parameters = _a.parameters, dataURI = _a.dataURI;\n\t        return httpClient.post({\n\t            uri: dataURI + '/' + methodName,\n\t            data: parameters\n\t        }).then(function (res) {\n\t            var obj = JSON.parse(res.body);\n\t            return obj.result || obj || null;\n\t        });\n\t    };\n\t    DataClassBaseService._sanitizeOptionParams = function (params) {\n\t        return params.map(function (element) {\n\t            if (element instanceof Date) {\n\t                return element.toISOString();\n\t            }\n\t            else {\n\t                return element;\n\t            }\n\t        });\n\t    };\n\t    return DataClassBaseService;\n\t}());\n\texports.DataClassBaseService = DataClassBaseService;\n\n\n/***/ },\n/* 107 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar abstract_business_1 = __webpack_require__(90);\n\tvar collection_service_1 = __webpack_require__(108);\n\tvar const_1 = __webpack_require__(110);\n\tvar method_adapter_1 = __webpack_require__(102);\n\tvar CollectionBusiness = (function (_super) {\n\t    __extends(CollectionBusiness, _super);\n\t    function CollectionBusiness(_a) {\n\t        var wakJSC = _a.wakJSC, dataClass = _a.dataClass, collection = _a.collection, dataClassBusiness = _a.dataClassBusiness, collectionUri = _a.collectionUri, pageSize = _a.pageSize, initialSelect = _a.initialSelect;\n\t        _super.call(this, { wakJSC: wakJSC });\n\t        this.collection = collection;\n\t        this.dataClass = dataClass;\n\t        this.dataClassBusiness = dataClassBusiness;\n\t        this.service = new collection_service_1.default({\n\t            wakJSC: wakJSC,\n\t            collection: collection,\n\t            dataClassBusiness: dataClassBusiness,\n\t            collectionUri: collectionUri\n\t        });\n\t        this.pageSize = pageSize;\n\t        this.initialSelect = initialSelect;\n\t    }\n\t    CollectionBusiness.prototype._decorateCollection = function () {\n\t        this.collection.fetch = this.fetch.bind(this);\n\t        this.collection.nextPage = this.nextPage.bind(this);\n\t        this.collection.prevPage = this.prevPage.bind(this);\n\t        this.collection.more = this.more.bind(this);\n\t        this._addUserDefinedMethods();\n\t    };\n\t    CollectionBusiness.prototype.fetch = function (options) {\n\t        var _this = this;\n\t        var opt = options || {};\n\t        if (opt.method && opt.method.length > 0) {\n\t            throw new Error('Collection.fetch: option method is not allowed');\n\t        }\n\t        if (!opt.pageSize) {\n\t            opt.pageSize = this.pageSize ? this.pageSize : const_1.default.DEFAULT_PAGE_SIZE;\n\t        }\n\t        if (opt.select) {\n\t            this.initialSelect = opt.select;\n\t        }\n\t        this.pageSize = opt.pageSize;\n\t        return this.service.fetch(opt).then(function (collectionDBO) {\n\t            var fresherCollection = _this.dataClassBusiness._presentationCollectionFromDbo({\n\t                dbo: collectionDBO,\n\t                pageSize: _this.pageSize\n\t            });\n\t            _this._refreshCollection({ fresherCollection: fresherCollection });\n\t            return _this.collection;\n\t        });\n\t    };\n\t    CollectionBusiness.prototype.more = function () {\n\t        var _this = this;\n\t        if (this.collection._deferred === true) {\n\t            throw new Error('Collection.more: can not call more on a deferred collection');\n\t        }\n\t        var options = {\n\t            start: this.collection._first + this.collection._sent,\n\t            pageSize: this.pageSize\n\t        };\n\t        if (this.initialSelect) {\n\t            options.select = this.initialSelect;\n\t        }\n\t        return this.service.fetch(options)\n\t            .then(function (dbo) {\n\t            _this.collection._sent += dbo.__ENTITIES.length;\n\t            for (var _i = 0, _a = dbo.__ENTITIES; _i < _a.length; _i++) {\n\t                var entity = _a[_i];\n\t                _this.collection.entities.push(_this.dataClassBusiness._presentationEntityFromDbo({\n\t                    dbo: entity\n\t                }));\n\t            }\n\t            return _this.collection;\n\t        });\n\t    };\n\t    CollectionBusiness.prototype.nextPage = function () {\n\t        if (this.collection._deferred === true) {\n\t            throw new Error('Collection.nextPage: can not call nextPage on a deferred collection');\n\t        }\n\t        var options = {\n\t            start: this.collection._first + this.pageSize,\n\t            pageSize: this.pageSize\n\t        };\n\t        if (this.initialSelect) {\n\t            options.select = this.initialSelect;\n\t        }\n\t        return this.fetch(options);\n\t    };\n\t    CollectionBusiness.prototype.prevPage = function () {\n\t        if (this.collection._deferred === true) {\n\t            throw new Error('Collection.prevPage: can not call prevPage on a deferred collection');\n\t        }\n\t        var options = {\n\t            start: this.collection._first - this.pageSize,\n\t            pageSize: this.pageSize\n\t        };\n\t        if (this.initialSelect) {\n\t            options.select = this.initialSelect;\n\t        }\n\t        return this.fetch(options);\n\t    };\n\t    CollectionBusiness.prototype._addUserDefinedMethods = function () {\n\t        var _this = this;\n\t        var self = this;\n\t        this.dataClassBusiness.methods.collection.forEach(function (method) {\n\t            //Voluntary don't use fat arrow notation to use arguments object without a bug\n\t            _this.collection[method] = function () {\n\t                var params = Array.from(arguments);\n\t                return self.callMethod(method, params);\n\t            };\n\t        });\n\t    };\n\t    CollectionBusiness.prototype.callMethod = function (methodName, parameters) {\n\t        var _this = this;\n\t        if (this.collection._deferred) {\n\t            throw new Error('Collection.' + methodName + ': can not be called on a deferred collection');\n\t        }\n\t        return this.service.callMethod(methodName, parameters)\n\t            .then(function (obj) {\n\t            return method_adapter_1.MethodAdapter.transform(obj, _this.dataClassBusiness._dataClassBusinessMap);\n\t        });\n\t    };\n\t    CollectionBusiness.prototype._refreshCollection = function (_a) {\n\t        var fresherCollection = _a.fresherCollection;\n\t        for (var prop in fresherCollection) {\n\t            if (Object.prototype.hasOwnProperty.call(fresherCollection, prop)) {\n\t                if (typeof fresherCollection[prop] !== 'function') {\n\t                    this.collection[prop] = fresherCollection[prop];\n\t                }\n\t            }\n\t        }\n\t    };\n\t    return CollectionBusiness;\n\t}(abstract_business_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = CollectionBusiness;\n\n\n/***/ },\n/* 108 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar abstract_service_1 = __webpack_require__(92);\n\tvar collection_base_service_1 = __webpack_require__(109);\n\tvar CollectionService = (function (_super) {\n\t    __extends(CollectionService, _super);\n\t    function CollectionService(_a) {\n\t        var wakJSC = _a.wakJSC, collection = _a.collection, dataClassBusiness = _a.dataClassBusiness, collectionUri = _a.collectionUri;\n\t        _super.call(this, { wakJSC: wakJSC });\n\t        this.collection = collection;\n\t        this.dataClassBusiness = dataClassBusiness;\n\t        this.collectionUri = collectionUri;\n\t        this.isEntitySet = collection_base_service_1.isEntitySetUri(collectionUri);\n\t    }\n\t    CollectionService.prototype.fetch = function (options) {\n\t        var _this = this;\n\t        return collection_base_service_1.CollectionBaseService.fetch({\n\t            httpClient: this.httpClient,\n\t            collectionUri: this.collectionUri,\n\t            isEntitySet: this.isEntitySet,\n\t            options: options\n\t        })\n\t            .then(function (dbo) {\n\t            if (dbo.__ENTITYSET) {\n\t                _this.collectionUri = dbo.__ENTITYSET;\n\t                _this.isEntitySet = collection_base_service_1.isEntitySetUri(dbo.__ENTITYSET);\n\t            }\n\t            return dbo;\n\t        });\n\t    };\n\t    CollectionService.prototype.callMethod = function (methodName, parameters) {\n\t        return collection_base_service_1.CollectionBaseService.callMethod({\n\t            httpClient: this.httpClient,\n\t            collectionUri: this.collectionUri,\n\t            isEntitySet: this.isEntitySet,\n\t            methodName: methodName,\n\t            parameters: parameters\n\t        });\n\t    };\n\t    return CollectionService;\n\t}(abstract_service_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = CollectionService;\n\n\n/***/ },\n/* 109 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar util_1 = __webpack_require__(100);\n\tvar CollectionBaseService = (function () {\n\t    function CollectionBaseService() {\n\t    }\n\t    CollectionBaseService.fetch = function (_a) {\n\t        var httpClient = _a.httpClient, collectionUri = _a.collectionUri, isEntitySet = _a.isEntitySet, options = _a.options;\n\t        if (!isEntitySet) {\n\t            if (options.select && options.select.length > 0) {\n\t                throw new Error('Collection.fetch: option select is not allowed when collection is deferred');\n\t            }\n\t        }\n\t        options.method = 'subentityset';\n\t        var optString = util_1.default.handleOptions(options);\n\t        //Remove the first ? on optString if it's not an entitySet (because there is also\n\t        //?$expand=... on collectionUri), and add a &\n\t        if (!isEntitySet) {\n\t            optString = '&' + optString.slice(1);\n\t        }\n\t        var uri = collectionUri;\n\t        return httpClient.get({\n\t            uri: uri + optString\n\t        }).then(function (res) {\n\t            var obj = JSON.parse(res.body);\n\t            delete obj.__entityModel;\n\t            for (var _i = 0, _a = obj.__ENTITIES; _i < _a.length; _i++) {\n\t                var entity = _a[_i];\n\t                util_1.default.removeRestInfoFromEntity(entity);\n\t            }\n\t            return obj;\n\t        });\n\t    };\n\t    CollectionBaseService.callMethod = function (_a) {\n\t        var httpClient = _a.httpClient, collectionUri = _a.collectionUri, isEntitySet = _a.isEntitySet, methodName = _a.methodName, parameters = _a.parameters;\n\t        var uri = collectionUri;\n\t        if (isEntitySet) {\n\t            uri += '/' + methodName;\n\t        }\n\t        else {\n\t            var optString = util_1.default.handleOptions({\n\t                method: 'subentityset',\n\t                emMethod: methodName\n\t            });\n\t            uri += '&' + optString.slice(1);\n\t        }\n\t        return httpClient.post({\n\t            uri: uri,\n\t            data: parameters\n\t        }).then(function (res) {\n\t            var obj = JSON.parse(res.body);\n\t            return obj.result || obj || null;\n\t        });\n\t    };\n\t    return CollectionBaseService;\n\t}());\n\texports.CollectionBaseService = CollectionBaseService;\n\tfunction isEntitySetUri(uri) {\n\t    return /^\\/rest\\/\\w+\\/\\$entityset\\/[A-Z0-9]+(\\?.*)?$/i.test(uri);\n\t}\n\texports.isEntitySetUri = isEntitySetUri;\n\n\n/***/ },\n/* 110 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = {\n\t    DEFAULT_PAGE_SIZE: 40,\n\t    DEFAULT_SESSION_DURATION: 3600 //seconds\n\t};\n\n\n/***/ },\n/* 111 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar abstract_business_1 = __webpack_require__(90);\n\tvar media_service_1 = __webpack_require__(112);\n\tvar MediaBusiness = (function (_super) {\n\t    __extends(MediaBusiness, _super);\n\t    function MediaBusiness(_a) {\n\t        var wakJSC = _a.wakJSC, media = _a.media, dataClassBusiness = _a.dataClassBusiness, isImage = _a.isImage, attributeName = _a.attributeName, entity = _a.entity;\n\t        _super.call(this, { wakJSC: wakJSC });\n\t        this.media = media;\n\t        this.entity = entity;\n\t        this.dataClassBusiness = dataClassBusiness;\n\t        this.isImage = isImage === true;\n\t        this.service = new media_service_1.default({\n\t            wakJSC: wakJSC,\n\t            mediaBusiness: this,\n\t            media: media,\n\t            attributeName: attributeName,\n\t            dataClassBusiness: dataClassBusiness\n\t        });\n\t    }\n\t    MediaBusiness.prototype._decorateMedia = function () {\n\t        this.media.upload = this.upload.bind(this);\n\t        this.media.delete = this.delete.bind(this);\n\t    };\n\t    MediaBusiness.prototype.upload = function (file) {\n\t        var _this = this;\n\t        if (!this.entity._key) {\n\t            throw new Error('Media.upload: entity must be saved before uploading a media');\n\t        }\n\t        return this.service.upload(file, file.type).then(function (dbo) {\n\t            return dbo; //FIXME\n\t        }).then(function () {\n\t            //FIXME - crappy, force a refresh of the entity to get proper stamp and media uri\n\t            return _this.entity.fetch();\n\t        });\n\t    };\n\t    MediaBusiness.prototype.delete = function () {\n\t        var _this = this;\n\t        if (!this.entity._key) {\n\t            throw new Error('Media.upload: entity must be saved before deleting a media');\n\t        }\n\t        return this.service.delete().then(function () {\n\t            //FIXME - crappy, force a refresh of the entity to get proper stamp and media uri\n\t            return _this.entity.fetch();\n\t        });\n\t    };\n\t    return MediaBusiness;\n\t}(abstract_business_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = MediaBusiness;\n\n\n/***/ },\n/* 112 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar abstract_service_1 = __webpack_require__(92);\n\tvar media_base_service_1 = __webpack_require__(113);\n\tvar MediaService = (function (_super) {\n\t    __extends(MediaService, _super);\n\t    function MediaService(_a) {\n\t        var wakJSC = _a.wakJSC, mediaBusiness = _a.mediaBusiness, media = _a.media, attributeName = _a.attributeName, dataClassBusiness = _a.dataClassBusiness;\n\t        _super.call(this, { wakJSC: wakJSC });\n\t        this.dataClassName = dataClassBusiness.dataClass.name;\n\t        this.entity = mediaBusiness.entity;\n\t        this.isImage = mediaBusiness.isImage;\n\t        this.media = media;\n\t        this.attributeName = attributeName;\n\t    }\n\t    MediaService.prototype.upload = function (file, mimeType) {\n\t        return media_base_service_1.MediaBaseService.upload({\n\t            httpClient: this.httpClient,\n\t            dataClassName: this.dataClassName,\n\t            entityKey: this.entity._key,\n\t            attributeName: this.attributeName,\n\t            isImage: this.isImage,\n\t            file: file\n\t        });\n\t    };\n\t    MediaService.prototype.delete = function () {\n\t        return media_base_service_1.MediaBaseService.delete({\n\t            httpClient: this.httpClient,\n\t            dataClassName: this.dataClassName,\n\t            entityKey: this.entity._key,\n\t            entityStamp: this.entity._stamp,\n\t            attributeName: this.attributeName\n\t        });\n\t    };\n\t    return MediaService;\n\t}(abstract_service_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = MediaService;\n\n\n/***/ },\n/* 113 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar MediaBaseService = (function () {\n\t    function MediaBaseService() {\n\t    }\n\t    MediaBaseService.upload = function (_a) {\n\t        var httpClient = _a.httpClient, dataClassName = _a.dataClassName, entityKey = _a.entityKey, attributeName = _a.attributeName, file = _a.file, isImage = _a.isImage;\n\t        var uri = this._buildUri(dataClassName, entityKey, attributeName);\n\t        if (isImage) {\n\t            uri += '?$rawPict=' + file.type;\n\t        }\n\t        //FIXME - real crappy not to return some piece of information to refresh entity\n\t        return httpClient.post({\n\t            uri: uri,\n\t            data: file,\n\t            binary: true\n\t        });\n\t    };\n\t    MediaBaseService.delete = function (_a) {\n\t        var httpClient = _a.httpClient, dataClassName = _a.dataClassName, entityKey = _a.entityKey, entityStamp = _a.entityStamp, attributeName = _a.attributeName;\n\t        var uri = '/' + dataClassName + '(' + entityKey + ')';\n\t        var data = {\n\t            __KEY: entityKey,\n\t            __STAMP: entityStamp\n\t        };\n\t        data[attributeName] = null;\n\t        //FIXME - crappy\n\t        return httpClient.post({\n\t            uri: uri,\n\t            data: data\n\t        });\n\t    };\n\t    MediaBaseService._buildUri = function (dataClassName, entityKey, attributeName) {\n\t        return '/' + dataClassName + '(' + entityKey + ')' + '/' + attributeName;\n\t    };\n\t    return MediaBaseService;\n\t}());\n\texports.MediaBaseService = MediaBaseService;\n\n\n/***/ },\n/* 114 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar Collection = (function () {\n\t    function Collection(_a) {\n\t        var deferred = _a.deferred, dataClass = _a.dataClass;\n\t        this.entities = [];\n\t        this._deferred = deferred === true;\n\t        Object.defineProperty(this, '_dataClass', {\n\t            enumerable: false,\n\t            configurable: false,\n\t            writable: false,\n\t            value: dataClass\n\t        });\n\t    }\n\t    return Collection;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Collection;\n\n\n/***/ },\n/* 115 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar abstract_business_1 = __webpack_require__(90);\n\tvar directory_service_1 = __webpack_require__(116);\n\tvar const_1 = __webpack_require__(110);\n\tvar DirectoryBusiness = (function (_super) {\n\t    __extends(DirectoryBusiness, _super);\n\t    function DirectoryBusiness(_a) {\n\t        var wakJSC = _a.wakJSC;\n\t        _super.call(this, { wakJSC: wakJSC });\n\t        this.service = new directory_service_1.default({ wakJSC: wakJSC });\n\t    }\n\t    DirectoryBusiness.prototype.login = function (username, password, duration) {\n\t        var durationTime = duration || const_1.default.DEFAULT_SESSION_DURATION;\n\t        if (!(typeof durationTime === 'number') || durationTime <= 0) {\n\t            throw new Error('Directory.login: invalid duration parameter');\n\t        }\n\t        return this.service.login(username, password, durationTime)\n\t            .catch(function () {\n\t            return Promise.reject(new Error('Directory.login: Unauthorized'));\n\t        });\n\t    };\n\t    DirectoryBusiness.prototype.logout = function () {\n\t        return this.service.logout()\n\t            .catch(function () {\n\t            return Promise.reject(new Error('Directory.logout: logout failed'));\n\t        });\n\t    };\n\t    DirectoryBusiness.prototype.currentUser = function () {\n\t        return this.service.currentUser()\n\t            .then(function (dbo) {\n\t            return dbo;\n\t        })\n\t            .catch(function () {\n\t            return Promise.reject(new Error('Directory.currentUser: user is not logged in'));\n\t        });\n\t    };\n\t    DirectoryBusiness.prototype.currentUserBelongsTo = function (group) {\n\t        if (!(typeof group === 'string')) {\n\t            throw new Error('Directory.currentUserBelongsTo: group must be a string');\n\t        }\n\t        return this.service.currentUserBelongsTo(group)\n\t            .then(function () {\n\t            return true;\n\t        })\n\t            .catch(function () {\n\t            return false;\n\t        });\n\t    };\n\t    return DirectoryBusiness;\n\t}(abstract_business_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = DirectoryBusiness;\n\n\n/***/ },\n/* 116 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar abstract_service_1 = __webpack_require__(92);\n\tvar directory_base_service_1 = __webpack_require__(117);\n\tvar DirectoryService = (function (_super) {\n\t    __extends(DirectoryService, _super);\n\t    function DirectoryService() {\n\t        _super.apply(this, arguments);\n\t    }\n\t    DirectoryService.prototype.login = function (username, password, duration) {\n\t        return directory_base_service_1.DirectoryBaseService.login({\n\t            httpClient: this.httpClient,\n\t            username: username,\n\t            password: password,\n\t            duration: duration\n\t        });\n\t    };\n\t    DirectoryService.prototype.logout = function () {\n\t        return directory_base_service_1.DirectoryBaseService.logout({\n\t            httpClient: this.httpClient\n\t        });\n\t    };\n\t    DirectoryService.prototype.currentUser = function () {\n\t        return directory_base_service_1.DirectoryBaseService.currentUser({\n\t            httpClient: this.httpClient\n\t        });\n\t    };\n\t    DirectoryService.prototype.currentUserBelongsTo = function (group) {\n\t        return directory_base_service_1.DirectoryBaseService.currentUserBelongsTo({\n\t            httpClient: this.httpClient,\n\t            group: group\n\t        });\n\t    };\n\t    return DirectoryService;\n\t}(abstract_service_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = DirectoryService;\n\n\n/***/ },\n/* 117 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar DirectoryBaseService = (function () {\n\t    function DirectoryBaseService() {\n\t    }\n\t    DirectoryBaseService.login = function (_a) {\n\t        var httpClient = _a.httpClient, username = _a.username, password = _a.password, duration = _a.duration;\n\t        return httpClient.post({\n\t            uri: '/rest/$directory/login',\n\t            data: [username, password, duration]\n\t        }).then(function () {\n\t            return true;\n\t        });\n\t    };\n\t    DirectoryBaseService.logout = function (_a) {\n\t        var httpClient = _a.httpClient;\n\t        return httpClient.get({\n\t            uri: '/rest/$directory/logout'\n\t        }).then(function (res) {\n\t            var obj = JSON.parse(res.body);\n\t            if (obj.result && obj.result === true) {\n\t                return true;\n\t            }\n\t            else {\n\t                return Promise.reject(new Error());\n\t            }\n\t        });\n\t    };\n\t    DirectoryBaseService.currentUser = function (_a) {\n\t        var httpClient = _a.httpClient;\n\t        return httpClient.get({\n\t            uri: '/rest/$directory/currentUser'\n\t        })\n\t            .then(function (res) {\n\t            var obj = JSON.parse(res.body);\n\t            if (obj.result && obj.result.ID) {\n\t                return obj.result;\n\t            }\n\t            else {\n\t                return Promise.reject(new Error());\n\t            }\n\t        });\n\t    };\n\t    DirectoryBaseService.currentUserBelongsTo = function (_a) {\n\t        var httpClient = _a.httpClient, group = _a.group;\n\t        return httpClient.post({\n\t            uri: '/rest/$directory/currentUserBelongsTo',\n\t            data: [group]\n\t        }).then(function (res) {\n\t            var obj = JSON.parse(res.body);\n\t            if (obj && obj.result && obj.result === true) {\n\t                return true;\n\t            }\n\t            else {\n\t                return Promise.reject(new Error());\n\t            }\n\t        });\n\t    };\n\t    return DirectoryBaseService;\n\t}());\n\texports.DirectoryBaseService = DirectoryBaseService;\n\n\n/***/ },\n/* 118 */\n/***/ function(module, exports) {\n\n\tmodule.exports = {\n\t\t\"name\": \"wakanda-client\",\n\t\t\"main\": \"dist/wakanda-client.node.js\",\n\t\t\"version\": \"0.5.0\",\n\t\t\"description\": \"Wakanda Client allows you to easily interact with Wakanda Server on a JavaScript (browser or node) environment\",\n\t\t\"typings\": \"dist/wakanda-client.d.ts\",\n\t\t\"browser\": \"dist/wakanda-client.min.js\",\n\t\t\"repository\": \"wakanda/wakanda-javascript-client\",\n\t\t\"scripts\": {\n\t\t\t\"webpack-watch\": \"node ./node_modules/webpack/bin/webpack.js --progress --colors --watch\",\n\t\t\t\"webpack-build\": \"node ./node_modules/webpack/bin/webpack.js --progress --colors\",\n\t\t\t\"webpack-build:ci\": \"node ./node_modules/webpack/bin/webpack.js --progress --colors --config webpack.ci.js\",\n\t\t\t\"webpack-build:prod\": \"node ./node_modules/webpack/bin/webpack.js --progress --colors --config webpack.prod.js\",\n\t\t\t\"test:karma:single\": \"node ./node_modules/karma/bin/karma start\",\n\t\t\t\"test:karma:full\": \"npm run webpack-build && npm run test:karma:single\",\n\t\t\t\"test:node:single\": \"http_proxy=\\\"\\\" node ./node_modules/mocha/bin/mocha test/bootstrap.js test/spec/**/*.spec.js\",\n\t\t\t\"test:node:full\": \"npm run webpack-build && npm run test:node:single\",\n\t\t\t\"test-single\": \"./test.sh single\",\n\t\t\t\"test\": \"./test.sh\",\n\t\t\t\"test-server:start\": \"node test/connect/server.js & echo $! > testserver.pid && sleep 1\",\n\t\t\t\"test-server:stop\": \"kill `cat testserver.pid` && rm testserver.pid\",\n\t\t\t\"test-server:record\": \"node test/connect/server.js record & echo $! > testserver.pid\",\n\t\t\t\"test-server:init\": \"rm -rf test/connect/mocks && npm run test-server:record && npm run webpack-build && npm run test:node:single && npm run test:karma:single && npm run test-server:stop\",\n\t\t\t\"codecov\": \"cat coverage/*/lcov.info | codecov\",\n\t\t\t\"tsc\": \"node ./node_modules/typescript/bin/tsc\",\n\t\t\t\"serve\": \"node ./node_modules/.bin/concurrently -r \\\"npm run webpack-watch\\\" \\\"node ./node_modules/.bin/gulp serve\\\"\"\n\t\t},\n\t\t\"author\": \"Wakanda SAS\",\n\t\t\"license\": \"MIT\",\n\t\t\"devDependencies\": {\n\t\t\t\"babel-core\": \"^6.3.17\",\n\t\t\t\"babel-loader\": \"^6.2.0\",\n\t\t\t\"babel-polyfill\": \"^6.3.14\",\n\t\t\t\"babel-preset-es2015\": \"^6.3.13\",\n\t\t\t\"body-parser\": \"^1.14.2\",\n\t\t\t\"chai\": \"^3.4.1\",\n\t\t\t\"chalk\": \"^1.1.1\",\n\t\t\t\"codecov.io\": \"^0.1.6\",\n\t\t\t\"concurrently\": \"^2.0.0\",\n\t\t\t\"connect\": \"^3.4.0\",\n\t\t\t\"connect-prism\": \"mrblackus/connect-prism\",\n\t\t\t\"eslint\": \"^1.10.3\",\n\t\t\t\"eslint-loader\": \"^1.2.0\",\n\t\t\t\"express\": \"^4.13.3\",\n\t\t\t\"grunt\": \"^0.4.5\",\n\t\t\t\"gulp\": \"^3.9.0\",\n\t\t\t\"gulp-connect\": \"^2.2.0\",\n\t\t\t\"http-proxy-middleware\": \"^0.9.0\",\n\t\t\t\"isparta\": \"^4.0.0\",\n\t\t\t\"isparta-loader\": \"^2.0.0\",\n\t\t\t\"json-loader\": \"^0.5.4\",\n\t\t\t\"karma\": \"^1.3.0\",\n\t\t\t\"karma-chai\": \"^0.1.0\",\n\t\t\t\"karma-coverage\": \"^0.5.3\",\n\t\t\t\"karma-mocha\": \"^1.2.0\",\n\t\t\t\"karma-phantomjs-launcher\": \"^1.0.2\",\n\t\t\t\"karma-verbose-reporter\": \"0.0.3\",\n\t\t\t\"mocha\": \"^3.1.2\",\n\t\t\t\"path\": \"^0.12.7\",\n\t\t\t\"phantomjs\": \"^2.1.7\",\n\t\t\t\"serve-static\": \"^1.10.2\",\n\t\t\t\"ts-loader\": \"0.8.1\",\n\t\t\t\"tslint\": \"^3.9.0\",\n\t\t\t\"tslint-loader\": \"^2.1.4\",\n\t\t\t\"typescript\": \"^1.8.10\",\n\t\t\t\"webpack\": \"^1.12.15\"\n\t\t},\n\t\t\"dependencies\": {\n\t\t\t\"core-js\": \"^2.1.2\",\n\t\t\t\"request\": \"^2.67.0\"\n\t\t}\n\t};\n\n/***/ },\n/* 119 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar http_client_1 = __webpack_require__(120);\n\tvar http_response_1 = __webpack_require__(121);\n\tvar AureliaHttpClient = __webpack_require__(122).HttpClient;\n\tvar BrowserHttpClient = (function (_super) {\n\t    __extends(BrowserHttpClient, _super);\n\t    function BrowserHttpClient(_a) {\n\t        var apiPrefix = _a.apiPrefix;\n\t        _super.call(this, { apiPrefix: apiPrefix });\n\t        this.client = new AureliaHttpClient();\n\t    }\n\t    BrowserHttpClient.prototype.get = function (_a) {\n\t        var uri = _a.uri, params = _a.params;\n\t        try {\n\t            var res = _super.prototype.get.call(this, { uri: uri, params: params });\n\t            if (res !== null) {\n\t                return Promise.resolve(res);\n\t            }\n\t        }\n\t        catch (e) {\n\t            return Promise.reject(e);\n\t        }\n\t        var result = this._getWithoutInterceptor({ uri: uri, params: params });\n\t        return _super.prototype.responseGet.call(this, uri, result);\n\t    };\n\t    BrowserHttpClient.prototype._getWithoutInterceptor = function (_a) {\n\t        var uri = _a.uri;\n\t        var request = this.client.createRequest(this.prefix + uri)\n\t            .asGet()\n\t            .withCredentials(true)\n\t            .send();\n\t        return this._httpResponseAdaptor({ request: request });\n\t    };\n\t    BrowserHttpClient.prototype.post = function (_a) {\n\t        var uri = _a.uri, data = _a.data, binary = _a.binary;\n\t        try {\n\t            var res = _super.prototype.post.call(this, { uri: uri, data: data, binary: binary });\n\t            if (res !== null) {\n\t                return Promise.resolve(res);\n\t            }\n\t        }\n\t        catch (e) {\n\t            return Promise.reject(e);\n\t        }\n\t        var request = this.client.createRequest(this.prefix + uri)\n\t            .asPost()\n\t            .withContent(data)\n\t            .withCredentials(true)\n\t            .send();\n\t        var result = this._httpResponseAdaptor({ request: request });\n\t        return _super.prototype.responsePost.call(this, uri, result);\n\t    };\n\t    BrowserHttpClient.prototype._httpResponseAdaptor = function (_a) {\n\t        var request = _a.request;\n\t        return request.then(function (res) {\n\t            return new http_response_1.default({\n\t                statusCode: res.statusCode,\n\t                headers: [],\n\t                body: res.response\n\t            });\n\t        });\n\t    };\n\t    return BrowserHttpClient;\n\t}(http_client_1.HttpClient));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = BrowserHttpClient;\n\n\n/***/ },\n/* 120 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar HttpClient = (function () {\n\t    function HttpClient(_a) {\n\t        var apiPrefix = _a.apiPrefix;\n\t        this.prefix = apiPrefix;\n\t        this._getRequestInterceptors = [];\n\t        this._postRequestInterceptors = [];\n\t        this._getResponseInterceptors = [];\n\t        this._postResponseInterceptors = [];\n\t    }\n\t    HttpClient.prototype.get = function (options) {\n\t        for (var i = 0; i < this._getRequestInterceptors.length; i++) {\n\t            var interceptor = this._getRequestInterceptors[i];\n\t            var res = interceptor(options);\n\t            if (res !== null && (typeof res !== 'undefined')) {\n\t                return res;\n\t            }\n\t        }\n\t        return null;\n\t    };\n\t    HttpClient.prototype.post = function (options) {\n\t        for (var i = 0; i < this._postRequestInterceptors.length; i++) {\n\t            var interceptor = this._postRequestInterceptors[i];\n\t            var res = interceptor(options);\n\t            if (res !== null && (typeof res !== 'undefined')) {\n\t                return res;\n\t            }\n\t        }\n\t        return null;\n\t    };\n\t    /**\n\t     * @return {Promise} Returns either the underlying HTTP request result, or the promise returned by the interceptor if any\n\t     */\n\t    HttpClient.prototype.responseGet = function (requestUri, promise) {\n\t        //Execute response interceptors\n\t        for (var _i = 0, _a = this._getResponseInterceptors; _i < _a.length; _i++) {\n\t            var interceptor = _a[_i];\n\t            var res = interceptor(requestUri, promise);\n\t            if (res) {\n\t                return res;\n\t            }\n\t        }\n\t        return promise;\n\t    };\n\t    /**\n\t     * @return {Promise} Returns either the underlying HTTP request result, or the promise returned by the interceptor if any\n\t     */\n\t    HttpClient.prototype.responsePost = function (requestUri, promise) {\n\t        //Execute response interceptors\n\t        for (var _i = 0, _a = this._postResponseInterceptors; _i < _a.length; _i++) {\n\t            var interceptor = _a[_i];\n\t            var res = interceptor(requestUri, promise);\n\t            if (res) {\n\t                return res;\n\t            }\n\t        }\n\t        return promise;\n\t    };\n\t    /**\n\t     * @param {array|string} type - HTTP verb of the request to intercept\n\t     * @param {function} callback - The interceptor function to execute before HTTP request. If it returns something different than null, the underlying HTTP request won't be executed\n\t     * @returns {null|object} Returns null or an object, if an object is returned, the underlying HTTP request won't be executed\n\t     */\n\t    HttpClient.prototype.registerRequestInterceptor = function (type, callback) {\n\t        var _this = this;\n\t        var interceptorType = this._interceptorTypeToArray(type);\n\t        interceptorType.forEach(function (t) {\n\t            if (t === 'get') {\n\t                _this._getRequestInterceptors.push(callback);\n\t            }\n\t            else if (t === 'post') {\n\t                _this._postRequestInterceptors.push(callback);\n\t            }\n\t        });\n\t    };\n\t    HttpClient.prototype.registerResponseInterceptor = function (type, callback) {\n\t        var _this = this;\n\t        var interceptorType = this._interceptorTypeToArray(type);\n\t        interceptorType.forEach(function (t) {\n\t            if (t === 'get') {\n\t                _this._getResponseInterceptors.push(callback);\n\t            }\n\t            else if (t === 'post') {\n\t                _this._postResponseInterceptors.push(callback);\n\t            }\n\t        });\n\t    };\n\t    HttpClient.prototype._interceptorTypeToArray = function (type) {\n\t        var _this = this;\n\t        var interceptorType = [];\n\t        if (typeof type === 'string') {\n\t            if (!this._isValidInterceptorType(type.toLowerCase())) {\n\t                throw new Error('HttpClient.registerInterceptor: invalid interceptor type');\n\t            }\n\t            else {\n\t                interceptorType.push(type.toLowerCase());\n\t            }\n\t        }\n\t        else if (Array.isArray(type)) {\n\t            type.forEach(function (t) {\n\t                if (!_this._isValidInterceptorType(t.toLowerCase())) {\n\t                    throw new Error('HttpClient.registerInterceptor: invalid interceptor type');\n\t                }\n\t                else {\n\t                    interceptorType.push(t.toLowerCase());\n\t                }\n\t            });\n\t        }\n\t        else {\n\t            throw new Error('HttpClient.registerInterceptor: type must be a string or an array');\n\t        }\n\t        return interceptorType;\n\t    };\n\t    HttpClient.prototype._isValidInterceptorType = function (type) {\n\t        var validTypes = ['get', 'post'];\n\t        return validTypes.indexOf(type) !== -1;\n\t    };\n\t    return HttpClient;\n\t}());\n\texports.HttpClient = HttpClient;\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = HttpClient;\n\n\n/***/ },\n/* 121 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar HttpResponse = (function () {\n\t    function HttpResponse(_a) {\n\t        var statusCode = _a.statusCode, headers = _a.headers, body = _a.body;\n\t        this.statusCode = statusCode;\n\t        this.headers = headers || [];\n\t        this.body = body;\n\t    }\n\t    return HttpResponse;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = HttpResponse;\n\n\n/***/ },\n/* 122 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _httpClient = __webpack_require__(123);\n\t\n\tObject.defineProperty(exports, 'HttpClient', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _httpClient.HttpClient;\n\t  }\n\t});\n\t\n\tvar _httpRequestMessage = __webpack_require__(127);\n\t\n\tObject.defineProperty(exports, 'HttpRequestMessage', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _httpRequestMessage.HttpRequestMessage;\n\t  }\n\t});\n\t\n\tvar _httpResponseMessage = __webpack_require__(129);\n\t\n\tObject.defineProperty(exports, 'HttpResponseMessage', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _httpResponseMessage.HttpResponseMessage;\n\t  }\n\t});\n\t\n\tvar _jsonpRequestMessage = __webpack_require__(131);\n\t\n\tObject.defineProperty(exports, 'JSONPRequestMessage', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _jsonpRequestMessage.JSONPRequestMessage;\n\t  }\n\t});\n\t\n\tvar _headers = __webpack_require__(124);\n\t\n\tObject.defineProperty(exports, 'Headers', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _headers.Headers;\n\t  }\n\t});\n\t\n\tvar _requestBuilder = __webpack_require__(125);\n\t\n\tObject.defineProperty(exports, 'RequestBuilder', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _requestBuilder.RequestBuilder;\n\t  }\n\t});\n\n/***/ },\n/* 123 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.HttpClient = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _headers = __webpack_require__(124);\n\t\n\tvar _requestBuilder = __webpack_require__(125);\n\t\n\tvar _httpRequestMessage = __webpack_require__(127);\n\t\n\tvar _jsonpRequestMessage = __webpack_require__(131);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction trackRequestStart(client, processor) {\n\t  client.pendingRequests.push(processor);\n\t  client.isRequesting = true;\n\t}\n\t\n\tfunction trackRequestEnd(client, processor) {\n\t  var index = client.pendingRequests.indexOf(processor);\n\t\n\t  client.pendingRequests.splice(index, 1);\n\t  client.isRequesting = client.pendingRequests.length > 0;\n\t\n\t  if (!client.isRequesting) {\n\t    var evt = new window.CustomEvent('aurelia-http-client-requests-drained', { bubbles: true, cancelable: true });\n\t    setTimeout(function () {\n\t      return document.dispatchEvent(evt);\n\t    }, 1);\n\t  }\n\t}\n\t\n\t/**\n\t* The main HTTP client object.\n\t*\n\t* @class HttpClient\n\t* @constructor\n\t*/\n\t\n\tvar HttpClient = exports.HttpClient = function () {\n\t  function HttpClient() {\n\t    _classCallCheck(this, HttpClient);\n\t\n\t    this.requestTransformers = [];\n\t    this.requestProcessorFactories = new Map();\n\t    this.requestProcessorFactories.set(_httpRequestMessage.HttpRequestMessage, _httpRequestMessage.createHttpRequestMessageProcessor);\n\t    this.requestProcessorFactories.set(_jsonpRequestMessage.JSONPRequestMessage, _jsonpRequestMessage.createJSONPRequestMessageProcessor);\n\t    this.pendingRequests = [];\n\t    this.isRequesting = false;\n\t  }\n\t\n\t  /**\n\t   * Configure this HttpClient with default settings to be used by all requests.\n\t   *\n\t   * @method configure\n\t   * @param {Function} fn A function that takes a RequestBuilder as an argument.\n\t   * @chainable\n\t   */\n\t\n\t\n\t  _createClass(HttpClient, [{\n\t    key: 'configure',\n\t    value: function configure(fn) {\n\t      var builder = new _requestBuilder.RequestBuilder(this);\n\t      fn(builder);\n\t      this.requestTransformers = builder.transformers;\n\t      return this;\n\t    }\n\t\n\t    /**\n\t     * Returns a new RequestBuilder for this HttpClient instance that can be used to build and send HTTP requests.\n\t     *\n\t     * @method createRequest\n\t     * @param uri The target URI.\n\t     * @type RequestBuilder\n\t     */\n\t\n\t  }, {\n\t    key: 'createRequest',\n\t    value: function createRequest(uri) {\n\t      var builder = new _requestBuilder.RequestBuilder(this);\n\t\n\t      if (uri) {\n\t        builder.withUri(uri);\n\t      }\n\t\n\t      return builder;\n\t    }\n\t\n\t    /**\n\t     * Sends a message using the underlying networking stack.\n\t     *\n\t     * @method send\n\t     * @param message A configured HttpRequestMessage or JSONPRequestMessage.\n\t     * @param {Array} transformers A collection of transformers to apply to the HTTP request.\n\t     * @return {Promise} A cancellable promise object.\n\t     */\n\t\n\t  }, {\n\t    key: 'send',\n\t    value: function send(message, transformers) {\n\t      var _this = this;\n\t\n\t      var createProcessor = this.requestProcessorFactories.get(message.constructor),\n\t          processor,\n\t          promise,\n\t          i,\n\t          ii;\n\t\n\t      if (!createProcessor) {\n\t        throw new Error('No request message processor factory for ' + message.constructor + '.');\n\t      }\n\t\n\t      processor = createProcessor();\n\t      trackRequestStart(this, processor);\n\t\n\t      transformers = transformers || this.requestTransformers;\n\t\n\t      for (i = 0, ii = transformers.length; i < ii; ++i) {\n\t        transformers[i](this, processor, message);\n\t      }\n\t\n\t      promise = processor.process(this, message);\n\t\n\t      promise.abort = promise.cancel = function () {\n\t        processor.abort();\n\t      };\n\t\n\t      return promise.then(function (response) {\n\t        trackRequestEnd(_this, processor);\n\t        return response;\n\t      }).catch(function (response) {\n\t        trackRequestEnd(_this, processor);\n\t        throw response;\n\t      });\n\t    }\n\t\n\t    /**\n\t     * Sends an HTTP DELETE request.\n\t     *\n\t     * @method delete\n\t     * @param {String} uri The target URI.\n\t     * @return {Promise} A cancellable promise object.\n\t     */\n\t\n\t  }, {\n\t    key: 'delete',\n\t    value: function _delete(uri) {\n\t      return this.createRequest(uri).asDelete().send();\n\t    }\n\t\n\t    /**\n\t     * Sends an HTTP GET request.\n\t     *\n\t     * @method get\n\t     * @param {String} uri The target URI.\n\t     * @return {Promise} A cancellable promise object.\n\t     */\n\t\n\t  }, {\n\t    key: 'get',\n\t    value: function get(uri) {\n\t      return this.createRequest(uri).asGet().send();\n\t    }\n\t\n\t    /**\n\t     * Sends an HTTP HEAD request.\n\t     *\n\t     * @method head\n\t     * @param {String} uri The target URI.\n\t     * @return {Promise} A cancellable promise object.\n\t     */\n\t\n\t  }, {\n\t    key: 'head',\n\t    value: function head(uri) {\n\t      return this.createRequest(uri).asHead().send();\n\t    }\n\t\n\t    /**\n\t     * Sends a JSONP request.\n\t     *\n\t     * @method jsonp\n\t     * @param {String} uri The target URI.\n\t     * @return {Promise} A cancellable promise object.\n\t     */\n\t\n\t  }, {\n\t    key: 'jsonp',\n\t    value: function jsonp(uri) {\n\t      var callbackParameterName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'jsoncallback';\n\t\n\t      return this.createRequest(uri).asJsonp(callbackParameterName).send();\n\t    }\n\t\n\t    /**\n\t     * Sends an HTTP OPTIONS request.\n\t     *\n\t     * @method options\n\t     * @param {String} uri The target URI.\n\t     * @return {Promise} A cancellable promise object.\n\t     */\n\t\n\t  }, {\n\t    key: 'options',\n\t    value: function options(uri) {\n\t      return this.createRequest(uri).asOptions().send();\n\t    }\n\t\n\t    /**\n\t     * Sends an HTTP PUT request.\n\t     *\n\t     * @method put\n\t     * @param {String} uri The target URI.\n\t     * @param {Object} uri The request payload.\n\t     * @return {Promise} A cancellable promise object.\n\t     */\n\t\n\t  }, {\n\t    key: 'put',\n\t    value: function put(uri, content) {\n\t      return this.createRequest(uri).asPut().withContent(content).send();\n\t    }\n\t\n\t    /**\n\t     * Sends an HTTP PATCH request.\n\t     *\n\t     * @method patch\n\t     * @param {String} uri The target URI.\n\t     * @param {Object} uri The request payload.\n\t     * @return {Promise} A cancellable promise object.\n\t     */\n\t\n\t  }, {\n\t    key: 'patch',\n\t    value: function patch(uri, content) {\n\t      return this.createRequest(uri).asPatch().withContent(content).send();\n\t    }\n\t\n\t    /**\n\t     * Sends an HTTP POST request.\n\t     *\n\t     * @method post\n\t     * @param {String} uri The target URI.\n\t     * @param {Object} uri The request payload.\n\t     * @return {Promise} A cancellable promise object.\n\t     */\n\t\n\t  }, {\n\t    key: 'post',\n\t    value: function post(uri, content) {\n\t      return this.createRequest(uri).asPost().withContent(content).send();\n\t    }\n\t  }]);\n\n\t  return HttpClient;\n\t}();\n\n/***/ },\n/* 124 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Headers = exports.Headers = function () {\n\t  function Headers() {\n\t    var headers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, Headers);\n\t\n\t    this.headers = headers;\n\t  }\n\t\n\t  _createClass(Headers, [{\n\t    key: 'add',\n\t    value: function add(key, value) {\n\t      this.headers[key] = value;\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get(key) {\n\t      return this.headers[key];\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this.headers = {};\n\t    }\n\t  }, {\n\t    key: 'configureXHR',\n\t    value: function configureXHR(xhr) {\n\t      var headers = this.headers,\n\t          key;\n\t\n\t      for (key in headers) {\n\t        xhr.setRequestHeader(key, headers[key]);\n\t      }\n\t    }\n\t\n\t    /**\n\t     * XmlHttpRequest's getAllResponseHeaders() method returns a string of response\n\t     * headers according to the format described here:\n\t     * http://www.w3.org/TR/XMLHttpRequest/#the-getallresponseheaders-method\n\t     * This method parses that string into a user-friendly key/value pair object.\n\t     */\n\t\n\t  }], [{\n\t    key: 'parse',\n\t    value: function parse(headerStr) {\n\t      var headers = new Headers();\n\t      if (!headerStr) {\n\t        return headers;\n\t      }\n\t\n\t      var headerPairs = headerStr.split('\\r\\n');\n\t      for (var i = 0; i < headerPairs.length; i++) {\n\t        var headerPair = headerPairs[i];\n\t        // Can't use split() here because it does the wrong thing\n\t        // if the header value has the string \": \" in it.\n\t        var index = headerPair.indexOf(': ');\n\t        if (index > 0) {\n\t          var key = headerPair.substring(0, index);\n\t          var val = headerPair.substring(index + 2);\n\t          headers.add(key, val);\n\t        }\n\t      }\n\t\n\t      return headers;\n\t    }\n\t  }]);\n\n\t  return Headers;\n\t}();\n\n/***/ },\n/* 125 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.RequestBuilder = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _aureliaPath = __webpack_require__(126);\n\t\n\tvar _httpRequestMessage = __webpack_require__(127);\n\t\n\tvar _jsonpRequestMessage = __webpack_require__(131);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t* A builder class allowing fluent composition of HTTP requests.\n\t*\n\t* @class RequestBuilder\n\t* @constructor\n\t*/\n\tvar RequestBuilder = exports.RequestBuilder = function () {\n\t\tfunction RequestBuilder(client) {\n\t\t\t_classCallCheck(this, RequestBuilder);\n\t\n\t\t\tthis.client = client;\n\t\t\tthis.transformers = client.requestTransformers.slice(0);\n\t\t\tthis.useJsonp = false;\n\t\t}\n\t\n\t\t/**\n\t * Adds a user-defined request transformer to the RequestBuilder.\n\t *\n\t * @method addHelper\n\t * @param {String} name The name of the helper to add.\n\t * @param {Function} fn The helper function.\n\t * @chainable\n\t */\n\t\n\t\n\t\t_createClass(RequestBuilder, [{\n\t\t\tkey: 'send',\n\t\n\t\n\t\t\t/**\n\t  * Sends the request.\n\t  *\n\t  * @method send\n\t  * @return {Promise} A cancellable promise object.\n\t  */\n\t\t\tvalue: function send() {\n\t\t\t\tvar message = this.useJsonp ? new _jsonpRequestMessage.JSONPRequestMessage() : new _httpRequestMessage.HttpRequestMessage();\n\t\t\t\treturn this.client.send(message, this.transformers);\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: 'addHelper',\n\t\t\tvalue: function addHelper(name, fn) {\n\t\t\t\tRequestBuilder.prototype[name] = function () {\n\t\t\t\t\tthis.transformers.push(fn.apply(this, arguments));\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn RequestBuilder;\n\t}();\n\t\n\tRequestBuilder.addHelper('asDelete', function () {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.method = 'DELETE';\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('asGet', function () {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.method = 'GET';\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('asHead', function () {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.method = 'HEAD';\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('asOptions', function () {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.method = 'OPTIONS';\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('asPatch', function () {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.method = 'PATCH';\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('asPost', function () {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.method = 'POST';\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('asPut', function () {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.method = 'PUT';\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('asJsonp', function (callbackParameterName) {\n\t\tthis.useJsonp = true;\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.callbackParameterName = callbackParameterName;\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('withUri', function (uri) {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.uri = uri;\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('withContent', function (content) {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.content = content;\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('withBaseUri', function (baseUri) {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.baseUri = baseUri;\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('withParams', function (params) {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.params = params;\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('withResponseType', function (responseType) {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.responseType = responseType;\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('withTimeout', function (timeout) {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.timeout = timeout;\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('withHeader', function (key, value) {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.headers.add(key, value);\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('withCredentials', function (value) {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.withCredentials = value;\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('withReviver', function (reviver) {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.reviver = reviver;\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('withReplacer', function (replacer) {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.replacer = replacer;\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('withProgressCallback', function (progressCallback) {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.progressCallback = progressCallback;\n\t\t};\n\t});\n\t\n\tRequestBuilder.addHelper('withCallbackParameterName', function (callbackParameterName) {\n\t\treturn function (client, processor, message) {\n\t\t\tmessage.callbackParameterName = callbackParameterName;\n\t\t};\n\t});\n\n/***/ },\n/* 126 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\texports.relativeToFile = relativeToFile;\n\texports.join = join;\n\texports.buildQueryString = buildQueryString;\n\tfunction trimDots(ary) {\n\t  var i, part;\n\t  for (i = 0; i < ary.length; ++i) {\n\t    part = ary[i];\n\t    if (part === '.') {\n\t      ary.splice(i, 1);\n\t      i -= 1;\n\t    } else if (part === '..') {\n\t      // If at the start, or previous value is still ..,\n\t      // keep them so that when converted to a path it may\n\t      // still work when converted to a path, even though\n\t      // as an ID it is less than ideal. In larger point\n\t      // releases, may be better to just kick out an error.\n\t      if (i === 0 || i == 1 && ary[2] === '..' || ary[i - 1] === '..') {\n\t        continue;\n\t      } else if (i > 0) {\n\t        ary.splice(i - 1, 2);\n\t        i -= 2;\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\tfunction relativeToFile(name, file) {\n\t  var lastIndex,\n\t      normalizedBaseParts,\n\t      fileParts = file && file.split('/');\n\t\n\t  name = name.trim();\n\t  name = name.split('/');\n\t\n\t  if (name[0].charAt(0) === '.' && fileParts) {\n\t    //Convert file to array, and lop off the last part,\n\t    //so that . matches that 'directory' and not name of the file's\n\t    //module. For instance, file of 'one/two/three', maps to\n\t    //'one/two/three.js', but we want the directory, 'one/two' for\n\t    //this normalization.\n\t    normalizedBaseParts = fileParts.slice(0, fileParts.length - 1);\n\t    name = normalizedBaseParts.concat(name);\n\t  }\n\t\n\t  trimDots(name);\n\t\n\t  return name.join('/');\n\t}\n\t\n\tfunction join(path1, path2) {\n\t  var url1, url2, url3, i, ii, urlPrefix;\n\t\n\t  if (!path1) {\n\t    return path2;\n\t  }\n\t\n\t  if (!path2) {\n\t    return path1;\n\t  }\n\t\n\t  urlPrefix = path1.indexOf('//') === 0 ? '//' : path1.indexOf('/') === 0 ? '/' : '';\n\t\n\t  url1 = path1.split('/');\n\t  url2 = path2.split('/');\n\t  url3 = [];\n\t\n\t  for (i = 0, ii = url1.length; i < ii; ++i) {\n\t    if (url1[i] == '..') {\n\t      url3.pop();\n\t    } else if (url1[i] == '.' || url1[i] == '') {\n\t      continue;\n\t    } else {\n\t      url3.push(url1[i]);\n\t    }\n\t  }\n\t\n\t  for (i = 0, ii = url2.length; i < ii; ++i) {\n\t    if (url2[i] == '..') {\n\t      url3.pop();\n\t    } else if (url2[i] == '.' || url2[i] == '') {\n\t      continue;\n\t    } else {\n\t      url3.push(url2[i]);\n\t    }\n\t  }\n\t\n\t  return urlPrefix + url3.join('/').replace(/\\:\\//g, '://');;\n\t}\n\t\n\tvar r20 = /%20/g,\n\t    rbracket = /\\[\\]$/,\n\t    class2type = {};\n\t\n\t'Boolean Number String Function Array Date RegExp Object Error'.split(' ').forEach(function (name, i) {\n\t  class2type['[object ' + name + ']'] = name.toLowerCase();\n\t});\n\t\n\tfunction type(obj) {\n\t  if (obj == null) {\n\t    return obj + \"\";\n\t  }\n\t\n\t  // Support: Android<4.0 (functionish RegExp)\n\t  return (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object' || typeof obj === 'function' ? class2type[toString.call(obj)] || 'object' : typeof obj === 'undefined' ? 'undefined' : _typeof(obj);\n\t}\n\t\n\tfunction buildQueryString(a, traditional) {\n\t  var prefix,\n\t      s = [],\n\t      add = function add(key, value) {\n\t    // If value is a function, invoke it and return its value\n\t    value = typeof value === 'function' ? value() : value == null ? '' : value;\n\t    s[s.length] = encodeURIComponent(key) + '=' + encodeURIComponent(value);\n\t  };\n\t\n\t  for (prefix in a) {\n\t    _buildQueryString(prefix, a[prefix], traditional, add);\n\t  }\n\t\n\t  // Return the resulting serialization\n\t  return s.join('&').replace(r20, '+');\n\t}\n\t\n\tfunction _buildQueryString(prefix, obj, traditional, add) {\n\t  var name;\n\t\n\t  if (Array.isArray(obj)) {\n\t    // Serialize array item.\n\t    obj.forEach(function (v, i) {\n\t      if (traditional || rbracket.test(prefix)) {\n\t        // Treat each array item as a scalar.\n\t        add(prefix, v);\n\t      } else {\n\t        // Item is non-scalar (array or object), encode its numeric index.\n\t        _buildQueryString(prefix + '[' + ((typeof v === 'undefined' ? 'undefined' : _typeof(v)) === 'object' ? i : '') + ']', v, traditional, add);\n\t      }\n\t    });\n\t  } else if (!traditional && type(obj) === 'object') {\n\t    // Serialize object item.\n\t    for (name in obj) {\n\t      _buildQueryString(prefix + '[' + name + ']', obj[name], traditional, add);\n\t    }\n\t  } else {\n\t    // Serialize scalar item.\n\t    add(prefix, obj);\n\t  }\n\t}\n\n/***/ },\n/* 127 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.HttpRequestMessage = undefined;\n\texports.createHttpRequestMessageProcessor = createHttpRequestMessageProcessor;\n\t\n\tvar _headers = __webpack_require__(124);\n\t\n\tvar _requestMessageProcessor = __webpack_require__(128);\n\t\n\tvar _transformers = __webpack_require__(130);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar HttpRequestMessage = exports.HttpRequestMessage = function HttpRequestMessage(method, uri, content, headers) {\n\t  _classCallCheck(this, HttpRequestMessage);\n\t\n\t  this.method = method;\n\t  this.uri = uri;\n\t  this.content = content;\n\t  this.headers = headers || new _headers.Headers();\n\t  this.responseType = 'json'; //text, arraybuffer, blob, document\n\t};\n\t\n\tfunction createHttpRequestMessageProcessor() {\n\t  return new _requestMessageProcessor.RequestMessageProcessor(XMLHttpRequest, [_transformers.timeoutTransformer, _transformers.credentialsTransformer, _transformers.progressTransformer, _transformers.responseTypeTransformer, _transformers.headerTransformer, _transformers.contentTransformer]);\n\t}\n\n/***/ },\n/* 128 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.RequestMessageProcessor = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _httpResponseMessage = __webpack_require__(129);\n\t\n\tvar _aureliaPath = __webpack_require__(126);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction buildFullUri(message) {\n\t  var uri = (0, _aureliaPath.join)(message.baseUri, message.uri),\n\t      qs;\n\t\n\t  if (message.params) {\n\t    qs = (0, _aureliaPath.buildQueryString)(message.params);\n\t    uri = qs ? uri + '?' + qs : uri;\n\t  }\n\t\n\t  message.fullUri = uri;\n\t}\n\t\n\tvar RequestMessageProcessor = exports.RequestMessageProcessor = function () {\n\t  function RequestMessageProcessor(xhrType, transformers) {\n\t    _classCallCheck(this, RequestMessageProcessor);\n\t\n\t    this.XHRType = xhrType;\n\t    this.transformers = transformers;\n\t  }\n\t\n\t  _createClass(RequestMessageProcessor, [{\n\t    key: 'abort',\n\t    value: function abort() {\n\t      //The logic here is if the xhr object is not set then there is nothing to abort so the intent was carried out\n\t      if (this.xhr) {\n\t        this.xhr.abort();\n\t      }\n\t    }\n\t  }, {\n\t    key: 'process',\n\t    value: function process(client, message) {\n\t      var _this = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        var xhr = _this.xhr = new _this.XHRType(),\n\t            transformers = _this.transformers,\n\t            i,\n\t            ii;\n\t\n\t        buildFullUri(message);\n\t        xhr.open(message.method, message.fullUri, true);\n\t\n\t        for (i = 0, ii = transformers.length; i < ii; ++i) {\n\t          transformers[i](client, _this, message, xhr);\n\t        }\n\t\n\t        xhr.onload = function (e) {\n\t          var response = new _httpResponseMessage.HttpResponseMessage(message, xhr, message.responseType, message.reviver);\n\t          if (response.isSuccess) {\n\t            resolve(response);\n\t          } else {\n\t            reject(response);\n\t          }\n\t        };\n\t\n\t        xhr.ontimeout = function (e) {\n\t          reject(new _httpResponseMessage.HttpResponseMessage(message, {\n\t            response: e,\n\t            status: xhr.status,\n\t            statusText: xhr.statusText\n\t          }, 'timeout'));\n\t        };\n\t\n\t        xhr.onerror = function (e) {\n\t          reject(new _httpResponseMessage.HttpResponseMessage(message, {\n\t            response: e,\n\t            status: xhr.status,\n\t            statusText: xhr.statusText\n\t          }, 'error'));\n\t        };\n\t\n\t        xhr.onabort = function (e) {\n\t          reject(new _httpResponseMessage.HttpResponseMessage(message, {\n\t            response: e,\n\t            status: xhr.status,\n\t            statusText: xhr.statusText\n\t          }, 'abort'));\n\t        };\n\t\n\t        xhr.send(message.content);\n\t      });\n\t    }\n\t  }]);\n\n\t  return RequestMessageProcessor;\n\t}();\n\n/***/ },\n/* 129 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.HttpResponseMessage = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _headers = __webpack_require__(124);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar HttpResponseMessage = exports.HttpResponseMessage = function () {\n\t  function HttpResponseMessage(requestMessage, xhr, responseType, reviver) {\n\t    _classCallCheck(this, HttpResponseMessage);\n\t\n\t    this.requestMessage = requestMessage;\n\t    this.statusCode = xhr.status;\n\t    this.response = xhr.response;\n\t    this.isSuccess = xhr.status >= 200 && xhr.status < 400;\n\t    this.statusText = xhr.statusText;\n\t    this.responseType = responseType;\n\t    this.reviver = reviver;\n\t\n\t    if (xhr.getAllResponseHeaders) {\n\t      this.headers = _headers.Headers.parse(xhr.getAllResponseHeaders());\n\t    } else {\n\t      this.headers = new _headers.Headers();\n\t    }\n\t  }\n\t\n\t  _createClass(HttpResponseMessage, [{\n\t    key: 'content',\n\t    get: function get() {\n\t      try {\n\t        if (this._content !== undefined) {\n\t          return this._content;\n\t        }\n\t\n\t        if (this.response === undefined || this.response === null) {\n\t          return this._content = this.response;\n\t        }\n\t\n\t        if (this.responseType === 'json') {\n\t          return this._content = JSON.parse(this.response, this.reviver);\n\t        }\n\t\n\t        if (this.reviver) {\n\t          return this._content = this.reviver(this.response);\n\t        }\n\t\n\t        return this._content = this.response;\n\t      } catch (e) {\n\t        if (this.isSuccess) {\n\t          throw e;\n\t        }\n\t\n\t        return this._content = null;\n\t      }\n\t    }\n\t  }]);\n\n\t  return HttpResponseMessage;\n\t}();\n\n/***/ },\n/* 130 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.timeoutTransformer = timeoutTransformer;\n\texports.callbackParameterNameTransformer = callbackParameterNameTransformer;\n\texports.credentialsTransformer = credentialsTransformer;\n\texports.progressTransformer = progressTransformer;\n\texports.responseTypeTransformer = responseTypeTransformer;\n\texports.headerTransformer = headerTransformer;\n\texports.contentTransformer = contentTransformer;\n\tfunction timeoutTransformer(client, processor, message, xhr) {\n\t  if (message.timeout !== undefined) {\n\t    xhr.timeout = message.timeout;\n\t  }\n\t}\n\t\n\tfunction callbackParameterNameTransformer(client, processor, message, xhr) {\n\t  if (message.callbackParameterName !== undefined) {\n\t    xhr.callbackParameterName = message.callbackParameterName;\n\t  }\n\t}\n\t\n\tfunction credentialsTransformer(client, processor, message, xhr) {\n\t  if (message.withCredentials !== undefined) {\n\t    xhr.withCredentials = message.withCredentials;\n\t  }\n\t}\n\t\n\tfunction progressTransformer(client, processor, message, xhr) {\n\t  if (message.progressCallback) {\n\t    xhr.upload.onprogress = message.progressCallback;\n\t  }\n\t}\n\t\n\tfunction responseTypeTransformer(client, processor, message, xhr) {\n\t  var responseType = message.responseType;\n\t\n\t  if (responseType === 'json') {\n\t    responseType = 'text'; //IE does not support json\n\t  }\n\t\n\t  xhr.responseType = responseType;\n\t}\n\t\n\tfunction headerTransformer(client, processor, message, xhr) {\n\t  message.headers.configureXHR(xhr);\n\t}\n\t\n\tfunction contentTransformer(client, processor, message, xhr) {\n\t  if (window.FormData && message.content instanceof FormData) {\n\t    return;\n\t  }\n\t\n\t  if (window.Blob && message.content instanceof Blob) {\n\t    return;\n\t  }\n\t\n\t  if (window.ArrayBufferView && message.content instanceof ArrayBufferView) {\n\t    return;\n\t  }\n\t\n\t  if (message.content instanceof Document) {\n\t    return;\n\t  }\n\t\n\t  if (typeof message.content === 'string') {\n\t    return;\n\t  }\n\t\n\t  if (message.content === null || message.content === undefined) {\n\t    return;\n\t  }\n\t\n\t  message.content = JSON.stringify(message.content, message.replacer);\n\t}\n\n/***/ },\n/* 131 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.JSONPRequestMessage = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\texports.createJSONPRequestMessageProcessor = createJSONPRequestMessageProcessor;\n\t\n\tvar _headers = __webpack_require__(124);\n\t\n\tvar _requestMessageProcessor = __webpack_require__(128);\n\t\n\tvar _transformers = __webpack_require__(130);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar JSONPRequestMessage = exports.JSONPRequestMessage = function JSONPRequestMessage(uri, callbackParameterName) {\n\t  _classCallCheck(this, JSONPRequestMessage);\n\t\n\t  this.method = 'JSONP';\n\t  this.uri = uri;\n\t  this.content = undefined;\n\t  this.headers = new _headers.Headers();\n\t  this.responseType = 'jsonp';\n\t  this.callbackParameterName = callbackParameterName;\n\t};\n\t\n\tvar JSONPXHR = function () {\n\t  function JSONPXHR() {\n\t    _classCallCheck(this, JSONPXHR);\n\t  }\n\t\n\t  _createClass(JSONPXHR, [{\n\t    key: 'open',\n\t    value: function open(method, uri) {\n\t      this.method = method;\n\t      this.uri = uri;\n\t      this.callbackName = 'jsonp_callback_' + Math.round(100000 * Math.random());\n\t    }\n\t  }, {\n\t    key: 'send',\n\t    value: function send() {\n\t      var _this = this;\n\t\n\t      var uri = this.uri + (this.uri.indexOf('?') >= 0 ? '&' : '?') + this.callbackParameterName + '=' + this.callbackName;\n\t\n\t      window[this.callbackName] = function (data) {\n\t        delete window[_this.callbackName];\n\t        document.body.removeChild(script);\n\t\n\t        if (_this.status === undefined) {\n\t          _this.status = 200;\n\t          _this.statusText = 'OK';\n\t          _this.response = data;\n\t          _this.onload(_this);\n\t        }\n\t      };\n\t\n\t      var script = document.createElement('script');\n\t      script.src = uri;\n\t      document.body.appendChild(script);\n\t\n\t      if (this.timeout !== undefined) {\n\t        setTimeout(function () {\n\t          if (_this.status === undefined) {\n\t            _this.status = 0;\n\t            _this.ontimeout(new Error('timeout'));\n\t          }\n\t        }, this.timeout);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'abort',\n\t    value: function abort() {\n\t      if (this.status === undefined) {\n\t        this.status = 0;\n\t        this.onabort(new Error('abort'));\n\t      }\n\t    }\n\t  }, {\n\t    key: 'setRequestHeader',\n\t    value: function setRequestHeader() {}\n\t  }]);\n\t\n\t  return JSONPXHR;\n\t}();\n\t\n\tfunction createJSONPRequestMessageProcessor() {\n\t  return new _requestMessageProcessor.RequestMessageProcessor(JSONPXHR, [_transformers.timeoutTransformer, _transformers.callbackParameterNameTransformer]);\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n//# sourceMappingURL=wakanda-client.js.map\nvar wakanda = angular.module('wakanda', []);\n\nwakanda.constant('wakandaClient', new WakandaClient.WakandaClient());\n\nwakanda.factory('$wakanda', ['datastoreFactory', 'directoryFactory', 'transformFactory',\n  function(datastoreFactory, directoryFactory, transformFactory) {\n\n    var wakandaFactory = {};\n\n    //Init and dataStore\n    wakandaFactory.init         = datastoreFactory.init;\n    wakandaFactory.getDatastore = datastoreFactory.getDataStore;\n    Object.defineProperty(wakandaFactory, '$ds', {\n      get: wakandaFactory.getDatastore,\n      enumerable: true\n    });\n\n    //Directory\n    wakandaFactory.$login                 = directoryFactory.login;\n    wakandaFactory.$loginByPassword       = directoryFactory.login;\n    wakandaFactory.$logout                = directoryFactory.logout;\n    wakandaFactory.$currentUser           = directoryFactory.currentUser;\n    wakandaFactory.$currentUserBelongsTo  = directoryFactory.currentUserBelongsTo;\n\n    //Transform\n    wakandaFactory.$transform = {\n      $objectToEntity:      transformFactory.toEntity,\n      $objectToCollection:  transformFactory.toCollection\n    };\n\n    return wakandaFactory;\n  }\n]);\n\nwakanda.provider('$wakandaConfig', ['wakandaClient', function(wakandaClient) {\n  var hostname = '',\n    catalogName;\n  this.$get = function() {\n    return {\n      getHostname: function() {\n        return hostname;\n      },\n      getCatalogName: function() {\n        return catalogName;\n      }\n    };\n  };\n  this.setHostname = function(_hostname) {\n    wakandaClient._httpClient.prefix = _hostname + '/rest';\n    hostname = _hostname;\n  };\n  this.setCatalogName = function(_catalogName) {\n    wakandaClient.catalog = _catalogName; \n    catalogName = _catalogName;\n  };\n}]);\n\nvar wakanda = angular.module('wakanda');\n\nwakanda.factory('collectionFactory', ['$injector', '$q', 'rootScopeSafeApply', 'wakandaClient',\n  function ($injector, $q, rootScopeSafeApply, wakandaClient) {\n    var collectionFactory = {};\n\n    function _decorate(ngCollection, ngDataClass) {\n      //WakandaClient collection container\n      Object.defineProperty(ngCollection, '$_collection', {\n        enumerable: false,\n        configurable: false,\n        writable: true,\n        value: null\n      });\n\n      Object.defineProperty(ngCollection, '$_dataClass', {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: ngDataClass\n      });\n\n      Object.defineProperty(ngCollection, '$totalCount', {\n        enumerable: true,\n        configurable: false,\n        get: function () {\n          return ngCollection.$_collection._count;\n        }\n      });\n\n      Object.defineProperty(ngCollection, '$queryParams', {\n        enumerable: true,\n        configurable: false,\n        get: function () {\n          return {\n            pageSize: ngCollection.$_collection._pageSize,\n            start: ngCollection.$_collection._first\n          };\n        }\n      });\n\n      ngCollection.$fetch     = fetch;\n      ngCollection.$nextPage  = nextPage;\n      ngCollection.$prevPage  = prevPage;\n      ngCollection.$toJSON    = toJSON;\n      ngCollection.$more      = more;\n\n      addUserDefinedMethods(ngCollection, ngDataClass);\n    }\n\n    function fetch(options) {\n\n      var opt = options || {};\n\n      if (opt.orderBy) {\n        throw new Error(\"orderBy can't be change on a $fetch (query collection's cached on server side)\");\n      }\n\n      if (opt.select) {\n        throw new Error(\"select can't be change on a $fetch (query collection's cached on server side)\");\n      }\n\n      var deferred = $q.defer();\n      var promise = deferred.promise;\n\n      this.$_collection.fetch(options)\n        .then(function (res) {\n          rootScopeSafeApply(function () {\n            emptyNgCollection(this);\n            addEntities(this, this.$_collection.entities);\n\n            deferred.resolve({\n              result: this\n            });\n          }.bind(this));\n        }.bind(this))\n        .catch(function (e) {\n          rootScopeSafeApply(function () {\n            deferred.reject(e);\n          });\n        });\n\n      promise.$promise = promise;\n      return promise;\n    }\n\n    function more() {\n\n      var deferred = $q.defer();\n      var promise = deferred.promise;\n\n      this.$_collection.more()\n        .then(function (res) {\n          rootScopeSafeApply(function () {\n            emptyNgCollection(this);\n            addEntities(this, this.$_collection.entities);\n\n            deferred.resolve({\n              result: this\n            });\n          }.bind(this));\n        }.bind(this))\n        .catch(function (e) {\n          rootScopeSafeApply(function () {\n            deferred.reject(e);\n          });\n        });\n\n      promise.$promise = promise;\n      return promise;\n    }\n\n    function nextPage() {\n      var deferred = $q.defer();\n      var promise = deferred.promise;\n\n      this.$_collection.nextPage()\n        .then(function (res) {\n          rootScopeSafeApply(function () {\n            emptyNgCollection(this);\n            addEntities(this, this.$_collection.entities);\n\n            deferred.resolve({\n              result: this\n            });\n          }.bind(this))\n        }.bind(this))\n        .catch(function (e) {\n          rootScopeSafeApply(function () {\n            deferred.reject(e);\n          });\n        });\n\n      promise.$promise = promise;\n      return promise;\n    }\n\n    function prevPage() {\n      var deferred = $q.defer();\n      var promise = deferred.promise;\n\n      this.$_collection.prevPage()\n        .then(function (res) {\n          rootScopeSafeApply(function () {\n            emptyNgCollection(this);\n            addEntities(this, this.$_collection.entities);\n\n            deferred.resolve({\n              result: this\n            });\n          }.bind(this))\n        }.bind(this))\n        .catch(function (e) {\n          rootScopeSafeApply(function () {\n            deferred.reject(e);\n          })\n        })\n\n      promise.$promise = promise;\n      return promise;\n    }\n\n    function toJSON() {\n      //Two things: it eliminates internal properties, and it output as real\n      //array, as JS doesn't see NgCollection as an array\n      var array = [];\n      for (var i = 0; i < this.length; i++) {\n        array.push(this[i]);\n      }\n\n      return JSON.stringify(array);\n    }\n\n    function addUserDefinedMethods(ngCollection, ngDataClass) {\n      ngDataClass.$_dataClass.methods.collection.forEach(function (methodName) {\n        ngCollection[methodName] = function () {\n          var args = arguments;\n          var deferred = $q.defer();\n          var promise = deferred.promise;\n\n          ngCollection.$_collection[methodName].apply(ngCollection.$_collection, args)\n            .then(function (res) {\n              rootScopeSafeApply(function () {\n                var result = res;\n\n                if (wakandaClient.helper.isEntity(res)) {\n                  var ngDataClass = ngCollection.$_dataClass.$_catalog[res._dataClass.name];\n                  if (ngDataClass) {\n                    var entityFactory = $injector.get('entityFactory');\n                    result = entityFactory.createNgEntity(ngDataClass);\n                    result.$_entity = res;\n                  }\n                }\n                else if (wakandaClient.helper.isCollection(res)) {\n                  var ngDataClass = ngCollection.$_dataClass.$_catalog[res._dataClass.name];\n                  if (ngDataClass) {\n                    result = collectionFactory.createNgCollection(ngDataClass)\n                    result.$_collection = res;\n                    collectionFactory.addEntities(result, res.entities);\n                  }\n                }\n\n                deferred.resolve({\n                  result: result\n                });\n              });\n            })\n            .catch(function (e) {\n              rootScopeSafeApply(function () {\n                deferred.reject(e);\n              })\n            });\n\n          promise.$promise = promise;\n          return promise;\n        };\n      });\n    }\n\n    function emptyNgCollection(ngCollection) {\n      for (var i = 0; i < ngCollection.length; i++) {\n        delete ngCollection[i];\n      }\n      ngCollection.length = 0;\n    };\n\n    function addEntities(ngCollection, entities) {\n      //Dynamic injection to avoid circular dependency crisis thrown by Angular\n      var entityFactory = $injector.get('entityFactory');\n\n      for (var i = 0; i < entities.length; i++) {\n        var ngEntity = entityFactory.createNgEntity(ngCollection.$_dataClass);\n        ngEntity.$_entity = entities[i];\n\n        ngCollection.push(ngEntity);\n      }\n    };\n\n    collectionFactory.isNgCollection = function (object) {\n      //Direct return returns undefined... Strange.\n      var r =\n        typeof object === 'object' &&\n        typeof object.$fetch === 'function' &&\n        typeof object.$more === 'function' &&\n        typeof object.$prevPage === 'function' &&\n        typeof object.$nextPage === 'function' &&\n        typeof object.$toJSON === 'function';\n\n      return r;\n    };\n\n    collectionFactory.emptyNgCollection = emptyNgCollection;\n    collectionFactory.addEntities       = addEntities;\n\n    collectionFactory.createNgCollection = function (ngDataClass) {\n      var ngCollection = [];\n      _decorate(ngCollection, ngDataClass);\n\n      return ngCollection;\n    };\n\n    return collectionFactory;\n  }]);\n\nvar wakanda = angular.module('wakanda');\n\nwakanda.factory('dataclassFactory', ['$q', 'entityFactory', 'collectionFactory', 'rootScopeSafeApply', 'wakandaClient',\n  function ($q, entityFactory, collectionFactory, rootScopeSafeApply, wakandaClient) {\n    var dcFactory = {};\n\n    function NgDataClass(dataClass, catalog) {\n      Object.defineProperty(this, '$_dataClass', {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: dataClass\n      });\n\n      Object.defineProperty(this, '$_catalog', {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: catalog\n      });\n\n      this.$name            = dataClass.name;\n      this.$collectionName  = dataClass.collectionName;\n\n      addUserDefinedMethods(this);\n    }\n\n    NgDataClass.prototype.$find               = find;\n    NgDataClass.prototype.$create             = create;\n    NgDataClass.prototype.$query              = query;\n    NgDataClass.prototype.$all                = all;\n    NgDataClass.prototype.$attr               = attributeInfo;\n    NgDataClass.prototype.$entityMethods      = getEntityMethods;\n    NgDataClass.prototype.$collectionMethods  = getCollectionMethods;\n    NgDataClass.prototype.$dataClassMethods   = getDataClassMethods;\n\n    function find(key, options) {\n      var ngEntity = entityFactory.createNgEntity(this);\n      var deferred = $q.defer();\n      var promise = deferred.promise;\n\n      this.$_dataClass.find(key, options)\n        .then(function (entity) {\n          rootScopeSafeApply(function () {\n            ngEntity.$_entity = entity;\n            deferred.resolve({\n              result: ngEntity\n            });\n          });\n        })\n        .catch(function (e) {\n          rootScopeSafeApply(function () {\n            deferred.reject(e);\n          });\n        });\n\n      ngEntity.$promise = promise;\n      return ngEntity;\n    }\n\n    function create(pojo) {\n      var relatedToSet = {};\n\n      if (pojo && typeof pojo === 'object') {\n        for (var attr in pojo) {\n          if (pojo.hasOwnProperty(attr)) {\n            if (entityFactory.isNgEntity(pojo[attr])) {\n              relatedToSet[attr] = pojo[attr];\n              delete pojo[attr];\n            }\n          }\n        }\n      }\n\n      var jscEntity = this.$_dataClass.create(pojo);\n      var ngEntity  = entityFactory.createNgEntity(this);\n      ngEntity.$_entity = jscEntity;\n\n      for (var attr in relatedToSet) {\n        if (relatedToSet.hasOwnProperty(attr)) {\n          ngEntity[attr] = relatedToSet[attr];\n        }\n      };\n\n      return ngEntity;\n    }\n\n    function query(options) {\n      var ngCollection =  collectionFactory.createNgCollection(this);\n      var deferred = $q.defer();\n      var promise = deferred.promise;\n\n      this.$_dataClass.query(options)\n        .then(function (collection) {\n          rootScopeSafeApply(function () {\n            ngCollection.$_collection = collection;\n            collectionFactory.addEntities(ngCollection, collection.entities);\n            deferred.resolve({\n              result: ngCollection\n            });\n          });\n        })\n        .catch(function (e) {\n          rootScopeSafeApply(function () {\n            deferred.reject(e);\n          });\n        });\n\n      ngCollection.$promise = promise;\n      return ngCollection;\n    }\n\n    function all(options) {\n      var opt = options || {};\n\n      if (opt.filter || opt.params) {\n        console.warn('params and filter parameters on options object are not allowed on calling $all() method. They will be ignored');\n      }\n\n      opt.filter = null;\n      opt.params = null;\n\n      return this.$query(opt);\n    }\n\n    function addUserDefinedMethods (ngDataClass) {\n      ngDataClass.$_dataClass.methods.dataClass.forEach(function (methodName) {\n        ngDataClass[methodName] = function () {\n          var deferred = $q.defer();\n          var promise = deferred.promise;\n          var args = arguments;\n\n          ngDataClass.$_dataClass[methodName].apply(ngDataClass.$_dataClass, args)\n            .then(function (res) {\n              rootScopeSafeApply(function () {\n                var result = res;\n\n                if (wakandaClient.helper.isEntity(res)) {\n                  var targetDataClass = ngDataClass.$_catalog[res._dataClass.name];\n                  if (targetDataClass) {\n                    result = entityFactory.createNgEntity(targetDataClass);\n                    result.$_entity = res;\n                  }\n                }\n                else if (wakandaClient.helper.isCollection(res)) {\n                  var targetDataClass = ngDataClass.$_catalog[res._dataClass.name];\n                  if (targetDataClass) {\n                    result = collectionFactory.createNgCollection(targetDataClass);\n                    result.$_collection = res;\n                    collectionFactory.addEntities(result, res.entities);\n                  }\n                }\n\n                deferred.resolve({\n                  result: result\n                });\n              });\n            })\n            .catch(function (e) {\n              rootScopeSafeApply(function () {\n                deferred.reject(e);\n              });\n            });\n\n          promise.$promise = promise;\n          return promise;\n        };\n      });\n    }\n\n    function attributeInfo(attrName) {\n      var attributes = this.$_dataClass.attributes;\n\n      if (attrName) {\n        for (var i = 0; i < attributes.length; i++) {\n          if (attributes[i].name === attrName) {\n            return attributes[i];\n          }\n        }\n        return null;\n      }\n\n      var attributeMap = {};\n      for (var i = 0; i < attributes.length; i++) {\n        attributeMap[attributes[i].name] = attributes[i];\n      }\n      return attributeMap;\n    }\n\n    function getCollectionMethods() {\n      return getMethods(this, 'collection');\n    }\n\n    function getEntityMethods() {\n      return getMethods(this, 'entity');\n    }\n\n    function getDataClassMethods() {\n      return getMethods(this, 'dataClass');\n    }\n\n    function getMethods(ngDataClass, type) {\n      return ngDataClass.$_dataClass.methods[type];\n    }\n\n    dcFactory.createNgDataClass = function (dataClass, catalog) {\n      return new NgDataClass(dataClass, catalog);\n    }\n\n    return dcFactory;\n  }]);\n\nvar wakanda = angular.module('wakanda');\n\nwakanda.factory('datastoreFactory', ['$q', 'dataclassFactory', 'wakandaClient',\n  function ($q, dataclassFactory, wakandaClient) {\n    var dsFactory = {};\n    var ds = null;\n\n    var _dsMap = {};\n\n    dsFactory.init = function(catalogStr) {\n      var catalog;\n      var promise;\n\n\n      if (typeof catalogStr !== \"string\" || catalogStr === '*' || catalogStr === '') {\n        catalog = undefined;\n      } else {\n        catalog = catalogStr.split(',');\n      }\n\n      var cachedCatalog = _dsMap[hashCatalogName(catalog)];\n\n      if (!cachedCatalog) {\n        promise = wakandaClient.getCatalog(catalog).then(function(_ds) {\n          var dataClasses = {};\n\n          for (var dcName in _ds) {\n            if (_ds.hasOwnProperty(dcName)) {\n              dataClasses[dcName] = dataclassFactory.createNgDataClass(_ds[dcName], dataClasses);\n            }\n          }\n\n          //Will be deleted at the same time that $wakanda.$ds and $wakanda.getDataStore\n          if (!ds) {\n            ds = dataClasses;\n          }\n\n          _dsMap[hashCatalogName(catalog)] = dataClasses;\n\n          return dataClasses;\n        });\n      }\n      else {\n        deferred = $q.defer();\n        deferred.resolve(cachedCatalog);\n        promise = deferred.promise;\n      }\n      promise.$promise = promise;\n\n      return promise;\n  };\n\n  dsFactory.getDataStore = function() {\n    console.warn('$wakanda.getDataStore() and $wakanda.$ds are deprecated. Use $wakanda.init() instead.');\n    if (!ds) {\n      throw new Error('The Datastore isn\\'t initialized please execute $wakanda.init(catalog) before you run your app.');\n    }\n    return ds;\n  }\n\n  function hashCatalogName(catalog) {\n    return JSON.stringify(catalog || '*');\n  }\n\n  return dsFactory;\n}]);\n\nvar wakanda = angular.module('wakanda');\n\nwakanda.factory('directoryFactory', ['$q', 'rootScopeSafeApply', 'wakandaClient',\n  function ($q, rootScopeSafeApply, wakandaClient) {\n  var directoryFactory = {};\n\n  directoryFactory.login = function (login, password) {\n    var deferred = $q.defer();\n    var promise = deferred.promise;\n\n    wakandaClient.directory.login(login, password)\n      .then(function (res) {\n        rootScopeSafeApply(function () {\n          deferred.resolve({\n            result: res\n          });\n        });\n      })\n      .catch(function (res) {\n        rootScopeSafeApply(function () {\n          deferred.resolve({\n            result: false\n          });\n        });\n      });\n\n    promise.$promise = promise;\n    return promise;\n  };\n\n  directoryFactory.logout = function () {\n    var deferred = $q.defer();\n    var promise = deferred.promise;\n\n    wakandaClient.directory.logout()\n      .then(function (res) {\n        rootScopeSafeApply(function () {\n          deferred.resolve({\n            result: res\n          });\n        });\n      })\n      .catch(function (e) {\n        rootScopeSafeApply(function () {\n          deferred.reject(e);\n        });\n      });\n\n    promise.$promise = promise;\n    return promise;\n  };\n\n  directoryFactory.currentUser = function () {\n    var deferred = $q.defer();\n    var promise = deferred.promise;\n\n    wakandaClient.directory.currentUser()\n      .then(function (res) {\n        rootScopeSafeApply(function () {\n          deferred.resolve({\n            result: res\n          });\n        });\n      })\n      .catch(function () {\n        rootScopeSafeApply(function () {\n          deferred.resolve({\n            result: null\n          });\n        });\n      });\n\n    promise.$promise = promise;\n    return promise;\n  };\n\n  directoryFactory.currentUserBelongsTo = function (groupName) {\n    var deferred = $q.defer();\n    var promise = deferred.promise;\n\n    wakandaClient.directory.currentUserBelongsTo(groupName || '')\n      .then(function (res) {\n        rootScopeSafeApply(function () {\n          deferred.resolve({\n            result: res\n          });\n        });\n      })\n      .catch(function (e) {\n        rootScopeSafeApply(function () {\n          deferred.reject(e);\n        });\n      });\n\n    promise.$promise = promise;\n    return promise;\n  };\n\n  return directoryFactory;\n}]);\n\nvar wakanda = angular.module('wakanda');\n\nwakanda.factory('entityFactory', ['$injector', '$q', 'mediaFactory', 'rootScopeSafeApply', 'wakandaClient',\n  function ($injector, $q, mediaFactory, rootScopeSafeApply, wakandaClient) {\n    var entityFactory = {};\n\n    //Entity class for Angular-Wakanda connector\n    function NgEntity(ngDataClass) {\n      //Wakanda-Client entity container\n      Object.defineProperty(this, '$_entity', {\n        enumerable: false,\n        configurable: false,\n        writable: true,\n        value: null\n      });\n\n      //Container to store related entities and collections\n      Object.defineProperty(this, '$_relatedAttributes', {\n        enumerable: false,\n        configurable: false,\n        writable: true,\n        value: {}\n      });\n\n      Object.defineProperty(this, '$_dataClass', {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: ngDataClass\n      });\n\n      //Creating property accessors for the entity\n      ngDataClass.$_dataClass.attributes.forEach(function (attr) {\n        if (attr.kind === 'relatedEntity') {\n          defineEntityProperty(this, attr);\n        }\n        else if (attr.kind === 'relatedEntities') {\n          defineCollectionProperty(this, attr);\n        }\n        else if (attr.kind === 'storage' && (attr.type === 'image' || attr.type === 'blob')) {\n          defineMediaProperty(this, attr);\n        }\n        else {\n          defineScalarProperty(this, attr);\n        }\n      }.bind(this));\n\n      addUserDefinedMethods(this, ngDataClass);\n    }\n\n    NgEntity.prototype.$save        = save;\n    NgEntity.prototype.$remove      = remove;\n    NgEntity.prototype.$fetch       = fetch;\n    NgEntity.prototype.$toJSON      = toJSON;\n    NgEntity.prototype.$key         = key;\n    NgEntity.prototype.$stamp       = stamp;\n    NgEntity.prototype.$isNew       = isNew;\n    NgEntity.prototype.$isDeferred  = isDeferred;\n    NgEntity.prototype.$recompute   = recompute;\n\n    function key() {\n      if (this.$_entity) {\n        return this.$_entity._key;\n      }\n    }\n\n    function stamp() {\n      if (this.$_entity) {\n        return this.$_entity._stamp;\n      }\n    }\n\n    function isNew() {\n      return this.$_entity._key === undefined;\n    }\n\n    function isDeferred() {\n      return this.$_entity._deferred;\n    }\n\n    function save() {\n      var deferred = $q.defer();\n      var promise = deferred.promise;\n\n      this.$_entity.save()\n        .then(function (entity) {\n          rootScopeSafeApply(function () {\n            //Related entities or collections might have changed server-side,\n            //cleaning entity-level \"cache\"\n            this.$_relatedAttributes = {};\n\n            deferred.resolve({\n              result: this\n            });\n          }.bind(this));\n        }.bind(this))\n        .catch(function (e) {\n          rootScopeSafeApply(function () {\n            deferred.reject(e);\n          });\n        });\n\n      promise.$promise = promise;\n      return promise;\n    }\n\n    function recompute() {\n      var deferred = $q.defer();\n      var promise = deferred.promise;\n\n      this.$_entity.recompute()\n        .then(function () {\n          rootScopeSafeApply(function () {\n            //Related entities or collections might have changed server-side,\n            //cleaning entity-level \"cache\"\n            this.$_relatedAttributes = {};\n\n            deferred.resolve({\n              result: this\n            });\n          }.bind(this));\n        }.bind(this))\n        .catch(function (e) {\n          rootScopeSafeApply(function () {\n            deferred.reject(e);\n          });\n        });\n\n      promise.$promise = promise;\n      return promise;\n    }\n\n    function remove() {\n      var deferred = $q.defer();\n      var promise = deferred.promise;\n\n      this.$_entity.delete()\n        .then(function (res) {\n          rootScopeSafeApply(function () {\n            this.$_entity = null;\n\n            deferred.resolve({\n              result: res\n            });\n          }.bind(this));\n        }.bind(this))\n        .catch(function (e) {\n          rootScopeSafeApply(function () {\n            deferred.reject(e);\n          });\n        });\n\n      promise.$promise = promise;\n      return promise;\n    }\n\n    function fetch() {\n      if (!this.$_entity._key) {\n        throw new Error(\"$fetch error - no key nor pointer was found\");\n      }\n\n      var deferred = $q.defer();\n      var promise = deferred.promise;\n\n      this.$_entity.fetch()\n        .then(function () {\n          rootScopeSafeApply(function () {\n            deferred.resolve({\n              result: this.$_entity\n            });\n          }.bind(this));\n        }.bind(this))\n        .catch(function (e) {\n          rootScopeSafeApply(function () {\n            deferred.reject(e);\n          });\n        });\n\n      promise.$promise = promise;\n      return promise;\n    }\n\n    function toJSON() {\n      return JSON.stringify(this, function (key, value) {\n        if (key === '$promise') {\n          return undefined;\n        }\n        return value;\n      });\n    }\n\n    function addUserDefinedMethods (ngEntity, ngDataClass) {\n      ngDataClass.$_dataClass.methods.entity.forEach(function (methodName) {\n        ngEntity[methodName] = function () {\n          var args = arguments;\n          var deferred = $q.defer();\n          var promise = deferred.promise;\n\n          ngEntity.$_entity[methodName].apply(ngEntity.$_entity, args)\n            .then(function (res) {\n              rootScopeSafeApply(function () {\n                var result = res;\n\n                if (wakandaClient.helper.isEntity(res)) {\n                  var targetDataClass = ngDataClass.$_catalog[res._dataClass.name];\n                  if (targetDataClass) {\n                    result = entityFactory.createNgEntity(targetDataClass);\n                    result.$_entity = res;\n                  }\n                }\n                else if (wakandaClient.helper.isCollection(res)) {\n                  var targetDataClass = ngDataClass.$_catalog[res._dataClass.name];\n                  if (targetDataClass) {\n                    var collectionFactory = $injector.get('collectionFactory');\n                    result = collectionFactory.createNgCollection(targetDataClass);\n                    result.$_collection = res;\n                    collectionFactory.addEntities(result, res.entities);\n                  }\n                }\n\n                deferred.resolve({\n                  result: result\n                });\n              });\n            })\n            .catch(function (e) {\n              rootScopeSafeApply(function () {\n                deferred.reject(e);\n              });\n            });\n\n          promise.$promise = promise;\n          return promise;\n        };\n      });\n    }\n\n    function defineEntityProperty(ngEntity, attr) {\n      Object.defineProperty(ngEntity, attr.name, {\n        enumerable: true,\n        get: function () {\n          if (!this.$_entity) {\n            return null;\n          }\n\n          if (this.$_entity[attr.name]) {\n            if (!ngEntity.$_relatedAttributes[attr.name]) {\n              var ngDataClass = ngEntity.$_dataClass.$_catalog[attr.type];\n              var relatedNgEntity = new NgEntity(ngDataClass);\n\n              relatedNgEntity.$_entity = ngEntity.$_entity[attr.name];\n              ngEntity.$_relatedAttributes[attr.name] = relatedNgEntity;\n            }\n            return ngEntity.$_relatedAttributes[attr.name];\n          }\n          else {\n            return null;\n          }\n        },\n        set: function (value) {\n          if (!(value instanceof NgEntity) && value !== null) {\n            throw new Error('Passed value must be an entity or null');\n          }\n\n          rootScopeSafeApply(function () {\n            if (value) {\n              ngEntity.$_relatedAttributes[attr.name] = value;\n              ngEntity.$_entity[attr.name] = value.$_entity;\n            }\n            else {\n              delete ngEntity.$_relatedAttributes[attr.name];\n              ngEntity.$_entity[attr.name] = null;\n            }\n          });\n        }\n      });\n    }\n\n    function defineCollectionProperty(ngEntity, attr) {\n      Object.defineProperty(ngEntity, attr.name, {\n        enumerable: true,\n        get: function () {\n          if (!this.$_entity) {\n            return null;\n          }\n\n          if (this.$_entity[attr.name]) {\n            if (!ngEntity.$_relatedAttributes[attr.name]) {\n              var ngDataClass = ngEntity.$_dataClass.$_catalog[attr.entityType];\n              var collectionFactory = $injector.get('collectionFactory');\n              var ngCollection = collectionFactory.createNgCollection(ngDataClass);\n\n              collectionFactory.addEntities(ngCollection, this.$_entity[attr.name].entities);\n              ngCollection.$_collection = this.$_entity[attr.name];\n              ngEntity.$_relatedAttributes[attr.name] = ngCollection;\n            }\n            return ngEntity.$_relatedAttributes[attr.name];\n          }\n          else {\n            return null;\n          }\n        },\n        set: function () {\n          throw new Error(\"Can't set relatedEntities attribute \" + attr.name + \".\");\n        }\n      });\n    }\n\n    function defineMediaProperty(ngEntity, attr) {\n      Object.defineProperty(ngEntity, attr.name, {\n        enumerable: true,\n        get: function () {\n          if (!this.$_entity) {\n            return null;\n          }\n\n          if (!this.$_relatedAttributes[attr.name]) {\n            var ngMedia = mediaFactory.createNgMedia(this.$_entity[attr.name]);\n            this.$_relatedAttributes[attr.name] = ngMedia;\n          }\n          return this.$_relatedAttributes[attr.name];\n        },\n        set: function () {\n          throw new Error(\"Can't set media attribute \" + attr.name + \".\");\n        }\n      });\n    }\n\n    function defineScalarProperty(ngEntity, attr) {\n      Object.defineProperty(ngEntity, attr.name, {\n        enumerable: true,\n        get: function () {\n          if (!this.$_entity) {\n            return null;\n          }\n\n          return ngEntity.$_entity[attr.name] || null;\n        },\n        set: function (value) {\n          rootScopeSafeApply(function () {\n            ngEntity.$_entity[attr.name] = value;\n          });\n        }\n      });\n    }\n\n    entityFactory.isNgEntity = function (object) {\n      return object instanceof NgEntity === true;\n    };\n\n    entityFactory.createNgEntity = function (ngDataClass) {\n      return new NgEntity(ngDataClass);\n    };\n\n    return entityFactory;\n  }]);\n\nangular.module('wakanda')\n  .factory('$wakandaManager', ['$wakanda', '$q', function ($wakanda, $q) {\n\n      var factory = {};\n\n      factory.getDataStore = function (catalog) {\n        return $wakanda.init(catalog);\n      };\n\n      factory.user = {};\n\n      factory.currentUser = function () {\n        return $wakanda.$currentUser().$promise\n          .then(function (e) {\n            if (e && e.result) {\n              return e.result;\n            }\n            else {\n              return $q.reject();\n            }\n          });\n      };\n\n      factory.currentUserBelongsTo = function (groupName) {\n        return $wakanda.$currentUserBelongsTo(groupName)\n          .then(function (e) {\n            if (e && e.result === true) {\n              return true;\n            }\n            else {\n              return $q.reject();\n            }\n          });\n      };\n\n      return factory;\n  }]);\n\nvar wakanda = angular.module('wakanda');\n\nwakanda.factory('mediaFactory', ['rootScopeSafeApply', '$q',\n  function (rootScopeSafeApply, $q) {\n    var mediaFactory = {};\n\n    function NgMedia(media) {\n      Object.defineProperty(this, '$_media', {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: media\n      });\n\n      Object.defineProperty(this, 'uri', {\n        enumerable: true,\n        configurable: false,\n        get: function () {\n          return this.$_media.uri;\n        },\n        set: function () {\n          throw new Error('Can\\'t set media uri.');\n        }\n      });\n    }\n\n    NgMedia.prototype.$upload = upload;\n    NgMedia.prototype.$remove = remove;\n\n    function upload(file) {\n      var promise = this.$_media.upload(file, file.type).then(function (res) {\n        var deferred = $q.defer();\n        rootScopeSafeApply(function () {\n          deferred.resolve({\n            result: res\n          });\n        });\n      });\n\n      promise.$promise = promise;\n      return promise;\n    }\n\n    function remove() {\n      var promise = this.$_media.delete().then(function (res) {\n        var deferred = $q.defer();\n        rootScopeSafeApply(function () {\n          deferred.resolve({\n            result: res\n          });\n        });\n      });\n\n      promise.$promise = promise;\n      return promise;\n    }\n\n    mediaFactory.createNgMedia = function (media) {\n      return new NgMedia(media);\n    };\n\n    return mediaFactory;\n  }]);\n\nangular.module('wakanda')\n  .service('rootScopeSafeApply', ['$rootScope', '$timeout', function ($rootScope, $timeout) {\n  'use strict';\n\n    /**\n     * Safe $rootScope.$apply which check for $apply or $digest phase before\n     *\n     * @param {Function} fn\n     * @returns {undefined}\n     */\n    var rootScopeSafeApply = function(fn) {\n      var phase = $rootScope.$$phase;\n      if (phase === '$apply' || phase === '$digest') {\n        if (fn && (typeof (fn) === 'function')) {\n          fn();\n        }\n      } else {\n        $rootScope.$apply(fn);\n      }\n    };\n\n    return rootScopeSafeApply;\n\n  }]);\n\nvar wakanda = angular.module('wakanda');\n\n//Just here for backward compatibility\nwakanda.factory('transformFactory', ['entityFactory', 'collectionFactory',\n  function (entityFactory, collectionFactory) {\n    var transformFactory = {};\n\n    transformFactory.toEntity = function (object) {\n      console.warn('$transform.$objectToEntity is deprecated. This transformation is done automatically.');\n\n      if(!entityFactory.isNgEntity(object)) {\n        throw new Error('$transform.$objectToEntity: invalid object');\n      }\n\n      return object;\n    };\n\n    transformFactory.toCollection = function (object) {\n      console.warn('$transform.$objectToCollection is deprecated. This transformation is done automatically.');\n\n      if(!collectionFactory.isNgCollection(object)) {\n        throw new Error('$transform.$objectToCollection: invalid object');\n      }\n\n      return object;\n    };\n\n    return transformFactory;\n  }]);\n"]}